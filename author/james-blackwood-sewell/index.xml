<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>James Blackwood-Sewell | äº‘åŸç”Ÿèµ„æ–™åº“</title>
    <link>https://lib.jimmysong.io/author/james-blackwood-sewell/</link>
      <atom:link href="https://lib.jimmysong.io/author/james-blackwood-sewell/index.xml" rel="self" type="application/rss+xml" />
    <description>James Blackwood-Sewell</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><lastBuildDate>Mon, 30 May 2022 11:00:00 +0800</lastBuildDate>
    <image>
      <url>https://lib.jimmysong.io/media/sharing.png</url>
      <title>James Blackwood-Sewell</title>
      <link>https://lib.jimmysong.io/author/james-blackwood-sewell/</link>
    </image>
    
    <item>
      <title>ä¸€é”®å¼€å¯ Kubernetes å¯è§‚æµ‹æ€§â€”â€”å¦‚ä½•è‡ªåŠ¨ç”Ÿæˆå’Œå­˜å‚¨ OpenTelemetry è¿½è¸ª</title>
      <link>https://lib.jimmysong.io/blog/generate-and-store-opentelemetry-traces-automatically/</link>
      <pubDate>Mon, 30 May 2022 11:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/blog/generate-and-store-opentelemetry-traces-automatically/</guid>
      <description>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;OpenTelemetry è¿½è¸ªåŒ…å«äº†ç†è§£åˆ†å¸ƒå¼ç³»ç»Ÿå’Œæ’é™¤æ•…éšœçš„ä¿¡æ¯å®åº“ â€”â€” ä½†ä½ çš„æœåŠ¡å¿…é¡»é¦–å…ˆè¢«æŒ‡æ ‡åŒ–ï¼Œä»¥å‘å°„ OpenTelemetry è¿½è¸ªæ¥å®ç°è¿™ä¸€ä»·å€¼ã€‚ç„¶åï¼Œè¿™äº›è¿½è¸ªä¿¡æ¯éœ€è¦è¢«å‘é€åˆ°ä¸€ä¸ªå¯è§‚å¯Ÿçš„åç«¯ï¼Œä½¿ä½ èƒ½å¤Ÿè·å¾—å…³äºè¿™äº›æ•°æ®çš„ä»»æ„é—®é¢˜çš„ç­”æ¡ˆã€‚å¯è§‚æµ‹æ€§æ˜¯ä¸€ä¸ªåˆ†æé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬å‘¨æ—©äº›æ—¶å€™ï¼Œæˆ‘ä»¬éƒ¨åˆ†è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®£å¸ƒ&lt;a href=&#34;https://www.timescale.com/blog/observability-powered-by-sql-understand-your-systems-like-never-before-with-opentelemetry-traces-and-postgresql/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨ Promscale ä¸­æ™®éæä¾› OpenTelemetry è¿½è¸ªæ”¯æŒ&lt;/a&gt;ï¼Œå°†ç”± SQL é©±åŠ¨çš„å¯è§‚æµ‹æ€§å¸¦ç»™æ‰€æœ‰å¼€å‘è€…ã€‚éšç€å¯¹åˆ†æè¯­è¨€ â€”â€”SQL çš„å…¨é¢æ”¯æŒï¼Œæˆ‘ä»¬è§£å†³äº†åˆ†æçš„é—®é¢˜ã€‚ä½†æˆ‘ä»¬ä»ç„¶éœ€è¦è§£å†³ç¬¬ä¸€éƒ¨åˆ†çš„é—®é¢˜ï¼šæµ‹é‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ çš„æœåŠ¡å‘å‡ºè¿½è¸ªæ•°æ®ï¼Œä½ å¿…é¡»æ‰‹åŠ¨æ·»åŠ  OpenTelemetry æµ‹é‡å·¥å…·åˆ°ä»£ç ä¸­ã€‚è€Œä¸”ä½ å¿…é¡»é’ˆå¯¹æ‰€æœ‰æœåŠ¡å’Œä½ ä½¿ç”¨çš„æ‰€æœ‰æ¡†æ¶æ¥åšï¼Œå¦åˆ™ä½ å°†æ— æ³•çœ‹åˆ°æ¯ä¸ªè¯·æ±‚çš„æ‰§è¡Œæƒ…å†µã€‚ä½ è¿˜éœ€è¦éƒ¨ç½² OpenTelemetry æ”¶é›†å™¨æ¥æ¥æ”¶æ‰€æœ‰æ–°çš„è¿½è¸ªï¼Œå¤„ç†å®ƒä»¬ï¼Œæ‰¹å¤„ç†å®ƒä»¬ï¼Œå¹¶æœ€ç»ˆå°†å®ƒä»¬å‘é€åˆ°ä½ çš„å¯è§‚æµ‹æ€§åç«¯ã€‚è¿™éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¸éœ€è¦åšæ‰€æœ‰è¿™äº›æ‰‹å·¥å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…è€Œä¸æ˜¯å‡ å°æ—¶ç”šè‡³å‡ å¤©å†…å¯åŠ¨å’Œè¿è¡Œå‘¢ï¼Ÿå¦‚æœä½ è¿˜èƒ½å»ºç«‹ä¸€ä¸ªå®Œæ•´çš„å¯è§‚æµ‹æ€§æŠ€æœ¯æ ˆå¹¶è‡ªåŠ¨è¿æ¥æ‰€æœ‰çš„ç»„ä»¶å‘¢ï¼Ÿå¦‚æœæˆ‘å‘Šè¯‰ä½ ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸æ˜¯ç–¯å­ã€‚æˆ‘åªæ˜¯ä¸€ä¸ª &lt;a href=&#34;https://docs.timescale.com/promscale/latest/tobs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tobs&lt;/a&gt; ç”¨æˆ·ğŸ˜ã€‚&lt;/p&gt;
&lt;p&gt;Tobs æ˜¯ Kubernetes çš„å¯è§‚æµ‹æ€§æŠ€æœ¯æ ˆï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ¥&lt;a href=&#34;https://www.timescale.com/blog/introducing-tobs-deploy-a-full-observability-suite-for-kubernetes-in-two-minutes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨å‡ åˆ†é’Ÿå†…åœ¨ Kubernetes é›†ç¾¤ä¸­éƒ¨ç½²ä¸€ä¸ªå®Œæ•´çš„å¯è§‚æµ‹æ€§æŠ€æœ¯æ ˆ&lt;/a&gt;çš„å·¥å…·ã€‚è¯¥æ ˆåŒ…æ‹¬ OpenTelemetry Operatorã€OpenTelemetry Collectorã€Promscale å’Œ Grafanaã€‚å®ƒè¿˜éƒ¨ç½²äº†å…¶ä»–å‡ ä¸ªå·¥å…·ï¼Œå¦‚ Prometheusï¼Œä»¥æ”¶é›† Kubernetes é›†ç¾¤çš„æŒ‡æ ‡ï¼Œå¹¶å°†å…¶å‘é€åˆ° Promscaleã€‚&lt;a href=&#34;https://github.com/timescale/tobs/releases/tag/0.10.1&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨æˆ‘ä»¬çš„æœ€æ–°ç‰ˆæœ¬ä¸­&lt;/a&gt;ï¼Œtobs åŒ…æ‹¬æ”¯æŒé€šè¿‡ OpenTelemetry Operator ç”¨ OpenTelemetry è¿½è¸ªè‡ªåŠ¨æ£€æµ‹ä½ çš„ Pythonã€Java å’Œ Node.js æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼šè‡ªåŠ¨ï¼ä½ ä¸éœ€è¦æ”¹å˜æœåŠ¡ä¸­çš„ä»»ä½•ä¸€è¡Œä»£ç ï¼Œå°±å¯ä»¥è®©å®ƒä»¬è¢«æ£€æµ‹å‡ºæ¥ã€‚é”¦ä¸Šæ·»èŠ±çš„æ˜¯ä»€ä¹ˆï¼Ÿä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ helm å‘½ä»¤æ¥éƒ¨ç½²ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº† tobsï¼Œä½ å¯ä»¥å®‰è£…ä½ çš„å¯è§‚æµ‹æ€§æŠ€æœ¯æ ˆï¼Œåªéœ€å‡ æ­¥å°±èƒ½æå®šä½ çš„ OpenTelemetry æŒ‡æ ‡åŒ–çš„ç¬¬ä¸€å±‚ã€‚å‘Šåˆ«ç¹ççš„é…ç½®å·¥ä½œï¼Œå› ä¸ºä½ çš„æ¡†æ¶ä¼šè‡ªå·±æ£€æµ‹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æƒ³äº†è§£å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯·ç»§ç»­é˜…è¯»æœ¬åšæ–‡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†è§£é‡Šä¸€åˆ‡æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œå‰–æ OpenTelemetry Operator åœ¨å†…éƒ¨çš„çœŸæ­£ä½œç”¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªä¾‹å­æ¼”ç¤ºå¦‚ä½•å°†å…¶ç›´æ¥ä»˜è¯¸å®è·µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬å°†é€šè¿‡ tobs åœ¨æˆ‘ä»¬çš„ Kubernetes é›†ç¾¤ä¸­å®‰è£…ä¸€ä¸ªå®Œæ•´çš„å¯è§‚æµ‹æ€§æŠ€æœ¯æ ˆã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªäº‘åŸç”Ÿ Python åº”ç”¨ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬å°†æ£€æŸ¥æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•è¢« OpenTelemetry è¿½è¸ªå™¨è‡ªåŠ¨æ£€æµ‹åˆ°çš„ï¼Œè¿™è¦å½’åŠŸäº tobs å’Œ OpenTelemetry Operator æ‰€åšçš„é­”æœ¯ğŸª„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;opentelemetry-operator&#34;&gt;OpenTelemetry Operator&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://opentelemetry.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry&lt;/a&gt; æ˜¯ä¸€ä¸ªå¼€æºçš„æ¡†æ¶ï¼Œå¯ä»¥æ•è·ã€è½¬æ¢å’Œè·¯ç”±æ‰€æœ‰ç±»å‹çš„ä¿¡å·ï¼ˆè¿½è¸ªã€æ—¥å¿—å’ŒæŒ‡æ ‡ï¼‰ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¼šä½¿ç”¨ &lt;a href=&#34;https://open-telemetry.github.io/opentelemetry-js/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry SDK&lt;/a&gt; æ¥åœ¨ä½ çš„åº”ç”¨ç¨‹åºä»£ç ä¸­ç”Ÿæˆè¿™äº›ä¿¡å·ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒOpenTelemetry å¯ä»¥è‡ªåŠ¨æ£€æµ‹ä½ çš„ä»£ç  â€”â€” ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ çš„åº”ç”¨æ¡†æ¶è¢«æ”¯æŒï¼Œå¹¶ä¸”ä½ ä½¿ç”¨çš„è¯­è¨€æ˜¯ OpenTelemetry å¯ä»¥æ³¨å…¥ä»£ç çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ çš„ç³»ç»Ÿå°†å¼€å§‹äº§ç”Ÿé¥æµ‹ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;è¦äº†è§£ OpenTelemetry æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†Ÿæ‚‰ &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-operator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry Operator&lt;/a&gt;ã€‚OpenTelemetry Operator æ˜¯ä¸€ä¸ªå®ç° &lt;a href=&#34;https://kubernetes.io/docs/concepts/extend-kubernetes/operator/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes Operator æ¨¡å¼&lt;/a&gt;çš„åº”ç”¨ç¨‹åºï¼Œä¸ Kubernetes é›†ç¾¤ä¸­çš„ä¸¤ä¸ª CustomResourceDefinitionsï¼ˆCRDï¼‰äº’åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾ç¤ºè¯´æ˜-opentelemetry-operator-å¦‚ä½•ä¸-kubernetes-äº’åŠ¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ç¤ºè¯´æ˜ OpenTelemetry Operator å¦‚ä½•ä¸ Kubernetes äº’åŠ¨&#34; srcset=&#34;
               /blog/generate-and-store-opentelemetry-traces-automatically/otel-operator-kubernetes_hu9eaea35c1c3da37ce10befac350865f4_54425_89510390ea80e6b60d8a5067819ad3e1.webp 400w,
               /blog/generate-and-store-opentelemetry-traces-automatically/otel-operator-kubernetes_hu9eaea35c1c3da37ce10befac350865f4_54425_67c2a525aead983718379ac249f37412.webp 760w,
               /blog/generate-and-store-opentelemetry-traces-automatically/otel-operator-kubernetes_hu9eaea35c1c3da37ce10befac350865f4_54425_1200x1200_fit_q75_h2_lanczos.webp 1200w&#34;
               src=&#34;https://lib.jimmysong.io/blog/generate-and-store-opentelemetry-traces-automatically/otel-operator-kubernetes_hu9eaea35c1c3da37ce10befac350865f4_54425_89510390ea80e6b60d8a5067819ad3e1.webp&#34;
               width=&#34;760&#34;
               height=&#34;481&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ç¤ºè¯´æ˜ OpenTelemetry Operator å¦‚ä½•ä¸ Kubernetes äº’åŠ¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸºäº CustomResourceDefinitionsï¼ˆCRD&lt;/a&gt;ï¼‰å®ä¾‹çš„å˜åŒ–ï¼ŒOperator ä¸ºæˆ‘ä»¬ç®¡ç†ä»¥ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºå’Œåˆ é™¤ OpenTelemetry Collector å®ä¾‹&lt;/li&gt;
&lt;li&gt;å°† OpenTelemetry è‡ªåŠ¨æµ‹é‡æ‰€éœ€çš„åº“å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ç›´æ¥æ³¨å…¥åˆ°ä½ çš„ pod ä¸­&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è§£è¯»è¿™ä¸¤é¡¹ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç®¡ç†-opentelemetry-collector&#34;&gt;ç®¡ç† OpenTelemetry Collector&lt;/h2&gt;
&lt;p&gt;OpenTelemetry Operator çš„é¦–è¦ä»»åŠ¡æ˜¯éƒ¨ç½² &lt;a href=&#34;https://opentelemetry.io/docs/collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry Collector&lt;/a&gt; å®ä¾‹ã€‚è¿™äº›å®ä¾‹å°†è¢«ç”¨æ¥æŠŠä¿¡å·ä»æºå¤´ï¼ˆä½ çš„å·¥ä½œè´Ÿè½½å’Œ Kubernetes æœ¬èº«ï¼‰è·¯ç”±åˆ°å®ƒä»¬çš„ç›®æ ‡ï¼ˆæ”¯æŒ OpenTelemetry åè®®çš„å­˜å‚¨ç³»ç»Ÿæˆ–é›†ç¾¤å¤–çš„å¦ä¸€ä¸ªé‡‡é›†å™¨ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡é›†å™¨å¯ä»¥ä»¥ä¸‰ç§ä¸åŒçš„æ–¹å¼éƒ¨ç½²ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½œä¸º Kubernetes Deploymentï¼šè¿™æ˜¯é»˜è®¤é€‰é¡¹ï¼Œå®ƒå…è®¸é‡‡é›†å™¨æ ¹æ®éœ€è¦åœ¨èŠ‚ç‚¹ä¹‹é—´ç§»åŠ¨ï¼Œæ”¯æŒå‘ä¸Šå’Œå‘ä¸‹æ‰©å±•ã€‚&lt;/li&gt;
&lt;li&gt;ä½œä¸º Kubernetes Daemonsetï¼šè¿™ä¸ªé€‰é¡¹å°†åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ¨ç½²ä¸€ä¸ªé‡‡é›†å™¨ï¼Œå½“ä½ æƒ³ç¡®ä¿ä½ çš„ä¿¡å·åœ¨æ²¡æœ‰ä»»ä½•ç½‘ç»œå¼€é”€çš„æƒ…å†µä¸‹è¢«å¤„ç†æ—¶ï¼Œå®ƒå¯èƒ½å¾ˆæœ‰ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ä½œä¸ºä¸€ä¸ª Sidecarï¼šè¢«æ³¨å…¥åˆ°ä»»ä½•æ–°çš„æ³¨é‡Šçš„ pod ä¸­ï¼ˆä½¿ç”¨ &lt;code&gt;sidecar.opentelemetry.io/inject: true&lt;/code&gt;ï¼‰ã€‚å½“é‡‡é›†å™¨éœ€è¦ä¸€ä¸ª pod çš„ç‰¹å®šé…ç½®æ—¶ï¼Œè¿™å¯èƒ½æ˜¯å¾ˆå¥½çš„ï¼ˆä¾‹å¦‚ï¼Œä¹Ÿè®¸å®ƒéœ€è¦ä¸€äº›ä¸“é—¨çš„è½¬æ¢ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥æ··åˆå’ŒåŒ¹é…è¿™äº›æ”¶é›†å™¨æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ª sidecarï¼Œä¸ºéƒ¨ç½²ä¸­çš„ pod åšä¸€äº›è½¬æ¢ï¼Œç„¶åå°†å®ƒä»¬å‘é€åˆ°ä¸€ä¸ªå…¨å±€æ”¶é›†å™¨ï¼Œä¸ä½ çš„å…¶ä»–å·¥ä½œè´Ÿè½½å…±äº«ã€‚&lt;/p&gt;
&lt;p&gt;å®šä¹‰è¿™äº›æ”¶é›†å™¨å®ä¾‹çš„é…ç½®åœ¨æ”¶é›†å™¨ CRDï¼ˆ&lt;code&gt;opentelemetrycollectors.opentelemetry.io&lt;/code&gt;ï¼‰ä¸­è¿›è¡Œå»ºæ¨¡ã€‚å…è®¸å¤šä¸ªå®ä¾‹æ¥å®ç°æ›´å¤æ‚çš„æ¨¡å¼ã€‚éƒ¨ç½²ç±»å‹æ˜¯é€šè¿‡ &lt;code&gt;mode&lt;/code&gt; è®¾ç½®æ¥é€‰æ‹©çš„ï¼Œä¼´éšç€ä¸€ä¸ªåŸå§‹çš„é…ç½®å­—ç¬¦ä¸²ï¼Œå®ƒè¢«é€å­—ä¼ é€’ç»™æ§åˆ¶å™¨ï¼Œå¹¶ä½œä¸ºé…ç½®åŠ è½½ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨ Deployment æ¨¡å¼åˆ›å»º Operator çš„ CRD çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;opentelemetry.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;OpenTelemetryCollector&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tobs-tobs-opentelemetry&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    receivers:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      jaeger:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        protocols:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          grpc:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          thrift_http:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      otlp:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        protocols:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          grpc:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          http:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    exporters:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      logging:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      otlp:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        endpoint: &amp;#34;tobs-promscale-connector.default.svc:9202&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        compression: none
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        tls:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          insecure: true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      prometheusremotewrite:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        endpoint: &amp;#34;tobs-promscale-connector.default.svc:9201/write&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        tls:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          insecure: true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    processors:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      batch:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    service:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      pipelines:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        traces:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          receivers: [jaeger, otlp]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          exporters: [logging, otlp]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          processors: [batch]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        metrics:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          receivers: [otlp]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          processors: [batch]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          exporters: [prometheusremotewrite]    &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¦‚æˆ‘ä»¬åœ¨åé¢çš„ä¾‹å­ä¸­çœ‹åˆ°çš„ï¼Œå½“ä½ ä½¿ç”¨ &lt;a href=&#34;https://docs.timescale.com/promscale/latest/tobs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tobs&lt;/a&gt; æ—¶ï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒæ‰€æœ‰è¿™äº›é…ç½®ç»†èŠ‚ã€‚tobs çš„å¥½å¤„ä¹‹ä¸€æ˜¯å®ƒä¼šä¸ºä½ å®‰è£…ä¸€ä¸ªé‡‡é›†å™¨ï¼Œå®ƒå°†ç›´æ¥æŠŠæ•°æ®å‘é€åˆ°æœ¬åœ°çš„ Promscale å®ä¾‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åœ¨-kubernetes-ä¸­æ·»åŠ -opentelemetry-è‡ªåŠ¨ç›‘æµ‹ç³»ç»Ÿ&#34;&gt;åœ¨ Kubernetes ä¸­æ·»åŠ  OpenTelemetry è‡ªåŠ¨ç›‘æµ‹ç³»ç»Ÿ&lt;/h2&gt;
&lt;p&gt;Operator çš„ç¬¬äºŒä¸ªå…³æ³¨ç‚¹æ˜¯å°† OpenTelemetry è‡ªåŠ¨æµ‹é‡æ‰€éœ€çš„åº“å’ŒäºŒè¿›åˆ¶æ–‡ä»¶æ³¨å…¥åˆ° pod ä¸­ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™äº› pod éœ€è¦å®¹çº³ Javaã€Python æˆ– Node.js åº”ç”¨ç¨‹åºï¼ˆOpenTelemetry å°†æ¥ä¼šæ”¯æŒæ›´å¤šè¯­è¨€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨äºéƒ¨ç½²è¿™äº› pod çš„ Kubernetes æ¸…å•æ–‡ä»¶å¿…é¡»åŒ…æ‹¬ä¸€ä¸ªæ³¨é‡Šï¼Œä»¥æŒ‡ç¤º OpenTelemetry Operator å¯¹å…¶è¿›è¡Œæ£€æµ‹ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;instrumentation.opentelemetry.io/inject-&amp;lt;language&amp;gt;: &amp;#34;true&amp;#34;   
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ &lt;code&gt;language&lt;/code&gt; å¯ä»¥æ˜¯ &lt;code&gt;python&lt;/code&gt;ã€&lt;code&gt;java&lt;/code&gt; æˆ– &lt;code&gt;nodejs&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ³¨è§£çš„ pod å¯åŠ¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ª &lt;code&gt;init&lt;/code&gt; å®¹å™¨ï¼Œæ³¨å…¥æ‰€éœ€çš„ä»£ç å¹¶æ”¹å˜ pod è¿è¡Œä»£ç çš„æ–¹å¼ï¼Œä½¿ç”¨æ­£ç¡®çš„ OpenTelemetry è‡ªåŠ¨æ¢æµ‹æ–¹æ³•ã€‚å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€åœ¨ä½¿ç”¨ Kubernetes æ—¶ï¼Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•ä»£ç å°±å¯ä»¥è·å¾—è‡ªåŠ¨ç›‘æµ‹çš„å¥½å¤„ã€‚è¯¥é…ç½®è¿˜å®šä¹‰äº† OpenTelemetry Collector ç«¯ç‚¹ï¼Œè¿™äº›è¿½è¸ªå°†è¢«å‘é€åˆ°è¯¥ç«¯ç‚¹ï¼Œä¼ æ’­çš„ä¿¡æ¯ç±»å‹ï¼Œä»¥åŠæˆ‘ä»¬ç”¨æ¥é‡‡æ ·è¿½è¸ªçš„æ–¹æ³•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰(å…³äº &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-operator/blob/main/docs/api.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CRD çš„å…¨éƒ¨ç»†èŠ‚ï¼Œè¯·çœ‹æ–‡æ¡£&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸º Pythonã€Java å’Œ Node.js åº”ç”¨ç¨‹åºæä¾›è‡ªåŠ¨æµ‹é‡çš„è‡ªå®šä¹‰èµ„æºçš„ä¾‹å­æ˜¯è¿™æ ·çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;opentelemetry.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Instrumentation&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tobs-auto-instrumentation&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exporter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http://tobs-opentelemetry-collector.default.svc:4318 &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;propagators&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;tracecontext&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;baggage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;b3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sampler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;argument&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0.25&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;parentbased_traceidratio&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†ä¸€æ¬¡ï¼Œå¦‚æœä½ ä½¿ç”¨ &lt;a href=&#34;https://docs.timescale.com/promscale/latest/tobs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tobs&lt;/a&gt;ï¼Œä½ å°†ä¸éœ€è¦è‡ªå·±åˆ›å»ºè¿™äº›è‡ªå®šä¹‰èµ„æºã€‚Tobs å°†ç¡®ä¿é›†ç¾¤è¢«è‡ªåŠ¨é…ç½®æˆå¯¹ä»»ä½•æœ‰æ³¨é‡Šçš„ pod è¿›è¡Œæ£€æµ‹ï¼Œè€Œä¸éœ€è¦ä½ åšä»»ä½•æ“ä½œã€‚ä½ æ‰€éœ€è¦åšçš„å°±æ˜¯åœ¨ä½ æƒ³æ”¶é›†è¿½è¸ªçš„ pod ä¸­æ·»åŠ ä»¥ä¸‹æ³¨é‡Šä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;instrumentation.opentelemetry.io/inject-java: &amp;#34;true&amp;#34;
instrumentation.opentelemetry.io/inject-nodejs: &amp;#34;true&amp;#34;
instrumentation.opentelemetry.io/inject-python:&amp;#34;true&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­çœ‹çœ‹è¿™åœ¨å®è·µä¸­æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-opentelemetry-operator-å’Œ-tobs&#34;&gt;ä½¿ç”¨ OpenTelemetry Operator å’Œ Tobs&lt;/h2&gt;
&lt;p&gt;åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æˆ‘ä»¬çš„&lt;a href=&#34;https://github.com/timescale/opentelemetry-demo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¾®æœåŠ¡æ¼”ç¤ºåº”ç”¨ç¨‹åº&lt;/a&gt;ï¼Œå®ƒç”±ä¸€ä¸ªè¿‡åº¦å·¥ç¨‹åŒ–çš„å¯†ç ç”Ÿæˆå™¨åº”ç”¨ç¨‹åºç»„æˆã€‚&lt;a href=&#34;https://github.com/timescale/opentelemetry-demo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨ repo ä¸­&lt;/a&gt;ï¼Œä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå·²æµ‹é‡çš„ç‰ˆæœ¬å’Œä¸€ä¸ªæœªæµ‹é‡çš„ç‰ˆæœ¬ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­è¦ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;è¦è¿è¡Œè¿™ä¸ªï¼Œä½ é¦–å…ˆéœ€è¦ä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œå®‰è£…äº† cert-managerï¼Œé…ç½®äº†é€šè¿‡ &lt;code&gt;kubectl&lt;/code&gt;ï¼ˆè‡³å°‘éœ€è¦ 1.21.0 ç‰ˆæœ¬ï¼‰çš„è®¿é—®ï¼Œå¹¶å®‰è£…äº† &lt;a href=&#34;https://helm.sh/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;helm&lt;/a&gt;ã€‚ä¸ºäº†éƒ¨ç½²å’Œè¿è¡Œæ‰€æœ‰ä¸åŒçš„ç»„ä»¶ï¼Œä½ å°†éœ€è¦åœ¨ä½ çš„ Kubernetes é›†ç¾¤ä¸­æä¾›å¤§çº¦ 4 æ ¸ CPU å’Œ 8GB çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„é›†ç¾¤ä¸­æ²¡æœ‰ cert-managerï¼Œä½ å°†éœ€è¦ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥å®‰è£…å®ƒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://github.com/cert-manager/cert-manager/releases/download/v1.8.0/cert-manager.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡†å¤‡å¥½åï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ Timescale Helm Chart æ¥å®‰è£… tobsã€‚åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm repo add timescale https://charts.timescale.com/ --force-update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm install --wait --timeout 10m tobs timescale/tobs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Tobs éœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´æ¥å®‰è£…ï¼Œä½†æœ€ç»ˆï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#helm install --wait tobs timescale/tobs&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NAME: tobs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;LAST DEPLOYED: Thu May &lt;span class=&#34;m&#34;&gt;19&lt;/span&gt; 11:22:19 &lt;span class=&#34;m&#34;&gt;2022&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NAMESPACE: default
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;STATUS: deployed
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;REVISION: &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NOTES:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;###############################################################################&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸ‘‹ğŸ½ Welcome to tobs, The Observability Stack &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; Kubernetes
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;âœ¨ Auto-configured and deployed:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸ”¥ Kube-Prometheus
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸ¯ TimescaleDB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸ¤ Promscale
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸ§ PromLens
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸ“ˆ Grafana
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸš€ OpenTelemetry
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ğŸ¯ Jaeger
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;###################################&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ğŸ‘‰ æ•…éšœæ’é™¤æç¤ºï¼šå¦‚æœä½ å¾—åˆ°è¿™ä¸ªé”™è¯¯ä¿¡æ¯ &lt;code&gt;INSTALLATION FAILED: rate:Wait(n=1) would exceed context deadline&lt;/code&gt;ï¼Œè¿™å¾ˆå¯èƒ½è¡¨æ˜ä½ çš„é›†ç¾¤ä¸­æ²¡æœ‰è¶³å¤Ÿçš„å¯ç”¨èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦ tobs çš„å®‰è£…å®Œæˆï¼Œæ£€æŸ¥ä½ çš„ Kubernetes é›†ç¾¤ï¼Œç¡®è®¤æ‰€æœ‰çš„ç»„ä»¶éƒ½å·²æ­£ç¡®éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl get podes --all-namespaces &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;tobs-&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ğŸ‘‰æ•…éšœæ’é™¤æç¤ºï¼šå¦‚æœæŸäº› pod å¤„äºå¾…å®šæˆ–é”™è¯¯çŠ¶æ€ï¼Œä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;kubectl describe pod &amp;lt;pod-name&amp;gt;&lt;/code&gt; æˆ– &lt;code&gt;kubectl logs &amp;lt;pod-name&amp;gt;&lt;/code&gt; æ¥äº†è§£å¯èƒ½å­˜åœ¨çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä» &lt;a href=&#34;https://github.com/timescale/opentelemetry-demo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry Demo GitHub repo&lt;/a&gt; ä¸­å¯¼å…¥æœªæµ‹é‡çš„ Kubernetes å¾®æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å›é¡¾ä¸€ä¸‹ &lt;code&gt;uninstrumented&lt;/code&gt; æ–‡ä»¶å¤¹ä¸­çš„ä»£ç ï¼Œä½ ä¼šå‘ç°å®ƒæ²¡æœ‰æåˆ° OpenTelemetryã€‚ä¾‹å¦‚ï¼Œçœ‹ä¸€ä¸‹ &lt;code&gt;load&lt;/code&gt; å¾®æœåŠ¡çš„ Python æ–‡ä»¶ï¼ˆè¿™ä¸ªæœåŠ¡é€šè¿‡å‘å‡ºå¯†ç è¯·æ±‚æ¥é©±åŠ¨å…¶ä»–æœåŠ¡çš„æµé‡ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡å°†è¿™äº›å¾®æœåŠ¡å¯¼å…¥å®‰è£…äº† tobs çš„é›†ç¾¤ä¸­ï¼Œå®ƒä»¬å°†è‡ªåŠ¨è·å¾— OpenTelemetry è¿½è¸ªçš„æµ‹é‡å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;è¦è°ƒå‡ºæ¼”ç¤ºåº”ç”¨ç¨‹åºï¼Œè¯·è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -k &lt;span class=&#34;s1&#34;&gt;&amp;#39;http://github.com/timescale/opentelemetry-demo/yaml/app&amp;#39;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“è¿™ä¸ªè¿‡ç¨‹ç»“æŸï¼Œåº”ç”¨ç¨‹åºè¢«éƒ¨ç½²æ—¶ï¼Œå®ƒå°†å·²ç»è¢« OpenTelemetry è¿½è¸ªå™¨æ‰€è®°å½•ã€‚è¿½è¸ªç°åœ¨æ­£åœ¨ç”Ÿæˆå¹¶è‡ªåŠ¨å‘é€åˆ° Promscaleã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§é­”æ³•æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªæ€»ç»“æ€§çš„è§£é‡Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ª pod éƒ½è¢«æ³¨è§£ä¸º &lt;code&gt;instrumentation.opentelemetry.io/inject-python: &amp;quot;true&amp;quot;&lt;/code&gt;ï¼Œæ‰€ä»¥å½“å®ƒä»¬å¯åŠ¨æ—¶ï¼Œä¼šè¢« OpenTelemetry Operator æ³¨æ„åˆ°ã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä¸€ä¸ªçªå˜çš„ webhook æ·»åŠ ä¸€ä¸ª init å®¹å™¨ï¼Œæ³¨å…¥ Python åº“å’Œå¯ç”¨æµ‹é‡å·¥å…·æ‰€éœ€çš„ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œè¿½è¸ªæ•°æ®è¢«å‘é€åˆ° Instrumentation CRD ä¸­æ³¨æ˜çš„ OpenTelemetry Collectorã€‚&lt;/li&gt;
&lt;li&gt;OpenTelemetry Collector å°†æ•°æ®å‘é€åˆ° Promscaleï¼ˆå’Œ TimescaleDBï¼‰ï¼Œä»é‚£é‡Œå¯ä»¥ç›´æ¥ç”¨ SQL æŸ¥è¯¢æˆ–ç”¨ Grafana ç­‰å·¥å…·è¿›è¡Œå¯è§†åŒ–è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬ç›´æ¥ä» Grafanaï¼ˆtobs ä¹Ÿè‡ªåŠ¨å®‰è£…åœ¨æˆ‘ä»¬çš„é›†ç¾¤ä¸­ï¼‰è‡ªåŠ¨ç”Ÿæˆçš„è¿½è¸ªã€‚&lt;/p&gt;
&lt;p&gt;è¦è·å¾— Grafana å®ä¾‹çš„ç®¡ç†ç”¨æˆ·çš„å¯†ç ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl get secret tobs-grafana -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{.data.admin-password}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; base64 -d 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl port-forward svc/tobs-grafana 3000:80
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œå¯¼èˆªåˆ° http://localhost:3000/d/vBhEewLnkï¼Œä½¿ç”¨ä½ åˆšåˆšæ‰¾å›çš„å¯†ç ï¼Œä»¥ç®¡ç†å‘˜ç”¨æˆ·èº«ä»½ç™»å½•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.timescale.com/promscale/latest/visualize-data/apm-experience/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Promscale åº”ç”¨æ€§èƒ½ç›‘æ§ï¼ˆAPMï¼‰ä»ªè¡¨ç›˜&lt;/a&gt;å°†æ˜¾ç¤ºå‡ºæ¥ï¼Œå‘ä½ å±•ç¤ºå…³äºæ¼”ç¤ºåº”ç”¨çš„æ´å¯ŸåŠ›ã€‚Tobs ç›´æ¥å¯¼å…¥è¿™å¥—å¼€ç®±å³ç”¨ã€å¯ç”¨äºç”Ÿäº§çš„ä»ªè¡¨ç›˜ï¼Œæˆ‘ä»¬åœ¨ Grafana ä¸­ä½¿ç”¨ SQL æŸ¥è¯¢å¯¹è¿½è¸ªæ•°æ®è¿›è¡Œæ„å»ºï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ç”±æ¼”ç¤ºå¾®æœåŠ¡è‡ªåŠ¨ç”Ÿæˆçš„ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†å…¶ä¸­ä¸€ä¸ªä»ªè¡¨ç›˜ â€”â€”â€œæœåŠ¡è¯¦æƒ…â€ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ç”¨æ¼”ç¤ºåº”ç”¨ç¨‹åºçš„è¿½è¸ªæ•°æ®å¡«å……çš„æœåŠ¡ç»†èŠ‚ä»ªè¡¨ç›˜&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ç”¨æ¼”ç¤ºåº”ç”¨ç¨‹åºçš„è¿½è¸ªæ•°æ®å¡«å……çš„&amp;lt;a href=&amp;#34;https://docs.timescale.com/promscale/latest/visualize-data/apm-experience/&amp;#34; target=&amp;#34;_blank&amp;#34; rel=&amp;#34;noopener&amp;#34;&amp;gt;æœåŠ¡ç»†èŠ‚ä»ªè¡¨ç›˜&amp;lt;/a&amp;gt;&#34; srcset=&#34;
               /blog/generate-and-store-opentelemetry-traces-automatically/service-overview_hu7b2370ea432b5684d50aba5f5c723790_152700_e987cee28e5586d3309d943b90593978.webp 400w,
               /blog/generate-and-store-opentelemetry-traces-automatically/service-overview_hu7b2370ea432b5684d50aba5f5c723790_152700_38fa9f225f71344d9cc7cadc07a0349a.webp 760w,
               /blog/generate-and-store-opentelemetry-traces-automatically/service-overview_hu7b2370ea432b5684d50aba5f5c723790_152700_1200x1200_fit_q75_h2_lanczos_3.webp 1200w&#34;
               src=&#34;https://lib.jimmysong.io/blog/generate-and-store-opentelemetry-traces-automatically/service-overview_hu7b2370ea432b5684d50aba5f5c723790_152700_e987cee28e5586d3309d943b90593978.webp&#34;
               width=&#34;760&#34;
               height=&#34;390&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ç”¨æ¼”ç¤ºåº”ç”¨ç¨‹åºçš„è¿½è¸ªæ•°æ®å¡«å……çš„&amp;lt;a href=&amp;#34;https://docs.timescale.com/promscale/latest/visualize-data/apm-experience/&amp;#34; target=&amp;#34;_blank&amp;#34; rel=&amp;#34;noopener&amp;#34;&amp;gt;æœåŠ¡ç»†èŠ‚ä»ªè¡¨ç›˜&amp;lt;/a&amp;gt;
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å…³äºè¿™äº›é¢„å»ºä»ªè¡¨ç›˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·&lt;a href=&#34;https://www.timescale.com/blog/observability-powered-by-sql-understand-your-systems-like-never-before-with-opentelemetry-traces-and-postgresql/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æŸ¥çœ‹è¿™ç¯‡åšæ–‡&lt;/a&gt;ï¼ˆå¯¼èˆªåˆ° â€œé›†æˆåˆ° Grafana çš„ç°ä»£ APM ä½“éªŒâ€ ä¸€èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»å¾—åˆ°äº†æ‰€æœ‰è¿™äº›ä¿¡æ¯ï¼Œè€Œåœ¨ä»»ä½• Python æœåŠ¡ä¸­éƒ½æ²¡æœ‰æµ‹é‡å·¥å…·ä»£ç ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;OpenTelemetry è¿½è¸ªä»æœªåƒç°åœ¨è¿™æ ·æ–¹ä¾¿ã€‚&lt;a href=&#34;https://opentelemetry.io/docs/collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¦‚æœä½ çš„å¾®æœåŠ¡æ˜¯ç”¨ OpenTelemetry Operator ç›®å‰æ”¯æŒçš„è¯­è¨€ä¹‹ä¸€ç¼–å†™çš„&lt;/a&gt;ï¼Œä½ å¯ä»¥ç«‹å³å¼€å§‹æ”¶é›†å’Œå­˜å‚¨è¿½è¸ªæ•°æ®ï¼Œåªéœ€è¦å¾ˆå°‘çš„æ‰‹åŠ¨å·¥ä½œã€‚ä½ åªéœ€é‡‡å–ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/timescale/tobs/blob/master/chart/README.md#install&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é€šè¿‡ Helm åœ¨ä½ çš„ Kubernetes é›†ç¾¤ä¸­å®‰è£… tobs&lt;/a&gt;(è¯·æ³¨æ„ï¼Œä½ å¿…é¡»ä½¿ç”¨ Helm æ¥å®‰è£… tobsï¼Œæ‰èƒ½ä½¿è¿™ä¸ªæœ€æ–°ç‰ˆæœ¬å‘æŒ¥ä½œç”¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ CLI)ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œç»™ä½ æƒ³æ”¶é›†è¿½è¸ªæ•°æ®çš„å¾®æœåŠ¡ pods æ·»åŠ &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-operator#opentelemetry-auto-instrumentation-injection&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ³¨è§£&lt;/a&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;instrumentation.opentelemetry.io/inject-python: &amp;quot;true&amp;quot;&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ çš„å¾®æœåŠ¡å°†è‡ªåŠ¨è¢« OpenTelemetry è¿½è¸ªå™¨æ£€æµ‹ï¼Œä½ çš„è¿½è¸ªå™¨å°†è‡ªåŠ¨å­˜å‚¨åœ¨ Promscale ä¸­ï¼ŒPromscale æ˜¯å»ºç«‹åœ¨ PostgreSQL å’Œ TimescaleDB ä¸Šçš„ç»Ÿä¸€çš„æŒ‡æ ‡å’Œè¿½è¸ªå™¨çš„å¯è§‚æµ‹æ€§åç«¯ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;a href=&#34;https://docs.timescale.com/promscale/latest/visualize-data/apm-experience/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Promscale é¢„å…ˆå»ºç«‹çš„ APM ä»ªè¡¨ç›˜&lt;/a&gt;ï¼Œä½ å°†ç«‹å³äº†è§£åˆ°ä½ çš„ç³»ç»Ÿæ€§èƒ½å¦‚ä½•ï¼Œå¹¶ä¸”ä½ å°†èƒ½å¤Ÿ&lt;a href=&#34;https://www.timescale.com/blog/observability-powered-by-sql-understand-your-systems-like-never-before-with-opentelemetry-traces-and-postgresql/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ SQL æŸ¥è¯¢ä½ çš„è¿½è¸ª&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
