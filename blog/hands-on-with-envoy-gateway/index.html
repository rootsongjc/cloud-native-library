<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="å®‹å‡€è¶…" />

  
  
  
    
  
  <meta name="description" content="æœ€è¿‘ Envoy Gateway 0.2 å‘å¸ƒäº†ï¼ŒAPI ç½‘å…³çš„ç”Ÿæ€ç³»ç»Ÿè¿æ¥äº†æ–°çš„å˜åŒ–ã€‚è¿™ç¯‡æ–‡ç« å°†æƒ³ä½ ä»‹ç» Kubernetes API ç½‘å…³é¢†åŸŸçš„æœ€æ–°è¿›å±•ã€‚" />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/blog/hands-on-with-envoy-gateway/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.b26eb9b802629dccab300faa82cc98c7.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/blog/hands-on-with-envoy-gateway/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="äº‘åŸç”Ÿèµ„æ–™åº“" />
  <meta property="og:url" content="https://lib.jimmysong.io/blog/hands-on-with-envoy-gateway/" />
  <meta property="og:title" content="ä½¿ç”¨ Envoy Gateway 0.2 ä½“éªŒæ–°çš„ Kubernetes Gateway API | äº‘åŸç”Ÿèµ„æ–™åº“" />
  <meta property="og:description" content="æœ€è¿‘ Envoy Gateway 0.2 å‘å¸ƒäº†ï¼ŒAPI ç½‘å…³çš„ç”Ÿæ€ç³»ç»Ÿè¿æ¥äº†æ–°çš„å˜åŒ–ã€‚è¿™ç¯‡æ–‡ç« å°†æƒ³ä½ ä»‹ç» Kubernetes API ç½‘å…³é¢†åŸŸçš„æœ€æ–°è¿›å±•ã€‚" /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2022-10-27T16:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2023-01-29T15:07:30&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lib.jimmysong.io/blog/hands-on-with-envoy-gateway/"
  },
  "headline": "ä½¿ç”¨ Envoy Gateway 0.2 ä½“éªŒæ–°çš„ Kubernetes Gateway API",
  
  "datePublished": "2022-10-27T16:00:00+08:00",
  "dateModified": "2023-01-29T15:07:30Z",
  
  "author": {
    "@type": "Person",
    "name": "Matt Turner"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "äº‘åŸç”Ÿç¤¾åŒº",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lib.jimmysong.io/media/logo.svg"
    }
  },
  "description": "æœ€è¿‘ Envoy Gateway 0.2 å‘å¸ƒäº†ï¼ŒAPI ç½‘å…³çš„ç”Ÿæ€ç³»ç»Ÿè¿æ¥äº†æ–°çš„å˜åŒ–ã€‚è¿™ç¯‡æ–‡ç« å°†æƒ³ä½ ä»‹ç» Kubernetes API ç½‘å…³é¢†åŸŸçš„æœ€æ–°è¿›å±•ã€‚"
}
</script>

  

  

  

  





  <title>ä½¿ç”¨ Envoy Gateway 0.2 ä½“éªŒæ–°çš„ Kubernetes Gateway API | äº‘åŸç”Ÿèµ„æ–™åº“</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="6e3efbb7d3f2314e890bee44b9da9cd7" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>æœç´¢</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="å…³é—­"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="æœç´¢..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="æœç´¢...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="äº‘åŸç”Ÿèµ„æ–™åº“"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="åˆ‡æ¢å¯¼èˆª">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="äº‘åŸç”Ÿèµ„æ–™åº“"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>å›¾ä¹¦</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>æ•™ç¨‹</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/kubernetes-handbook"><span>Kubernetes åŸºç¡€æ•™ç¨‹</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/istio-fundamentals-zh"><span>Istio åŸºç¡€æ•™ç¨‹</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh"><span>Envoy åŸºç¡€æ•™ç¨‹</span></a>
              
            </div>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link  active" href="/blog"><span>è¯‘æ–‡</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#feed"><span>æ›´æ–°</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>æ ‡ç­¾</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>å…³äº</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io" target="_blank" rel="noopener"><span>Jimmy Song</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io/contact/" data-toggle="tooltip" data-placement="bottom" title="è”ç³»" target="_blank" rel="noopener" aria-label="è”ç³»">
                <i class="fab fa-weixin" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/jimmysongio" data-toggle="tooltip" data-placement="bottom" title="å…³æ³¨" target="_blank" rel="noopener" aria-label="å…³æ³¨">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        <li class="nav-item">
            <a class="nav-link" href="https://jimmysong.io" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="ä¸»ç«™" aria-label="ä¸»ç«™"><i class="fas fa-home" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="æœç´¢" aria-label="æœç´¢"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item d-none d-lg-inline-flex">
            <a class="nav-link" href="https://github.com/rootsongjc/cloud-native-library/" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="æŸ¥çœ‹æºç " aria-label="æŸ¥çœ‹æºç " aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <div class="container-xl">
    <div class="post-container">
        












  

  
  
  
<div class="article-container pt-3">
  <h1>ä½¿ç”¨ Envoy Gateway 0.2 ä½“éªŒæ–°çš„ Kubernetes Gateway API</h1>

  

  
    


<div class="article-metadata">

  <div>
  
  
  
  
    <i class="fa-solid fa-feather"></i>
    

  <span >
      <a href="/author/matt-turner/">Matt Turner</a></span>
    
    <span class="middot-divider"></span>
    
  
  
  
  
  
  
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/gateway/" class="text-capitalize">Gateway</a></span>
  
  </div>

  
  <span class="article-date">
    
    
      
          
          å‘å¸ƒäº
      
    
    2022-10-27
  </span>
  

  

  
  <span class="middot-divider"></span>
  å­—æ•° 2165
  <span class="middot-divider"></span>
  <span class="article-reading-time">
      é˜…è¯»æ—¶é•¿ 10 åˆ†é’Ÿ
  </span>
  

  
  
  
  

</div>

    




<div class="btn-links mb-2">
  
  








  


















  
  
  
  
  
  
  
    
  
  <a class="btn btn-outline-primary btn-page-header" href="https://tetrate.io/blog/hands-on-with-the-gateway-api-using-envoy-gateway-0-2/" target="_blank" rel="noopener">
    <i class="fa fa-globe mr-1"></i>åŸæ–‡</a>


</div>


  
</div>


    </div>
    <div class="border-bottom mb-2"></div>
    <div class="row flex-xl-nowrap">
        <div class="col-3 d-none d-xl-block docs-toc">
            <!-- toc -->
            
<div class="">
    <ul class="nav toc-top">
        <li>
            <a href="#" id="back_to_top" class="docs-toc-title">ç›®å½•</a>
        </li>
    </ul>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#åˆ›å»º-kubernetes-é›†ç¾¤">åˆ›å»º Kubernetes é›†ç¾¤</a></li>
    <li><a href="#å®‰è£…-envoy-gateway">å®‰è£… Envoy Gateway</a></li>
    <li><a href="#å®‰è£…æµ‹è¯•åº”ç”¨">å®‰è£…æµ‹è¯•åº”ç”¨</a></li>
    <li><a href="#é…ç½®-envoy-gateway">é…ç½® Envoy Gateway</a></li>
    <li><a href="#å¯åŠ¨æµ‹è¯•æµé‡">å¯åŠ¨æµ‹è¯•æµé‡</a></li>
    <li><a href="#ç¤ºä¾‹-gui">ç¤ºä¾‹ GUI</a></li>
  </ul>
</nav>
</div>

            <!-- /toc -->
            
            <div class="subscribe-module col-12 mt-1">
    <img src="/img/wechat.webp" alt="image" title="Jimmy Songçš„å¾®ä¿¡å…¬ä¼—å·"/>
    <p class="text-center pt-1">å…³æ³¨ã€Œå‡ ç±³å®‹ã€å¾®ä¿¡å…¬ä¼—å·ï¼Œè·å–æœ¬ç«™æ›´æ–°</p>
    
    
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4029167986768912"
     crossorigin="anonymous"></script>
     <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4029167986768912"
       data-ad-slot="6856371908"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
    <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
    
</div>

            
        </div>
        <main class="article-body col-9 container docs-content" role="main">
            <article class="article">
                <div class="article-style">
                    
                    <details class="toc-inpage d-print-none d-show-block mb-0">
  <summary class="font-weight-bold">ç‚¹å‡»æŸ¥çœ‹ç›®å½•</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#åˆ›å»º-kubernetes-é›†ç¾¤">åˆ›å»º Kubernetes é›†ç¾¤</a></li>
    <li><a href="#å®‰è£…-envoy-gateway">å®‰è£… Envoy Gateway</a></li>
    <li><a href="#å®‰è£…æµ‹è¯•åº”ç”¨">å®‰è£…æµ‹è¯•åº”ç”¨</a></li>
    <li><a href="#é…ç½®-envoy-gateway">é…ç½® Envoy Gateway</a></li>
    <li><a href="#å¯åŠ¨æµ‹è¯•æµé‡">å¯åŠ¨æµ‹è¯•æµé‡</a></li>
    <li><a href="#ç¤ºä¾‹-gui">ç¤ºä¾‹ GUI</a></li>
  </ul>
</nav>
</details>

                    
                    <p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†äº²èº«ä½“éªŒ <a href="https://github.com/envoyproxy/gateway" target="_blank" rel="noopener">Envoy Gateway</a> å’Œ <a href="https://gateway-api.sigs.k8s.io/" target="_blank" rel="noopener">Gateway API</a>ã€‚ä»¥ä¸‹æ˜¯é€æ­¥æŒ‡å¯¼ä½ å®‰è£… Envoy Gateway çš„è¯´æ˜ï¼Œä»¥åŠé€šè¿‡ Envoy ä»£ç†åœ¨é›†ç¾¤å¤–å…¬å¼€ HTTP åº”ç”¨ç¨‹åºçš„ç®€å•ç”¨ä¾‹ã€‚</p>
<p>å¦‚æœä½ ä¸æ–¹ä¾¿è¿è¡Œï¼Œæˆ‘åœ¨æœ¬æ–‡ä¸­åŒ…å«äº†æ¯ä¸ªå‘½ä»¤çš„è¾“å‡ºï¼Œå³ä½¿ä½ æ²¡æœ‰ Kubernetes é›†ç¾¤ä¹Ÿå¯ä»¥çœ‹åˆ°å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p>å¦‚æœä½ æ˜¯ GUI çš„ç²‰ä¸ï¼Œåœ¨æ–‡ç« çš„æœ€åæˆ‘ä¼šé™„ä¸Š Tetrate åŸºäº <a href="https://backstage.io/" target="_blank" rel="noopener">Backstage</a> çš„æ¦‚å¿µéªŒè¯ <a href="https://github.com/tetratelabs/eg-backstage-demo" target="_blank" rel="noopener">Envoy Gateway GUI</a> çš„å±å¹•æˆªå›¾å’Œè¯¦ç»†ä¿¡æ¯ï¼Œä»¥å±•ç¤ºé’ˆå¯¹ Gateway API æ„å»ºæ­¤ç±»ä¸œè¥¿æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚</p>
<h2 id="åˆ›å»º-kubernetes-é›†ç¾¤">åˆ›å»º Kubernetes é›†ç¾¤</h2>
<p>é¦–å…ˆè¿è¡Œ Envoy Gateway å’Œ Kubernetes é›†ç¾¤ã€‚æœ€ç®€å•ã€æœ€å®‰å…¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener">minikube</a> åœ¨æœ¬åœ°æœºå™¨ä¸Šå¯åŠ¨é›†ç¾¤ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ minikube start â€“driver<span class="o">=</span>docker --cpus<span class="o">=</span><span class="m">2</span> --memory<span class="o">=</span>2g
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ğŸ˜„  minikube v1.27.0 on Arch 22.0.0 <span class="o">(</span>x86_64<span class="o">)</span>
</span></span><span class="line"><span class="cl">	â–ª <span class="nv">KUBECONFIG</span><span class="o">=</span>...
</span></span><span class="line"><span class="cl">â—  For more information, see: https://github.com/kubernetes/kubernetes/issues/112135
</span></span><span class="line"><span class="cl">ğŸ“Œ  Using Docker Desktop driver with root privileges
</span></span><span class="line"><span class="cl">ğŸ‘  Starting control plane node minikube in cluster minikube
</span></span><span class="line"><span class="cl">ğŸšœ  Pulling base image ...
</span></span><span class="line"><span class="cl">ğŸ”¥  Creating docker container <span class="o">(</span><span class="nv">CPUs</span><span class="o">=</span>2, <span class="nv">Memory</span><span class="o">=</span>2048MB<span class="o">)</span> ...
</span></span><span class="line"><span class="cl">ğŸ³  Preparing Kubernetes v1.25.2 on Docker 20.10.17 ...
</span></span><span class="line"><span class="cl">	â–ª Generating certificates and keys ...
</span></span><span class="line"><span class="cl">	â–ª Booting up control plane ...
</span></span><span class="line"><span class="cl">	â–ª Configuring RBAC rules ...
</span></span><span class="line"><span class="cl">ğŸ”  Verifying Kubernetes components...
</span></span><span class="line"><span class="cl">	â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
</span></span><span class="line"><span class="cl">ğŸŒŸ  Enabled addons: storage-provisioner
</span></span><span class="line"><span class="cl">ğŸ„  Done! kubectl is now configured to use <span class="s2">&#34;minikube&#34;</span> cluster and <span class="s2">&#34;default&#34;</span> namespace by default
</span></span></code></pre></div><h2 id="å®‰è£…-envoy-gateway">å®‰è£… Envoy Gateway</h2>
<p>å›æƒ³ä¸€ä¸‹ï¼ŒEnvoy Gateway æ˜¯ç”±æ–°çš„ Gateway API é…ç½®çš„ï¼Œè€Œä¸æ˜¯æ—§çš„ Ingress APIã€‚Gateway API å°šæœªåˆå¹¶åˆ°ä¸Šæ¸¸ Kubernetesï¼Œå› æ­¤æˆ‘ä»¬çš„é›†ç¾¤å°†æ— æ³•ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬é€šè¿‡ä¸ºå…¶éƒ¨ç½² CRD æ¥å®‰è£…è¯¥ APIã€‚Envoy Gateway é¡¹ç›®æä¾›äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨äºå®‰è£… Gateway API å’Œéƒ¨ç½² Envoy Gatewayã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl apply -f https://github.com/envoyproxy/gateway/releases/download/v0.2.0/install.yaml
</span></span></code></pre></div><p>è¿™ä¼šäº§ç”Ÿå¤§é‡èµ„æºï¼Œæˆ‘å°†åˆ†å‡ ä¸ªéƒ¨åˆ†ä¸­è®¨è®ºå®ƒä»¬ã€‚é¦–å…ˆæ˜¯ Gateway APIï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/gatewayclasses.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/gateways.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/httproutes.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/referencegrants.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/referencepolicies.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/tcproutes.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/tlsroutes.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">customresourcedefinition.apiextensions.k8s.io/udproutes.gateway.networking.k8s.io created
</span></span><span class="line"><span class="cl">namespace/gateway-system created
</span></span><span class="line"><span class="cl">validatingwebhookconfiguration.admissionregistration.k8s.io/gateway-api-admission created
</span></span><span class="line"><span class="cl">service/gateway-api-admission-server created
</span></span><span class="line"><span class="cl">deployment.apps/gateway-api-admission-server created
</span></span><span class="line"><span class="cl">serviceaccount/gateway-api-admission created
</span></span><span class="line"><span class="cl">clusterrole.rbac.authorization.k8s.io/gateway-api-admission created
</span></span><span class="line"><span class="cl">clusterrolebinding.rbac.authorization.k8s.io/gateway-api-admission created
</span></span><span class="line"><span class="cl">role.rbac.authorization.k8s.io/gateway-api-admission created
</span></span><span class="line"><span class="cl">rolebinding.rbac.authorization.k8s.io/gateway-api-admission created
</span></span><span class="line"><span class="cl">job.batch/gateway-api-admission created
</span></span><span class="line"><span class="cl">job.batch/gateway-api-admission-patch created
</span></span></code></pre></div><p>å¦‚ä½ æ‰€è§ï¼Œä¸»è¦æ˜¯ CRDã€‚ä½†è¯·æ³¨æ„ï¼Œå®‰è£… Gateway API è¿˜éƒ¨ç½²äº†ä¸€äº›å·¥ä½œè´Ÿè½½èµ„æºï¼ŒåŒ…æ‹¬ Deployment ç­‰ â€”â€”Gateway API å¸¦æœ‰ä¸€ä¸ª webhook å‡†å…¥æ§åˆ¶å™¨æ¥éªŒè¯æˆ‘ä»¬éƒ¨ç½²çš„èµ„æºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl get pods --namespace gateway-system
</span></span><span class="line"><span class="cl">NAME                                        	READY   STATUS  	RESTARTS   AGE
</span></span><span class="line"><span class="cl">gateway-api-admission-2dhk5                 	0/1 	Completed   <span class="m">0</span>      	70s
</span></span><span class="line"><span class="cl">gateway-api-admission-patch-dbdbc           	0/1 	Completed   <span class="m">1</span>      	70s
</span></span><span class="line"><span class="cl">gateway-api-admission-server-68485ffc97-gt8v4   1/1 	Running 	<span class="m">0</span>      	70s
</span></span></code></pre></div><p>æ·»åŠ åˆ°é›†ç¾¤ API ä¸­çš„æ–° CRDï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl api-resources <span class="p">|</span> grep gateway.networking
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gatewayclasses                	gc       	gateway.networking.k8s.io/v1beta1  	<span class="nb">false</span>    	GatewayClass
</span></span><span class="line"><span class="cl">gateways                      	gtw      	gateway.networking.k8s.io/v1beta1  	<span class="nb">true</span>     	Gateway
</span></span><span class="line"><span class="cl">httproutes                                 	gateway.networking.k8s.io/v1beta1  	<span class="nb">true</span>     	HTTPRoute
</span></span><span class="line"><span class="cl">referencegrants               	refgrant 	gateway.networking.k8s.io/v1alpha2 	<span class="nb">true</span>     	ReferenceGrant
</span></span><span class="line"><span class="cl">referencepolicies             	refpol   	gateway.networking.k8s.io/v1alpha2 	<span class="nb">true</span>     	ReferencePolicy
</span></span><span class="line"><span class="cl">tcproutes                                  	gateway.networking.k8s.io/v1alpha2 	<span class="nb">true</span>     	TCPRoute
</span></span><span class="line"><span class="cl">tlsroutes                                  	gateway.networking.k8s.io/v1alpha2 	<span class="nb">true</span>     	TLSRoute
</span></span><span class="line"><span class="cl">udproutes                                  	gateway.networking.k8s.io/v1alpha2 	<span class="nb">true</span>     	UDPRoute
</span></span></code></pre></div><p>ä¸‹é¢æ˜¯ Envoy Gateway æœ¬èº«ã€‚</p>
<pre tabindex="0"><code>namespace/envoy-gateway-system created
customresourcedefinition.apiextensions.k8s.io/envoyproxies.config.gateway.envoyproxy.io created
serviceaccount/envoy-gateway created
role.rbac.authorization.k8s.io/leader-election-role created
clusterrole.rbac.authorization.k8s.io/envoy-gateway-role created
clusterrole.rbac.authorization.k8s.io/metrics-reader created
clusterrole.rbac.authorization.k8s.io/proxy-role created
rolebinding.rbac.authorization.k8s.io/leader-election-rolebinding created
clusterrolebinding.rbac.authorization.k8s.io/envoy-gateway-rolebinding created
clusterrolebinding.rbac.authorization.k8s.io/proxy-rolebinding created
configmap/envoy-gateway-config created
service/envoy-gateway created
service/envoy-gateway-metrics-service created
deployment.apps/envoy-gateway created
</code></pre><p>è¿™äº›æ˜¯å·¥ä½œè´Ÿè½½èµ„æºä»¥åŠç›¸å…³çš„å®‰å…¨å’Œç½‘ç»œã€‚ç‰‡åˆ»ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ­£åœ¨è¿è¡Œçš„æ§åˆ¶å™¨ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl get pods --namespace envoy-gateway-system
</span></span><span class="line"><span class="cl">NAME                        	READY   STATUS	RESTARTS   AGE
</span></span><span class="line"><span class="cl">envoy-gateway-dc74c4d97-pntbj   2/2 	Running   <span class="m">0</span>      	35s
</span></span></code></pre></div><h2 id="å®‰è£…æµ‹è¯•åº”ç”¨">å®‰è£…æµ‹è¯•åº”ç”¨</h2>
<p>æˆ‘ä»¬è¿˜éœ€è¦ä¸€äº›ä¸œè¥¿è®©ç½‘å…³çœŸæ­£å°†æµé‡è½¬å‘åˆ° â€”â€” å°±åƒæˆ‘ä»¬çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸€æ ·çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ httpbinï¼ŒEnvoy Gateway é¡¹ç›®æä¾›äº†æ–¹ä¾¿çš„æ¸…å•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/master/samples/httpbin/httpbin.yaml
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">serviceaccount/httpbin created
</span></span><span class="line"><span class="cl">service/httpbin created
</span></span><span class="line"><span class="cl">deployment.apps/httpbin created
</span></span></code></pre></div><p>è¿™å°†åœ¨é»˜è®¤å‘½åç©ºé—´ä¸­è¿è¡Œï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl get pods -n default
</span></span><span class="line"><span class="cl">NAME                    	READY   STATUS	RESTARTS   AGE
</span></span><span class="line"><span class="cl">httpbin-9dbd644c7-fhtw5 	1/1 	Running   <span class="m">0</span>      	4m16s
</span></span></code></pre></div><h2 id="é…ç½®-envoy-gateway">é…ç½® Envoy Gateway</h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç»§ç»­é…ç½® Envoy Gateway ä»¥æ‰§è¡Œä¸€äº›è¯·æ±‚è·¯ç”±ã€‚æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æ³¨å†Œæˆ‘ä»¬åˆšåˆšéƒ¨ç½²çš„ Envoy Gateway æ§åˆ¶å™¨ï¼Œä»¥ä¾¿å…¶ä»–èµ„æºå¯ä»¥å¼•ç”¨å®ƒæ¥è¯†åˆ«é…ç½®çš„ç½‘å…³ï¼Œä»¥é˜²ä½ åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­éƒ¨ç½²å¤šä¸ªç½‘å…³ã€‚ <code>controllerName</code> å­—æ®µåŒ¹é…æ§åˆ¶å™¨å‘å…¶è¿è¡Œçš„ Kubernetes é›†ç¾¤æ³¨å†Œçš„å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl apply -f - <span class="s">&lt;&lt;EOF
</span></span></span><span class="line"><span class="cl"><span class="s">apiVersion: gateway.networking.k8s.io/v1beta1
</span></span></span><span class="line"><span class="cl"><span class="s">kind: GatewayClass
</span></span></span><span class="line"><span class="cl"><span class="s">metadata:
</span></span></span><span class="line"><span class="cl"><span class="s">  name: my-envoy-gateway
</span></span></span><span class="line"><span class="cl"><span class="s">spec:
</span></span></span><span class="line"><span class="cl"><span class="s">  controllerName: gateway.envoyproxy.io/gatewayclass-controller
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gatewayclass.gateway.networking.k8s.io/eg created
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…³äºè¿™ä¸ªæ–°å®ä¾‹çš„ä¸€äº›æœ‰é™ä¿¡æ¯ï¼Œå‡è®¾æˆ‘ä»¬çš„æè¿°æ˜¯æœ‰æ•ˆçš„ï¼Œæˆ‘ä»¬å°†çœ‹åˆ° <code>ACCEPTED: True</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl get gatewayclass -o wide
</span></span><span class="line"><span class="cl">NAME   CONTROLLER                                  	ACCEPTED   AGE 	DESCRIPTION
</span></span><span class="line"><span class="cl">eg 	gateway.envoyproxy.io/gatewayclass-controller   True   	2m38s  
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é…ç½®ä¸€ä¸ª Gateway å¯¹è±¡ â€”â€” è¿™å°†æ‰“å¼€æˆ‘ä»¬å¸Œæœ› Envoy ä»£ç†ç›‘å¬çš„ç½‘ç»œç«¯å£ã€‚å¯¹äºè¿™ä¸ªç®€å•çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å°†ç»‘å®šåˆ°ä¸€ä¸ªç«¯å£è€Œä¸ä½¿ç”¨ TLSï¼Œå› æ­¤æˆ‘å°†å…¶ç§°ä¸º â€œä¸å®‰å…¨ç«¯å£â€ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl apply -f - <span class="s">&lt;&lt;EOF
</span></span></span><span class="line"><span class="cl"><span class="s">apiVersion: gateway.networking.k8s.io/v1beta1
</span></span></span><span class="line"><span class="cl"><span class="s">kind: Gateway
</span></span></span><span class="line"><span class="cl"><span class="s">metadata:
</span></span></span><span class="line"><span class="cl"><span class="s">  name: insecure-port
</span></span></span><span class="line"><span class="cl"><span class="s">spec:
</span></span></span><span class="line"><span class="cl"><span class="s">  gatewayClassName: my-envoy-gateway
</span></span></span><span class="line"><span class="cl"><span class="s">  listeners:
</span></span></span><span class="line"><span class="cl"><span class="s">    - name: http
</span></span></span><span class="line"><span class="cl"><span class="s">      protocol: HTTP
</span></span></span><span class="line"><span class="cl"><span class="s">      port: 8080
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>å½“æˆ‘ä»¬æ£€æŸ¥å®ƒæ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒå¹¶æ²¡æœ‰å°±ç»ªã€‚ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æœ¬åœ°å¼€å‘é›†ç¾¤æ— æ³•ä½¿è¿™ç§äº‘è´Ÿè½½å‡è¡¡å™¨æˆä¸º â€œçœŸæ­£çš„â€ è´Ÿè½½å‡è¡¡å™¨ï¼ˆå› æ­¤åœ°å€å­—æ®µä¹Ÿæ˜¯ç©ºçš„ï¼‰ï¼Œå› æ­¤è¯¥æ‰¹å‡†è¢«æç½®ã€‚ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªï¼Œå®ƒä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl -n default get gateway -o wide
</span></span><span class="line"><span class="cl">NAME        	CLASS             ADDRESS   READY   AGE
</span></span><span class="line"><span class="cl">insecure-port   my-envoy-gateway                     2m54s
</span></span></code></pre></div><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸€äº› HTTP æµé‡è®¾ç½®è·¯ç”±ã€‚åœ¨è¿™ä¸ªç®€å•çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åŒ¹é…ä»»ä½•è·¯å¾„ä¸Šå¯¹ vhost <code>www.example.com</code> çš„ä»»ä½•è¯·æ±‚ï¼Œå¹¶å°†å…¶å‘é€åˆ°æˆ‘ä»¬ä¹‹å‰éƒ¨ç½²çš„ httpbin å®ä¾‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl apply -f - <span class="s">&lt;&lt;EOF
</span></span></span><span class="line"><span class="cl"><span class="s">apiVersion: gateway.networking.k8s.io/v1beta1
</span></span></span><span class="line"><span class="cl"><span class="s">kind: HTTPRoute
</span></span></span><span class="line"><span class="cl"><span class="s">metadata:
</span></span></span><span class="line"><span class="cl"><span class="s">  name: httpbin
</span></span></span><span class="line"><span class="cl"><span class="s">spec:
</span></span></span><span class="line"><span class="cl"><span class="s">  parentRefs: [ {name: insecure-port} ]
</span></span></span><span class="line"><span class="cl"><span class="s">  hostnames: [&#34;www.example.com&#34;]
</span></span></span><span class="line"><span class="cl"><span class="s">  rules:
</span></span></span><span class="line"><span class="cl"><span class="s">    - matches:
</span></span></span><span class="line"><span class="cl"><span class="s">        - path: {type: PathPrefix, value: /}
</span></span></span><span class="line"><span class="cl"><span class="s">      backendRefs:
</span></span></span><span class="line"><span class="cl"><span class="s">        - {group: &#34;&#34;, kind: Service, name: httpbin, port: 8000, weight: 1}
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">httproute.gateway.networking.k8s.io/httpbin created
</span></span></code></pre></div><p>æ£€æŸ¥è¿™ç§èµ„æºç›®å‰å¹¶æ²¡æœ‰å‘æˆ‘ä»¬å±•ç¤ºå¤ªå¤šä¸œè¥¿ï¼Œä½†æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒè‡³å°‘å·²éƒ¨ç½²æˆåŠŸã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl get httproute -n default -o wide
</span></span><span class="line"><span class="cl">NAME   	HOSTNAMES         	AGE
</span></span><span class="line"><span class="cl">httpbin	<span class="o">[</span><span class="s2">&#34;www.example.com&#34;</span><span class="o">]</span>   58s
</span></span></code></pre></div><p>æœ€åè¦æ³¨æ„çš„ä¸€ä»¶äº‹æ˜¯ï¼Œç›´åˆ°ç°åœ¨æ‰çœŸæ­£å¯åŠ¨äº† Envoy çš„å®ä¾‹ï¼ˆä¹‹å‰å®ƒåªæ˜¯æ§åˆ¶å™¨ï¼Œå®ƒæœ¬èº«å¹¶ä¸å¤„ç†æµé‡ï¼‰ã€‚è¿™æ˜¯ä»£è¡¨ Envoy Gateway çš„ä¼˜åŒ–ï¼šä»£ç†çš„æ‡’åˆ›å»ºã€‚æ£€æŸ¥ç³»ç»Ÿä¸Šçš„ <code>age</code> å­—æ®µï¼Œçœ‹çœ‹å®ƒçš„åˆ›å»ºæ—¶é—´ã€‚</p>
<pre tabindex="0"><code>$ kubectl get pods -n envoy-gateway-system
NAME                        	READY   STATUS	RESTARTS   AGE
envoy-default-insecure-port-5879556bd4-r5ggw   	1/1 	Running   0      	90s
envoy-gateway-dc74c4d97-pntbj   2/2 	Running   0      	13m
</code></pre><h2 id="å¯åŠ¨æµ‹è¯•æµé‡">å¯åŠ¨æµ‹è¯•æµé‡</h2>
<p>å°±åƒæˆ‘ä¹‹å‰è¯´çš„ï¼Œæˆ‘ä»¬æ— æ³•è·å¾—çœŸæ­£çš„äº‘è´Ÿè½½å‡è¡¡å™¨ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æœ¬åœ°å¼€å‘é›†ç¾¤ã€‚ä½†æ˜¯ minikube æœ‰ä¸€ä¸ªç®€æ´çš„ç‰¹æ€§ï¼Œå®ƒå°†é›†ç¾¤çš„æœåŠ¡æš´éœ²ç»™æˆ‘ä»¬çš„æœ¬åœ°æœºå™¨ â€”â€” åŒ…æ‹¬ Envoy Gateway å¯åŠ¨çš„ä»£ç†ã€‚æˆ‘ä»¬æ‰“å¼€çš„ 8080 ç«¯å£å°†åœ¨å›ç¯ä¸­å¯ç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ minikube tunnel
</span></span></code></pre></div><p>è¯¥å‘½ä»¤ä¼šé˜»å¡ï¼Œå› æ­¤æ ¹æ®æˆ‘ä»¬éƒ¨ç½²çš„è§„åˆ™ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ä»¥å‘é€å°†è¢«è·¯ç”±åˆ° httpbin çš„è¯·æ±‚ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl --header <span class="s2">&#34;Host: www.example.com&#34;</span> 127.0.0.1:8080/headers
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">HTTP/1.1 <span class="m">200</span> OK
</span></span><span class="line"><span class="cl">server: envoy
</span></span><span class="line"><span class="cl">date: Fri, <span class="m">07</span> Oct <span class="m">2022</span> 12:41:32 GMT
</span></span><span class="line"><span class="cl">content-type: application/json
</span></span><span class="line"><span class="cl">content-length: <span class="m">175</span>
</span></span><span class="line"><span class="cl">access-control-allow-origin: *
</span></span><span class="line"><span class="cl">access-control-allow-credentials: <span class="nb">true</span>
</span></span><span class="line"><span class="cl">x-envoy-upstream-service-time: <span class="m">14</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="s2">&#34;headers&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">    	<span class="s2">&#34;Accept&#34;</span>: <span class="s2">&#34;application/json, */*&#34;</span>,
</span></span><span class="line"><span class="cl">    	<span class="s2">&#34;Host&#34;</span>: <span class="s2">&#34;www.example.com&#34;</span>,
</span></span><span class="line"><span class="cl">    	<span class="s2">&#34;User-Agent&#34;</span>: <span class="s2">&#34;curl/7.79.1&#34;</span>,
</span></span><span class="line"><span class="cl">    	<span class="s2">&#34;X-Envoy-Expected-Rq-Timeout-Ms&#34;</span>: <span class="s2">&#34;15000&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„æ¼”ç¤ºï¼Œä½†ä½ å¯ä»¥æ¢ç´¢ Gateway API çš„å…¶ä½™éƒ¨åˆ†å¹¶å¼€å§‹ä½¿ç”¨æ›´å¤šåŠŸèƒ½ â€”â€”Envoy Gateway çš„æ–‡æ¡£å°†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŒ‡å—ã€‚</p>
<h2 id="ç¤ºä¾‹-gui">ç¤ºä¾‹ GUI</h2>
<p>æˆ‘ç»™å‡ºçš„è¯´æ˜æ˜¯é’ˆå¯¹å‘½ä»¤è¡Œçš„ï¼Œä½†æ˜¯å¥½çš„ GUI æ˜¯ä¸ä»»ä½•ç³»ç»Ÿäº¤äº’çš„å¥½æ–¹æ³•ã€‚Envoy Gateway å¯¹æ ‡å‡† Gateway API çš„å®æ–½æä¾›äº†äº¤äº’æ“ä½œæ¥å£ç”Ÿæ€ç³»ç»Ÿã€‚Tetrate ä½¿ç”¨ <a href="https://backstage.io/" target="_blank" rel="noopener">Backstage</a>ï¼ˆå¼€å‘è€…æ¥å£çš„æ–°å…´æ ‡å‡†ï¼‰ä¸º Envoy Gateway æ„å»ºäº†ä¸€ä¸ªæ¦‚å¿µéªŒè¯ UIã€‚ä¸‹é¢æˆ‘å°†å±•ç¤ºå‡ ä¸ªä»ä¸Šé¢æ£€æŸ¥æ¼”ç¤ºè®¾ç½®çš„å±å¹•æˆªå›¾ã€‚</p>
<p>å¦‚æœä½ æƒ³ç©è¿™ä¸ªï¼Œæˆ–è€…forkå®ƒï¼Œ<a href="https://github.com/tetratelabs/eg-backstage-demo" target="_blank" rel="noopener">æˆ‘ä»¬å·²ç»å‘å¸ƒäº†ä»£ç </a>â€”â€” ç›®å‰è¿˜æ˜¯ alpha ç‰ˆæœ¬ï¼Œå¹¶ä¸”åªæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä¸€å‘¨å†…æ„å»ºçš„ç¤ºä¾‹ï¼å¦‚æœä½ åœ¨ KubeCon Detroitï¼Œè¯·åˆ°æˆ‘ä»¬çš„å±•ä½ï¼Œæˆ‘ä»¬å¯ä»¥äº²è‡ªå‘ä½ å±•ç¤ºï¼</p>
<p>















<figure  id="figure-ui-for-envoy-gateway">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img alt="UI for Envoy Gateway" srcset="
               /blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx53ycsgj30wi0p5ab7_hu689b07b397da5e05e9f1b674f65414e1_51052_9a196803d3b23504cc8650ee9527f7c8.webp 400w,
               /blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx53ycsgj30wi0p5ab7_hu689b07b397da5e05e9f1b674f65414e1_51052_fd90718fd137327924214ed018002b27.webp 760w,
               /blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx53ycsgj30wi0p5ab7_hu689b07b397da5e05e9f1b674f65414e1_51052_1200x1200_fit_q75_h2_lanczos.webp 1200w"
               src="/blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx53ycsgj30wi0p5ab7_hu689b07b397da5e05e9f1b674f65414e1_51052_9a196803d3b23504cc8650ee9527f7c8.webp"
               width="760"
               height="588"
               loading="lazy" data-zoomable /></div>
  </div><figcaption>
      UI for Envoy Gateway
    </figcaption></figure>
</p>
<p>















<figure  id="figure-backstage-ç•Œé¢">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img alt="Backstage ç•Œé¢" srcset="
               /blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx54gkz4j30wi0p5wg9_hueb9d88ccfd6f67d8609221003ea0eda6_71957_ab2cfc6e4ca0d867e96968f32f2c131a.webp 400w,
               /blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx54gkz4j30wi0p5wg9_hueb9d88ccfd6f67d8609221003ea0eda6_71957_8e698775b6b232c5f13516ae26a83f51.webp 760w,
               /blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx54gkz4j30wi0p5wg9_hueb9d88ccfd6f67d8609221003ea0eda6_71957_1200x1200_fit_q75_h2_lanczos.webp 1200w"
               src="/blog/hands-on-with-envoy-gateway/008vxvgGgy1h7jx54gkz4j30wi0p5wg9_hueb9d88ccfd6f67d8609221003ea0eda6_71957_ab2cfc6e4ca0d867e96968f32f2c131a.webp"
               width="760"
               height="588"
               loading="lazy" data-zoomable /></div>
  </div><figcaption>
      Backstage ç•Œé¢
    </figcaption></figure>
</p>
<p>å¦‚æœä½ æ­£åœ¨å¼€å§‹ä½¿ç”¨ Istio å’Œ Envoyï¼Œè¯·<a href="https://academy.tetrate.io/" target="_blank" rel="noopener">æŸ¥çœ‹ Tetrate å­¦é™¢</a>ï¼Œä½ ä¼šå‘ç°å¤§é‡çš„å…è´¹è¯¾ç¨‹ã€ç ”è®¨ä¼šï¼Œä»¥åŠ Tetrate çš„ Istio ç®¡ç†å‘˜è®¤è¯è€ƒè¯•ã€‚</p>
<p>è¦æƒ³ä»¥æœ€ç®€å•çš„æ–¹å¼å®‰è£…ã€ç®¡ç†å’Œå‡çº§ Istioï¼Œè¯·æŸ¥çœ‹<a href="https://istio.tetratelabs.io/" target="_blank" rel="noopener">æˆ‘ä»¬çš„å¼€æº Tetrate Istio å‘è¡Œç‰ˆï¼ˆTIDï¼‰</a>ã€‚TID æ˜¯ä¸€ä¸ªç»è¿‡å®¡æŸ¥çš„ Istio çš„ä¸Šæ¸¸å‘è¡Œç‰ˆ â€”â€”Istio çš„åŠ å›ºé•œåƒï¼Œå…·æœ‰æŒç»­çš„æ”¯æŒï¼Œæ›´å®¹æ˜“å®‰è£…ã€ç®¡ç†å’Œå‡çº§ã€‚</p>

                </div>
                

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/envoy/">Envoy</a>
  
  <a class="badge badge-light" href="/tag/api-gateway/">API Gateway</a>
  
  <a class="badge badge-light" href="/tag/envoy-gateway/">Envoy Gateway</a>
  
  <a class="badge badge-light" href="/tag/gateway/">Gateway</a>
  
</div>











  
  
    




  





<div class="article-widget">
  
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1" href="/blog/top-3-mtls-best-practices-for-zero-trust-kubernetes-security/" rel="next">
    <div class="meta-nav">ä¸‹ä¸€é¡µ</div>
    <p>é›¶ä¿¡ä»» Kubernetes å®‰å…¨çš„ä¸‰å¤§ mTLS æœ€ä½³å®è·µ</p></a>
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/blog/envoy-gateway-to-the-future/" rel="prev">
    <div class="meta-nav">ä¸Šä¸€é¡µ</div>
    <p>é¢å‘æœªæ¥çš„ç½‘å…³ï¼šæ–°çš„ Kubernetes Gateway API å’Œ Envoy Gateway 0.2 ä»‹ç»</p></a>
  
</div>

</div>










  

<p class="edit-page">
  <a href="https://github.com/rootsongjc/cloud-native-library//edit/master/content/blog/hands-on-with-envoy-gateway/index.md">
    <i class="fas fa-pen pr-2"></i>ç¼–è¾‘æœ¬é¡µ
  </a>
</p>




  
  
  <div class="article-widget content-widget-hr">
    <p class="related-title">ç›¸å…³æ¨è</p>
    <ul>
      
      <li><a href="/blog/envoy-gateway-to-the-future/">é¢å‘æœªæ¥çš„ç½‘å…³ï¼šæ–°çš„ Kubernetes Gateway API å’Œ Envoy Gateway 0.2 ä»‹ç»</a></li>
      
      <li><a href="/blog/designing-traffic-flow-via-tier1-and-tier2-ingress-gateways/">é€šè¿‡ä¸¤çº§ç½‘å…³è®¾è®¡æ¥è·¯ç”±æœåŠ¡ç½‘æ ¼æµé‡</a></li>
      
      <li><a href="/envoy-handbook/">Envoy åŸºç¡€æ•™ç¨‹</a></li>
      
      <li><a href="/blog/the-gateway-to-a-new-frontier/">Envoy API Gatewayâ€”â€”æ¨åŠ¨ç½‘å…³çš„è¿›ä¸€æ­¥å‘å±•</a></li>
      
      <li><a href="/blog/introducing-envoy-gateway/">å¼€æºé¡¹ç›® Envoy Gateway ç®€ä»‹</a></li>
      
    </ul>
  </div>
  





  
  
  

  

  
  <section id="comments" class="mb-3 pt-0">
    <script>
  let themeNumber = localStorage.getItem('wcTheme');
  var giscusTheme = "light";
  if (themeNumber == 1){
    giscusTheme = "dark";
  }
  console.log(giscusTheme)
  let giscusAttributes = {
    "src": "https://giscus.app/client.js",
    "data-theme": giscusTheme,
    "data-repo":"rootsongjc/cloud-native-library",
    "data-repo-id":"MDEwOlJlcG9zaXRvcnkyMTQ2MjY2NDg=",
    "data-category":"Announcements",
    "data-category-id":"DIC_kwDODMrxWM4CPL7J",
    "data-mapping":"pathname",
    "data-reactions-enabled":"1",
    "data-emit-metadata":"0",
    "data-input-position":"top",
    "data-theme":giscusTheme,
    "data-lang":"zh-CN",
    "data-loading":"lazy",
    "crossorigin":"anonymous",
    "origins":"https://jimmysong.io",
    "originsRegex":"http://localhost:[0-9]+",
    "async": "",
  };

  let giscusScript = document.createElement("script");
  Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
  document.querySelector('#comments').appendChild(giscusScript);
</script>

  </section>
  



            </article>
        </main>
    </div>
</div>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">Â© 2017-2023 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.46271ef31da3f018e9cd1b59300aa265.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.24983018b0e5661cd5fe1822254286ea.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">å¼•ç”¨</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> å¤åˆ¶
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> ä¸‹è½½
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>
<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, 'å·²å¤åˆ¶')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
