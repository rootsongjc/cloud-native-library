<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Argo Rollouts ä¸­æ–‡æ–‡æ¡£ | äº‘åŸç”Ÿèµ„æ–™åº“</title>
    <link>https://lib.jimmysong.io/argo-rollouts/</link>
      <atom:link href="https://lib.jimmysong.io/argo-rollouts/index.xml" rel="self" type="application/rss+xml" />
    <description>Argo Rollouts ä¸­æ–‡æ–‡æ¡£</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><lastBuildDate>Wed, 21 Jun 2023 16:20:00 +0800</lastBuildDate>
    <image>
      <url>https://lib.jimmysong.io/media/sharing.png</url>
      <title>Argo Rollouts ä¸­æ–‡æ–‡æ¡£</title>
      <link>https://lib.jimmysong.io/argo-rollouts/</link>
    </image>
    
    <item>
      <title>Argo Rollouts ç®€ä»‹</title>
      <link>https://lib.jimmysong.io/argo-rollouts/overview/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/overview/</guid>
      <description>&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-argo-rollouts&#34;&gt;ä»€ä¹ˆæ˜¯ Argo Rolloutsï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Argo Rollouts æ˜¯ä¸€ç»„ &lt;a href=&#34;https://kubernetes.io/docs/concepts/architecture/controller/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes æ§åˆ¶å™¨&lt;/a&gt;å’Œ&lt;a href=&#34;https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è‡ªå®šä¹‰èµ„æºï¼ˆCRDï¼‰&lt;/a&gt;ï¼Œä¸º Kubernetes æä¾›é«˜çº§éƒ¨ç½²åŠŸèƒ½ï¼Œä¾‹å¦‚è“ç»¿ã€é‡‘ä¸é›€ã€é‡‘ä¸é›€åˆ†æã€å®éªŒå’Œæ¸è¿›å¼äº¤ä»˜ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;Argo Rollouts å¯é€‰åœ°ä¸ &lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/ingress/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ingress æ§åˆ¶å™¨&lt;/a&gt;å’ŒæœåŠ¡ç½‘æ ¼é›†æˆï¼Œåˆ©ç”¨å®ƒä»¬çš„æµé‡æ•´å½¢èƒ½åŠ›åœ¨æ›´æ–°æœŸé—´é€æ¸å°†æµé‡è½¬ç§»åˆ°æ–°ç‰ˆæœ¬ã€‚æ­¤å¤–ï¼ŒRollouts å¯ä»¥æŸ¥è¯¢å’Œè§£é‡Šæ¥è‡ªå„ç§æä¾›å•†çš„åº¦é‡æ ‡å‡†ï¼Œä»¥éªŒè¯å…³é”® KPI å¹¶åœ¨æ›´æ–°æœŸé—´é©±åŠ¨è‡ªåŠ¨å‡çº§æˆ–å›æ»šã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºè§†é¢‘ï¼ˆç‚¹å‡»åœ¨ Youtube ä¸Šè§‚çœ‹ï¼‰ï¼š&lt;/p&gt;

&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/hIL0E2gLkf8&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©-argo-rollouts&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹© Argo Rolloutsï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Kubernetes Deployment å¯¹è±¡æ”¯æŒæ»šåŠ¨æ›´æ–°ç­–ç•¥ï¼Œè¯¥ç­–ç•¥æä¾›äº†ä¸€ç»„åŸºæœ¬çš„å®‰å…¨æ€§ä¿è¯ï¼ˆå°±ç»ªæ¢é’ˆï¼‰æ¥ä¿è¯æ›´æ–°æœŸé—´çš„å®‰å…¨æ€§ã€‚ä½†æ˜¯ï¼Œæ»šåŠ¨æ›´æ–°ç­–ç•¥é¢ä¸´è®¸å¤šé™åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹æ»šåŠ¨æ›´æ–°é€Ÿåº¦çš„æ§åˆ¶å¾ˆå°‘&lt;/li&gt;
&lt;li&gt;æ— æ³•æ§åˆ¶æµé‡æµå‘æ–°ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;å°±ç»ªæ¢é’ˆä¸é€‚ç”¨äºæ›´æ·±å…¥çš„ã€å‹åŠ›æˆ–ä¸€æ¬¡æ€§æ£€æŸ¥&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰æŸ¥è¯¢å¤–éƒ¨åº¦é‡æ ‡å‡†ä»¥éªŒè¯æ›´æ–°çš„èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;å¯ä»¥åœæ­¢è¿›ç¨‹ï¼Œä½†æ— æ³•è‡ªåŠ¨ä¸­æ­¢å¹¶å›æ»šæ›´æ–°&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨å¤§å‹é«˜å®¹é‡ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ»šåŠ¨æ›´æ–°å¾€å¾€è¢«è®¤ä¸ºæ˜¯è¿‡äºå†’é™©çš„æ›´æ–°è¿‡ç¨‹ï¼Œå› ä¸ºå®ƒæ— æ³•æ§åˆ¶çˆ†ç‚¸åŠå¾„ï¼Œå¯èƒ½è¿‡äºæ¿€è¿›åœ°è¿›è¡Œæ»šåŠ¨æ›´æ–°ï¼Œå¹¶ä¸”åœ¨å‘ç”Ÿæ•…éšœæ—¶æ— æ³•æä¾›è‡ªåŠ¨å›æ»šã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ§åˆ¶å™¨ç‰¹ç‚¹&#34;&gt;æ§åˆ¶å™¨ç‰¹ç‚¹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;è“ç»¿æ›´æ–°ç­–ç•¥&lt;/li&gt;
&lt;li&gt;é‡‘ä¸é›€æ›´æ–°ç­–ç•¥&lt;/li&gt;
&lt;li&gt;ç²¾ç»†ã€åŠ æƒçš„æµé‡è½¬ç§»&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨å›æ»šå’Œå‡çº§&lt;/li&gt;
&lt;li&gt;æ‰‹åŠ¨åˆ¤æ–­&lt;/li&gt;
&lt;li&gt;å¯è‡ªå®šä¹‰çš„åº¦é‡æ ‡å‡†æŸ¥è¯¢å’Œä¸šåŠ¡ KPI åˆ†æ&lt;/li&gt;
&lt;li&gt;Ingress æ§åˆ¶å™¨é›†æˆï¼šNGINXã€ALBã€Apache APISIX&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç½‘æ ¼é›†æˆï¼šIstioã€Linkerdã€SMI&lt;/li&gt;
&lt;li&gt;åŒæ—¶ä½¿ç”¨å¤šä¸ªæä¾›ç¨‹åºï¼šSMI + NGINXã€Istio + ALB ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;åº¦é‡æä¾›ç¨‹åºé›†æˆï¼šPrometheusã€Wavefrontã€Kayentaã€Webã€Kubernetes Jobsã€Datadogã€New Relicã€Graphiteã€InfluxDB&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¿«é€Ÿå¼€å§‹&#34;&gt;å¿«é€Ÿå¼€å§‹&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create namespace argo-rollouts
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -n argo-rollouts -f &amp;lt;https://github.com/argoproj/argo-rollouts/releases/latest/download/install.yaml&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æŒ‰ç…§å®Œæ•´çš„ &lt;a href=&#34;getting-started/&#34;&gt;å…¥é—¨æŒ‡å—&lt;/a&gt;ï¼Œæ¼”ç¤ºåˆ›å»ºå¹¶æ›´æ–°ä¸€ä¸ªæ»šåŠ¨å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„&#34;&gt;å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ä¸ &lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/deployment/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Deployment å¯¹è±¡&lt;/a&gt; ç±»ä¼¼ï¼ŒArgo Rollouts æ§åˆ¶å™¨å°†ç®¡ç† &lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ReplicaSet&lt;/a&gt; çš„åˆ›å»ºã€æ‰©å±•å’Œåˆ é™¤ã€‚è¿™äº› ReplicaSet æ˜¯ç”± Rollout èµ„æºä¸­çš„ &lt;code&gt;spec.template&lt;/code&gt; å­—æ®µå®šä¹‰çš„ï¼Œè¯¥å­—æ®µä½¿ç”¨ä¸ Deployment å¯¹è±¡ç›¸åŒçš„ pod æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ›´æ”¹ &lt;code&gt;spec.template&lt;/code&gt; æ—¶ï¼Œè¿™è¡¨æ˜ Argo Rollouts æ§åˆ¶å™¨å°†å¼•å…¥ä¸€ä¸ªæ–°çš„ ReplicaSetã€‚è¯¥æ§åˆ¶å™¨å°†ä½¿ç”¨ &lt;code&gt;spec.strategy&lt;/code&gt; å­—æ®µä¸­è®¾ç½®çš„ç­–ç•¥æ¥ç¡®å®šå¦‚ä½•ä»æ—§ ReplicaSet è¿›è¡Œæ»šåŠ¨æ›´æ–°åˆ°æ–° ReplicaSetã€‚ä¸€æ—¦æ–° ReplicaSet ç¼©æ”¾ï¼ˆå¹¶å¯é€‰åœ°é€šè¿‡ &lt;a href=&#34;https://argoproj.github.io/argo-rollouts/features/analysis/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Analysis&lt;/a&gt;ï¼‰ï¼Œæ§åˆ¶å™¨å°†å°†å…¶æ ‡è®°ä¸ºâ€œç¨³å®šâ€ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨ä»ç¨³å®šçš„ ReplicaSet åˆ°æ–°çš„ ReplicaSet çš„è½¬æ¢è¿‡ç¨‹ä¸­ &lt;code&gt;spec.template&lt;/code&gt; å‘ç”Ÿå…¶ä»–æ›´æ”¹ï¼ˆå³ï¼Œåœ¨æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ä¸­æ›´æ”¹åº”ç”¨ç¨‹åºç‰ˆæœ¬ï¼‰ï¼Œåˆ™å…ˆå‰çš„æ–° ReplicaSet å°†è¢«ç¼©å°ï¼Œæ§åˆ¶å™¨å°†å°è¯•æ¨è¿›åæ˜ æ›´æ–°çš„ &lt;code&gt;spec.template&lt;/code&gt; å­—æ®µçš„ ReplicasSetã€‚æœ‰å…³æ¯ä¸ªç­–ç•¥è¡Œä¸ºçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ &lt;a href=&#34;https://argoproj.github.io/argo-rollouts/features/specification/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;spec&lt;/a&gt; éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;argo-rollouts-çš„ç”¨ä¾‹&#34;&gt;Argo Rollouts çš„ç”¨ä¾‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·æƒ³åœ¨å¼€å§‹ä¸ºç”Ÿäº§æµé‡æœåŠ¡ä¹‹å‰å¯¹æ–°ç‰ˆæœ¬è¿›è¡Œæœ€åä¸€åˆ†é’Ÿçš„åŠŸèƒ½æµ‹è¯•ã€‚ä½¿ç”¨ BlueGreen ç­–ç•¥ï¼ŒArgo Rollouts å…è®¸ç”¨æˆ·æŒ‡å®šé¢„è§ˆæœåŠ¡å’Œæ´»åŠ¨æœåŠ¡ã€‚Rollout å°†é…ç½®é¢„è§ˆæœåŠ¡ä»¥å°†æµé‡å‘é€åˆ°æ–°ç‰ˆæœ¬ï¼Œè€Œæ´»åŠ¨æœåŠ¡ä»å°†æ¥æ”¶ç”Ÿäº§æµé‡ã€‚ä¸€æ—¦ç”¨æˆ·æ»¡æ„ï¼Œä»–ä»¬å¯ä»¥å°†é¢„è§ˆæœåŠ¡å‡çº§ä¸ºæ–°çš„æ´»åŠ¨æœåŠ¡ã€‚(&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/examples/rollout-bluegreen.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤ºä¾‹&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;åœ¨æ–°ç‰ˆæœ¬å¼€å§‹æ¥æ”¶å®æ—¶æµé‡ä¹‹å‰ï¼Œéœ€è¦æ‰§è¡Œä¸€ç»„é€šç”¨æ­¥éª¤ã€‚ä½¿ç”¨ BlueGreen ç­–ç•¥ï¼Œç”¨æˆ·å¯ä»¥å¯åŠ¨æ–°ç‰ˆæœ¬ï¼Œè€Œä¸ä¼šä»æ´»åŠ¨æœåŠ¡æ¥æ”¶æµé‡ã€‚ä¸€æ—¦è¿™äº›æ­¥éª¤å®Œæˆæ‰§è¡Œï¼ŒRollout å¯ä»¥å°†æµé‡åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·å¸Œæœ›å°†ç”Ÿäº§æµé‡çš„ä¸€å°éƒ¨åˆ†åˆ†é…ç»™ä»–ä»¬çš„åº”ç”¨ç¨‹åºçš„æ–°ç‰ˆæœ¬ï¼ŒæŒç»­å‡ ä¸ªå°æ—¶ã€‚ä¹‹åï¼Œä»–ä»¬æƒ³è¦ç¼©å°æ–°ç‰ˆæœ¬å¹¶æŸ¥çœ‹ä¸€äº›æŒ‡æ ‡ï¼Œä»¥ç¡®å®šæ–°ç‰ˆæœ¬ä¸æ—§ç‰ˆæœ¬ç›¸æ¯”æ˜¯å¦æ€§èƒ½è‰¯å¥½ã€‚ç„¶åï¼Œä»–ä»¬å°†å†³å®šæ˜¯å¦è¦å°†æ–°ç‰ˆæœ¬æ»šåŠ¨åˆ°æ‰€æœ‰ç”Ÿäº§æµé‡æˆ–åšæŒä½¿ç”¨å½“å‰ç‰ˆæœ¬ã€‚ä½¿ç”¨é‡‘ä¸é›€ç­–ç•¥ï¼ŒRollout å¯ä»¥å°†æ–°ç‰ˆæœ¬çš„ ReplicaSet æ‰©å±•åˆ°æ¥æ”¶æŒ‡å®šç™¾åˆ†æ¯”çš„æµé‡ï¼Œç­‰å¾…æŒ‡å®šæ—¶é—´åå°†ç™¾åˆ†æ¯”è®¾ç½®å› 0ï¼Œç„¶åç­‰å¾…æ»¡æ„åå†æ»šåŠ¨åˆ°æœåŠ¡æ‰€æœ‰æµé‡ã€‚(&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/examples/rollout-analysis-step.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤ºä¾‹&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·å¸Œæœ›æ…¢æ…¢å°†æ–°ç‰ˆæœ¬çš„ç”Ÿäº§æµé‡å¢åŠ ã€‚ä»–ä»¬é¦–å…ˆç»™å®ƒä¸€å°éƒ¨åˆ†å®æ—¶æµé‡ï¼Œå¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç„¶åå†ç»™æ–°ç‰ˆæœ¬æ›´å¤šçš„æµé‡ã€‚æœ€ç»ˆï¼Œæ–°ç‰ˆæœ¬å°†æ¥æ”¶æ‰€æœ‰ç”Ÿäº§æµé‡ã€‚ä½¿ç”¨é‡‘ä¸é›€ç­–ç•¥ï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šä»–ä»¬å¸Œæœ›æ–°ç‰ˆæœ¬æ¥æ”¶çš„ç™¾åˆ†æ¯”ä»¥åŠç™¾åˆ†æ¯”ä¹‹é—´çš„ç­‰å¾…æ—¶é—´ã€‚(&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/examples/rollout-canary.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤ºä¾‹&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·å¸Œæœ›ä½¿ç”¨ Deployment çš„å¸¸è§„æ»šåŠ¨æ›´æ–°ç­–ç•¥ã€‚å¦‚æœç”¨æˆ·ä½¿ç”¨é‡‘ä¸é›€ç­–ç•¥ä¸”æ²¡æœ‰æ­¥éª¤ï¼Œåˆ™ Rollout å°†ä½¿ç”¨æœ€å¤§æµ®åŠ¨å’Œæœ€å¤§ä¸å¯ç”¨å€¼è¿›è¡Œæ»šåŠ¨åˆ°æ–°ç‰ˆæœ¬ã€‚(&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/examples/rollout-rolling-update.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤ºä¾‹&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç¤ºä¾‹&#34;&gt;ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹æ›´å¤š Rollouts ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/tree/master/examples&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤ºä¾‹ç›®å½•&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/argoproj/rollouts-demo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Argo Rollouts æ¼”ç¤ºåº”ç”¨ç¨‹åº&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>å®‰è£… Argo Rollouts</title>
      <link>https://lib.jimmysong.io/argo-rollouts/installation/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/installation/</guid>
      <description>&lt;h2 id=&#34;æ§åˆ¶å™¨å®‰è£…&#34;&gt;æ§åˆ¶å™¨å®‰è£…&lt;/h2&gt;
&lt;p&gt;ä¸¤ç§å®‰è£…æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/manifests/install.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;install.yaml&lt;/a&gt; - æ ‡å‡†å®‰è£…æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create namespace argo-rollouts
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -n argo-rollouts -f &amp;lt;https://github.com/argoproj/argo-rollouts/releases/latest/download/install.yaml&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ &lt;code&gt;argo-rollouts&lt;/code&gt;ï¼Œåœ¨å…¶ä¸­è¿è¡Œ Argo Rollouts æ§åˆ¶å™¨ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”” æç¤ºï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯å…¶ä»–å‘½åç©ºé—´åç§°ï¼Œè¯·æ›´æ–° &lt;code&gt;install.yaml&lt;/code&gt; ç¾¤é›†è§’è‰²ç»‘å®šçš„æœåŠ¡å¸æˆ·å‘½åç©ºé—´åç§°ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”” æç¤ºï¼šåœ¨ Kubernetes v1.14 æˆ–æ›´ä½ç‰ˆæœ¬ä¸Šå®‰è£… Argo Rollouts æ—¶ï¼ŒCRD æ¸…å•å¿…é¡»ä½¿ç”¨ &lt;code&gt;--validate = false&lt;/code&gt; é€‰é¡¹è¿›è¡Œ &lt;code&gt;kubectl apply&lt;/code&gt;ã€‚è¿™æ˜¯ç”±äºåœ¨ v1.15 ä¸­å¼•å…¥çš„æ–° CRD å­—æ®µçš„ä½¿ç”¨ï¼Œåœ¨è¾ƒä½çš„ API æœåŠ¡å™¨ä¸­é»˜è®¤è¢«æ‹’ç»ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”” æç¤ºï¼šåœ¨ GKE ä¸Šï¼Œä½ éœ€è¦æˆäºˆä½ çš„å¸æˆ·åˆ›å»ºæ–°é›†ç¾¤è§’è‰²çš„æƒé™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create clusterrolebinding YOURNAME-cluster-admin-binding --clusterrole&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-admin --user&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;YOUREMAIL@gmail.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/manifests/namespace-install.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;namespace-install.yaml&lt;/a&gt; - å®‰è£… Argo Rolloutsï¼Œä»…éœ€è¦å‘½åç©ºé—´çº§åˆ«çš„ç‰¹æƒã€‚ä½¿ç”¨æ­¤å®‰è£…æ–¹æ³•çš„ç¤ºä¾‹ç”¨é€”æ˜¯åœ¨åŒä¸€é›†ç¾¤ä¸Šçš„ä¸åŒå‘½åç©ºé—´ä¸­è¿è¡Œå¤šä¸ª Argo Rollouts æ§åˆ¶å™¨å®ä¾‹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šArgo Rollouts CRD æœªåŒ…å«åœ¨ &lt;code&gt;namespace-install.yaml&lt;/code&gt; ä¸­ã€‚å¿…é¡»å•ç‹¬å®‰è£… CRD æ¸…å•ã€‚CRD æ¸…å•ä½äº &lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/manifests/crds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;manifests/crds&lt;/a&gt; ç›®å½•ä¸­ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…å®ƒä»¬ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -k https://github.com/argoproj/argo-rollouts/manifests/crds&lt;span class=&#34;se&#34;&gt;\?&lt;/span&gt;ref&lt;span class=&#34;se&#34;&gt;\=&lt;/span&gt;stable
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨ &lt;a href=&#34;https://quay.io/repository/argoproj/argo-rollouts?tab=tags&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Quay.io&lt;/a&gt; æ‰¾åˆ°æ§åˆ¶å™¨çš„å‘å¸ƒå®¹å™¨é•œåƒã€‚è¿˜æœ‰æ—§ç‰ˆæœ¬åœ¨ Dockerhub ä¸Šï¼Œä½†ç”±äºå¼•å…¥äº†é€Ÿç‡é™åˆ¶ï¼ŒArgo é¡¹ç›®å·²ç»è½¬ç§»åˆ°äº† Quayã€‚&lt;/p&gt;
&lt;h2 id=&#34;kubectl-æ’ä»¶å®‰è£…&#34;&gt;Kubectl æ’ä»¶å®‰è£…&lt;/h2&gt;
&lt;p&gt;kubectl æ’ä»¶æ˜¯å¯é€‰çš„ï¼Œä½†æ–¹ä¾¿ä»å‘½ä»¤è¡Œç®¡ç†å’Œå¯è§†åŒ–å‡çº§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;brew&#34;&gt;Brew&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;brew install argoproj/tap/kubectl-argo-rollouts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ‰‹åŠ¨&#34;&gt;æ‰‹åŠ¨&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ curl å®‰è£… &lt;a href=&#34;https://github.com/argoproj/argo-rollouts/releases&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Argo Rollouts Kubectl æ’ä»¶&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -LO &amp;lt;https://github.com/argoproj/argo-rollouts/releases/latest/download/kubectl-argo-rollouts-darwin-amd64&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ğŸ”” æç¤ºï¼šå¯¹äº Linux å‘è¡Œç‰ˆï¼Œè¯·å°† &lt;code&gt;darwin&lt;/code&gt; æ›¿æ¢ä¸º &lt;code&gt;linux&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°† &lt;code&gt;kubectl-argo-rollouts&lt;/code&gt; äºŒè¿›åˆ¶æ–‡ä»¶è®¾ç½®ä¸ºå¯æ‰§è¡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chmod +x ./kubectl-argo-rollouts-darwin-amd64
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†äºŒè¿›åˆ¶æ–‡ä»¶ç§»åŠ¨åˆ°ä½ çš„ PATH ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo mv ./kubectl-argo-rollouts-darwin-amd64 /usr/local/bin/kubectl-argo-rollouts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æµ‹è¯•ä»¥ç¡®ä¿ä½ å®‰è£…çš„ç‰ˆæœ¬æ˜¯æœ€æ–°çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl argo rollouts version
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;shell-è‡ªåŠ¨å®Œæˆ&#34;&gt;Shell è‡ªåŠ¨å®Œæˆ&lt;/h2&gt;
&lt;p&gt;CLI å¯ä»¥ä¸ºå¤šä¸ª shell å¯¼å‡º shell å®Œæˆä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº bashï¼Œè¯·ç¡®ä¿å®‰è£…å¹¶å¯ç”¨ bash å®Œæˆã€‚è¦åœ¨å½“å‰ shell ä¸­è®¿é—®å®Œæˆï¼Œè¯·è¿è¡Œ &lt;code&gt;source &amp;lt;(kubectl-argo-rollouts completion bash)&lt;/code&gt;ã€‚æˆ–è€…ï¼Œå°†å…¶å†™å…¥æ–‡ä»¶å¹¶åœ¨&lt;code&gt;.bash_profile&lt;/code&gt; ä¸­è¿›è¡Œ sourceã€‚&lt;/p&gt;
&lt;p&gt;å®Œæˆå‘½ä»¤æ”¯æŒ bashã€zshã€fish å’Œ powershellã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§&lt;a href=&#34;notion://www.notion.so/jimmysong/notion%ef%bc%9a//www.notion.so/jimmysong/generated/kubectl-argo-rollouts/kubectl-argo-rollouts_completion.md&#34;&gt;å®Œæˆå‘½ä»¤æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-docker-cli&#34;&gt;ä½¿ç”¨ Docker CLI&lt;/h2&gt;
&lt;p&gt;CLI ä¹Ÿå¯ä»¥ä½œä¸ºå®¹å™¨é•œåƒåœ¨ &lt;a href=&#34;https://quay.io/repository/argoproj/kubectl-argo-rollouts&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://quay.io/repository/argoproj/kubectl-argo-rollouts&lt;/a&gt; ä¸­æä¾›ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åƒä»»ä½•å…¶ä»– Docker é•œåƒä¸€æ ·è¿è¡Œå®ƒï¼Œæˆ–åœ¨æ”¯æŒ Docker é•œåƒçš„ä»»ä½• CI å¹³å°ä¸­ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;docker run quay.io/argoproj/kubectl-argo-rollouts:master version
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ”¯æŒçš„ç‰ˆæœ¬&#34;&gt;æ”¯æŒçš„ç‰ˆæœ¬&lt;/h2&gt;
&lt;p&gt;åœ¨ä»»ä½•æ—¶å€™ï¼ŒArgo Rollouts çš„å®˜æ–¹æ”¯æŒç‰ˆæœ¬æ˜¯æœ€æ–°å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œåœ¨ Kubernetes ç‰ˆæœ¬ N å’Œ N-1ï¼ˆç”± Kubernetes é¡¹ç›®æœ¬èº«æ”¯æŒï¼‰ä¸Šæ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå¦‚æœ Argo Rollouts çš„æœ€æ–°æ¬¡è¦ç‰ˆæœ¬æ˜¯ 1.2.1 å¹¶æ”¯æŒ Kubernetes ç‰ˆæœ¬ä¸º 1.24ã€1.23 å’Œ 1.22ï¼Œåˆ™æ”¯æŒä»¥ä¸‹ç»„åˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Kubernetes 1.24 ä¸Šçš„ Argo Rollouts 1.2.1&lt;/li&gt;
&lt;li&gt;åœ¨ Kubernetes 1.23 ä¸Šçš„ Argo Rollouts 1.2.1&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‡çº§-argo-rollouts&#34;&gt;å‡çº§ Argo Rollouts&lt;/h2&gt;
&lt;p&gt;Argo Rollouts æ˜¯ä¸€ä¸ªä¸æŒæœ‰ä»»ä½•å¤–éƒ¨çŠ¶æ€çš„ Kubernetes æ§åˆ¶å™¨ã€‚åªæœ‰åœ¨å®é™…å‘ç”Ÿéƒ¨ç½²æ—¶ï¼Œå®ƒæ‰æ˜¯æ´»åŠ¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¦å‡çº§ Argo Rolloutsï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°è¯•æ‰¾åˆ°æ²¡æœ‰éƒ¨ç½²å‘ç”Ÿçš„æ—¶é—´æ®µï¼›&lt;/li&gt;
&lt;li&gt;åˆ é™¤æ§åˆ¶å™¨çš„å…ˆå‰ç‰ˆæœ¬å¹¶åº”ç”¨ / å®‰è£…æ–°ç‰ˆæœ¬ï¼›&lt;/li&gt;
&lt;li&gt;å‘ç”Ÿæ–°çš„ Rollout æ—¶ï¼Œæ–°æ§åˆ¶å™¨å°†è¢«æ¿€æ´»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœä½ åœ¨å‡çº§æ§åˆ¶å™¨æ—¶è¿›è¡Œéƒ¨ç½²ï¼Œåˆ™ä¸åº”æœ‰ä»»ä½•åœæœºæ—¶é—´ã€‚å½“å‰çš„ Rollouts å°†è¢«æš‚åœï¼Œä¸€æ—¦æ–°æ§åˆ¶å™¨å˜ä¸ºæ´»åŠ¨çŠ¶æ€ï¼Œå®ƒå°†æ¢å¤æ‰€æœ‰æ­£åœ¨è¿›è¡Œçš„éƒ¨ç½²ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æ¦‚å¿µ</title>
      <link>https://lib.jimmysong.io/argo-rollouts/concepts/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/concepts/</guid>
      <description>&lt;h2 id=&#34;rollout&#34;&gt;Rollout&lt;/h2&gt;
&lt;p&gt;Rollout æ˜¯ Kubernetes å·¥ä½œè´Ÿè½½èµ„æºï¼Œç›¸å½“äº Kubernetes Deployment å¯¹è±¡ã€‚å®ƒæ—¨åœ¨åœ¨éœ€è¦æ›´é«˜çº§çš„éƒ¨ç½²æˆ–æ¸è¿›å¼äº¤ä»˜åŠŸèƒ½çš„åœºæ™¯ä¸­æ›¿æ¢ Deployment å¯¹è±¡ã€‚Rollout æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼Œè€Œ Kubernetes Deployment æ— æ³•æä¾›ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è“ç»¿éƒ¨ç½²&lt;/li&gt;
&lt;li&gt;é‡‘ä¸é›€éƒ¨ç½²&lt;/li&gt;
&lt;li&gt;ä¸å…¥å£æ§åˆ¶å™¨å’ŒæœåŠ¡ç½‘æ ¼é›†æˆï¼Œç”¨äºé«˜çº§æµé‡è·¯ç”±&lt;/li&gt;
&lt;li&gt;ä¸åº¦é‡æä¾›ç¨‹åºé›†æˆï¼Œç”¨äºè“ç»¿å’Œé‡‘ä¸é›€åˆ†æ&lt;/li&gt;
&lt;li&gt;åŸºäºæˆåŠŸæˆ–å¤±è´¥çš„åº¦é‡è‡ªåŠ¨å‡çº§æˆ–å›æ»š&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¸è¿›å¼äº¤ä»˜&#34;&gt;æ¸è¿›å¼äº¤ä»˜&lt;/h2&gt;
&lt;p&gt;æ¸è¿›å¼äº¤ä»˜æ˜¯ä»¥å—æ§å’Œé€æ­¥çš„æ–¹å¼å‘å¸ƒäº§å“æ›´æ–°çš„è¿‡ç¨‹ï¼Œä»è€Œé™ä½å‘å¸ƒçš„é£é™©ï¼Œé€šå¸¸é€šè¿‡è€¦åˆè‡ªåŠ¨åŒ–å’Œåº¦é‡åˆ†ææ¥é©±åŠ¨æ›´æ–°çš„è‡ªåŠ¨å‡çº§æˆ–å›æ»šã€‚&lt;/p&gt;
&lt;p&gt;æ¸è¿›å¼äº¤ä»˜é€šå¸¸è¢«æè¿°ä¸ºæŒç»­äº¤ä»˜çš„æ¼”è¿›ï¼Œå°† CI/CD ä¸­å®ç°çš„é€Ÿåº¦ä¼˜åŠ¿æ‰©å±•åˆ°éƒ¨ç½²è¿‡ç¨‹ä¸­ã€‚è¿™æ˜¯é€šè¿‡å°†æ–°ç‰ˆæœ¬çš„æ›å…‰é™åˆ¶ä¸ºå­é›†ç”¨æˆ·ï¼Œå¹¶è§‚å¯Ÿå’Œåˆ†æå…¶æ­£ç¡®è¡Œä¸ºï¼Œç„¶åé€æ­¥å¢åŠ æ›å…‰èŒƒå›´ä»¥æ¶µç›–æ›´å¹¿æ³›çš„å—ä¼—å¹¶æŒç»­éªŒè¯æ­£ç¡®æ€§æ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²ç­–ç•¥&#34;&gt;éƒ¨ç½²ç­–ç•¥&lt;/h2&gt;
&lt;p&gt;è™½ç„¶è¡Œä¸šå·²ç»ä½¿ç”¨ä¸€è‡´çš„æœ¯è¯­æ¥æè¿°å„ç§éƒ¨ç½²ç­–ç•¥ï¼Œä½†è¿™äº›ç­–ç•¥çš„å®ç°åœ¨å„ç§å·¥å…·ä¹‹é—´å­˜åœ¨å·®å¼‚ã€‚ä¸ºäº†æ¸…æ¥šåœ°äº†è§£ Argo Rollouts çš„è¡Œä¸ºï¼Œä»¥ä¸‹æ˜¯ Argo Rollouts æä¾›çš„å„ç§éƒ¨ç½²ç­–ç•¥å®ç°çš„æè¿°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ»šåŠ¨æ›´æ–°rolling-update&#34;&gt;æ»šåŠ¨æ›´æ–°ï¼ˆRolling Updateï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;RollingUpdate&lt;/code&gt; é€æ­¥ç”¨æ–°ç‰ˆæœ¬æ›¿æ¢æ—§ç‰ˆæœ¬ã€‚éšç€æ–°ç‰ˆæœ¬çš„å¯åŠ¨ï¼Œæ—§ç‰ˆæœ¬ä¼šç¼©å°ä»¥ç»´æŠ¤åº”ç”¨ç¨‹åºçš„æ€»æ•°ã€‚è¿™æ˜¯ Deployment å¯¹è±¡çš„é»˜è®¤ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é‡å»ºrecreate&#34;&gt;é‡å»ºï¼ˆRecreateï¼‰&lt;/h3&gt;
&lt;p&gt;é‡å»ºéƒ¨ç½²åœ¨å¯åŠ¨æ–°ç‰ˆæœ¬ä¹‹å‰åˆ é™¤åº”ç”¨ç¨‹åºçš„æ—§ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œè¿™ç¡®ä¿äº†ä¸¤ä¸ªç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºæ°¸è¿œä¸ä¼šåŒæ—¶è¿è¡Œï¼Œä½†åœ¨éƒ¨ç½²æœŸé—´ä¼šæœ‰åœæœºæ—¶é—´ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è“ç»¿blue-green&#34;&gt;è“ç»¿ï¼ˆBlue-Greenï¼‰&lt;/h3&gt;
&lt;p&gt;è“ç»¿éƒ¨ç½²ï¼ˆæœ‰æ—¶ç§°ä¸ºçº¢é»‘ï¼‰åŒæ—¶éƒ¨ç½²æ–°æ—§ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºã€‚åœ¨æ­¤æœŸé—´ï¼Œåªæœ‰æ—§ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºå°†æ¥æ”¶ç”Ÿäº§æµé‡ã€‚è¿™ä½¿å¼€å‘äººå‘˜å¯ä»¥åœ¨å°†å®æ—¶æµé‡åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬ä¹‹å‰å¯¹æ–°ç‰ˆæœ¬è¿è¡Œæµ‹è¯•ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-è“ç»¿éƒ¨ç½²ç¤ºæ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;../images/blue-green-deployments.png&#34; alt=&#34;è“ç»¿éƒ¨ç½²ç¤ºæ„å›¾&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      è“ç»¿éƒ¨ç½²ç¤ºæ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;é‡‘ä¸é›€canary&#34;&gt;é‡‘ä¸é›€ï¼ˆCanaryï¼‰&lt;/h3&gt;
&lt;p&gt;é‡‘ä¸é›€éƒ¨ç½²å°†ä¸€éƒ¨åˆ†ç”¨æˆ·æš´éœ²ç»™åº”ç”¨ç¨‹åºçš„æ–°ç‰ˆæœ¬ï¼ŒåŒæ—¶ä¸ºå…¶ä½™æµé‡æä¾›æ—§ç‰ˆæœ¬ã€‚ä¸€æ—¦éªŒè¯äº†æ–°ç‰ˆæœ¬çš„æ­£ç¡®æ€§ï¼Œæ–°ç‰ˆæœ¬å°±å¯ä»¥é€æ¸æ›¿æ¢æ—§ç‰ˆæœ¬ã€‚å…¥å£æ§åˆ¶å™¨å’ŒæœåŠ¡ç½‘æ ¼ï¼ˆå¦‚ NGINX å’Œ Istioï¼‰å¯å®ç°æ¯”æœ¬åœ°æä¾›çš„æ›´å¤æ‚çš„é‡‘ä¸é›€æµé‡æ•´å½¢æ¨¡å¼ï¼ˆä¾‹å¦‚å®ç°éå¸¸ç»†ç²’åº¦çš„æµé‡åˆ†å‰²æˆ–åŸºäº HTTP å¤´åˆ†å‰²ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-é‡‘ä¸é›€éƒ¨ç½²ç¤ºæ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;../images/canary-deployments.png&#34; alt=&#34;é‡‘ä¸é›€éƒ¨ç½²ç¤ºæ„å›¾&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      é‡‘ä¸é›€éƒ¨ç½²ç¤ºæ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾æ˜¾ç¤ºäº†å…·æœ‰ä¸¤ä¸ªé˜¶æ®µï¼ˆ10ï¼…å’Œ 33ï¼…çš„æµé‡æµå‘æ–°ç‰ˆæœ¬ï¼‰çš„é‡‘ä¸é›€ï¼Œä½†è¿™ä»…æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚ä½¿ç”¨ Argo Rolloutsï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„ç”¨ä¾‹å®šä¹‰ç¡®åˆ‡æ•°é‡çš„é˜¶æ®µå’Œæµé‡ç™¾åˆ†æ¯”ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æ¶æ„</title>
      <link>https://lib.jimmysong.io/argo-rollouts/architecture/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/architecture/</guid>
      <description>&lt;p&gt;è¿™é‡Œæ˜¯ Argo Rollouts ç®¡ç†çš„éƒ¨ç½²ä¸­æ‰€æœ‰å‚ä¸çš„ç»„ä»¶çš„æ¦‚è¿°ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-argo-rollouts-æ¶æ„&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;../images/argo-rollout-architecture.png&#34; alt=&#34;Argo Rollouts æ¶æ„&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Argo Rollouts æ¶æ„
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;argo-rollouts-æ§åˆ¶å™¨&#34;&gt;Argo Rollouts æ§åˆ¶å™¨&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ä¸»è¦çš„æ§åˆ¶å™¨ï¼Œå®ƒç›‘è§†é›†ç¾¤ä¸­çš„äº‹ä»¶å¹¶åœ¨æ›´æ”¹ &lt;code&gt;Rollout&lt;/code&gt; ç±»å‹çš„èµ„æºæ—¶åšå‡ºååº”ã€‚æ§åˆ¶å™¨å°†è¯»å–æ‰€æœ‰æ»šåŠ¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶å°†é›†ç¾¤å¸¦åˆ°ä¸ Rollout å®šä¹‰ä¸­æè¿°çš„ç›¸åŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼ŒArgo Rollouts ä¸ä¼šå¹²æ¶‰æˆ–å“åº”åœ¨æ™®é€šçš„ &lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/deployment/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Deployment èµ„æº&lt;/a&gt; ä¸Šå‘ç”Ÿçš„ä»»ä½•æ›´æ”¹ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä»¥å…¶ä»–æ–¹æ³•éƒ¨ç½²åº”ç”¨ç¨‹åºçš„é›†ç¾¤ä¸­å®‰è£… Argo Rolloutsã€‚&lt;/p&gt;
&lt;p&gt;è¦åœ¨ä½ çš„é›†ç¾¤ä¸­å®‰è£…æ§åˆ¶å™¨å¹¶å¼€å§‹è¿›è¡Œæ¸è¿›å¼äº¤ä»˜ï¼Œè¯·å‚è§&lt;a href=&#34;../installation&#34;&gt;å®‰è£…é¡µé¢&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;rollout-èµ„æº&#34;&gt;Rollout èµ„æº&lt;/h2&gt;
&lt;p&gt;Rollout èµ„æºæ˜¯ç”± Argo Rollouts å¼•å…¥å’Œç®¡ç†çš„è‡ªå®šä¹‰ Kubernetes èµ„æºã€‚å®ƒä¸åŸç”Ÿ Kubernetes Deployment èµ„æºå¤§å¤šå…¼å®¹ï¼Œä½†å…·æœ‰æ§åˆ¶é«˜çº§éƒ¨ç½²æ–¹æ³•ï¼ˆå¦‚é‡‘ä¸é›€å’Œè“/ç»¿éƒ¨ç½²ï¼‰çš„é˜¶æ®µã€é˜ˆå€¼å’Œæ–¹æ³•çš„é¢å¤–å­—æ®µã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼ŒArgo Rollouts æ§åˆ¶å™¨ä»…å“åº”åœ¨ Rollout æºä¸­å‘ç”Ÿçš„é‚£äº›æ›´æ”¹ã€‚å®ƒä¸ä¼šå¯¹æ™®é€šçš„ Deployment èµ„æºåšä»»ä½•äº‹æƒ…ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ Argo Rollouts ç®¡ç†å®ƒä»¬ï¼Œä½ éœ€è¦å°†ä½ çš„ Deployments è¿ç§»åˆ° Rolloutsï¼Œè¯·å‚è€ƒ &lt;a href=&#34;../migrating&#34;&gt;è¿ç§»é¡µé¢&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨ &lt;a href=&#34;../features/specification&#34;&gt;å®Œæ•´è§„èŒƒé¡µé¢&lt;/a&gt; ä¸­æŸ¥çœ‹ Rollout çš„æ‰€æœ‰å¯èƒ½é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬çš„å‰¯æœ¬é›†&#34;&gt;æ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬çš„å‰¯æœ¬é›†&lt;/h2&gt;
&lt;p&gt;è¿™äº›æ˜¯ &lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ ‡å‡† Kubernetes ReplicaSet èµ„æº&lt;/a&gt; çš„å®ä¾‹ã€‚Argo Rollouts åœ¨å…¶ä¸Šæ”¾ç½®äº†ä¸€äº›é¢å¤–çš„å…ƒæ•°æ®ï¼Œä»¥è·Ÿè¸ªä½œä¸ºåº”ç”¨ç¨‹åºä¸€éƒ¨åˆ†çš„ä¸åŒç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œåœ¨ Rollout ä¸­å‚ä¸çš„å‰¯æœ¬é›†æ˜¯ç”±æ§åˆ¶å™¨ä»¥è‡ªåŠ¨æ–¹å¼å®Œå…¨ç®¡ç†çš„ã€‚ä½ ä¸åº”ä½¿ç”¨å¤–éƒ¨å·¥å…·å¹²æ‰°å®ƒä»¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ingressservice&#34;&gt;Ingress/Service&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯æµé‡ä»å®æ—¶ç”¨æˆ·è¿›å…¥ä½ çš„é›†ç¾¤å¹¶é‡å®šå‘åˆ°é€‚å½“ç‰ˆæœ¬çš„æœºåˆ¶ã€‚Argo Rollouts ä½¿ç”¨ &lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/service/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ ‡å‡† Kubernetes service èµ„æº&lt;/a&gt;ï¼Œä½†éœ€è¦ä¸€äº›é¢å¤–çš„å…ƒæ•°æ®æ¥è¿›è¡Œç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;Argo Rollouts åœ¨ç½‘ç»œé€‰é¡¹æ–¹é¢éå¸¸çµæ´»ã€‚é¦–å…ˆï¼Œä½ å¯ä»¥åœ¨ Rollout æœŸé—´æ‹¥æœ‰ä¸åŒçš„æœåŠ¡ï¼Œè¿™äº›æœåŠ¡ä»…é€‚ç”¨äºæ–°ç‰ˆæœ¬ã€æ—§ç‰ˆæœ¬æˆ–ä¸¤è€…ã€‚é’ˆå¯¹é‡‘ä¸é›€éƒ¨ç½²ï¼ŒArgo Rollouts æ”¯æŒå‡ ç§ &lt;a href=&#34;../features/traffic-management/&#34;&gt;æœåŠ¡ç½‘æ ¼å’Œå…¥å£è§£å†³æ–¹æ¡ˆ&lt;/a&gt;ï¼Œä»¥æ ¹æ®ç‰¹å®šç™¾åˆ†æ¯”æ‹†åˆ†æµé‡ï¼Œè€Œä¸æ˜¯åŸºäº pod è®¡æ•°çš„ç®€å•è´Ÿè½½å‡è¡¡ï¼Œå¹¶ä¸”å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªè·¯ç”±æä¾›ç¨‹åºã€‚&lt;/p&gt;
&lt;h2 id=&#34;analysistemplate-å’Œ-analysisrun&#34;&gt;AnalysisTemplate å’Œ AnalysisRun&lt;/h2&gt;
&lt;p&gt;åˆ†ææ˜¯å°† Rollout è¿æ¥åˆ°ä½ çš„æŒ‡æ ‡æä¾›ç¨‹åºå¹¶å®šä¹‰ç¡®å®šæ›´æ–°æ˜¯å¦æˆåŠŸçš„ç‰¹å®šæŒ‡æ ‡é˜ˆå€¼çš„åŠŸèƒ½ã€‚å¯¹äºæ¯ä¸ªåˆ†æï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªåº¦é‡æŸ¥è¯¢ä»¥åŠå®ƒä»¬çš„é¢„æœŸç»“æœã€‚å¦‚æœåº¦é‡æŸ¥è¯¢è‰¯å¥½ï¼ŒRollout å°†è‡ªåŠ¨ç»§ç»­ï¼Œå¦‚æœåº¦é‡æ˜¾ç¤ºå¤±è´¥ï¼Œåˆ™è‡ªåŠ¨å›æ»šï¼Œå¦‚æœåº¦é‡æ— æ³•æä¾›æˆåŠŸ/å¤±è´¥ç­”æ¡ˆï¼Œåˆ™æš‚åœ Rolloutã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºæ‰§è¡Œåˆ†æï¼ŒArgo Rollouts åŒ…æ‹¬ä¸¤ä¸ªè‡ªå®šä¹‰ Kubernetes èµ„æºï¼š&lt;code&gt;AnalysisTemplate&lt;/code&gt; å’Œ &lt;code&gt;AnalysisRun&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AnalysisTemplate&lt;/code&gt; åŒ…å«æœ‰å…³è¦æŸ¥è¯¢çš„åº¦é‡çš„è¯´æ˜ã€‚é™„åŠ åˆ° Rollout çš„å®é™…ç»“æœæ˜¯ &lt;code&gt;AnalysisRun&lt;/code&gt; è‡ªå®šä¹‰èµ„æºã€‚ä½ å¯ä»¥åœ¨ç‰¹å®šçš„ Rollout ä¸Šå®šä¹‰ &lt;code&gt;AnalysisTemplate&lt;/code&gt;ï¼Œä¹Ÿå¯ä»¥åœ¨é›†ç¾¤ä¸Šå…¨å±€å®šä¹‰ä¸ºå¯ç”±å¤šä¸ª Rollout å…±äº«çš„ &lt;code&gt;ClusterAnalysisTemplate&lt;/code&gt;ã€‚&lt;code&gt;AnalysisRun&lt;/code&gt; èµ„æºåœ¨ç‰¹å®šçš„ Rollout ä¸Šè¿›è¡Œä½œç”¨åŸŸé™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œåœ¨ Rollout ä¸­ä½¿ç”¨åˆ†æå’Œåº¦é‡å®Œå…¨æ˜¯å¯é€‰çš„ã€‚ä½ å¯ä»¥æ‰‹åŠ¨æš‚åœå’Œæ¨å¹¿ï¼ˆpromoteï¼‰Rolloutï¼Œæˆ–é€šè¿‡ API æˆ– CLI ä½¿ç”¨å…¶ä»–å¤–éƒ¨æ–¹æ³•ï¼ˆä¾‹å¦‚çƒŸé›¾æµ‹è¯•ï¼‰ã€‚ä½ ä¸éœ€è¦åº¦é‡è§£å†³æ–¹æ¡ˆæ‰èƒ½ä½¿ç”¨ Argo Rolloutsã€‚ä½ è¿˜å¯ä»¥åœ¨ Rollout ä¸­æ··åˆè‡ªåŠ¨åŒ–ï¼ˆå³åŸºäºåˆ†æçš„ï¼‰å’Œæ‰‹åŠ¨æ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†åº¦é‡ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡è¿è¡Œ &lt;a href=&#34;../analysis/job/&#34;&gt;Kubernetes Job&lt;/a&gt; æˆ–è¿è¡Œ &lt;a href=&#34;../analysis/web/&#34;&gt;Webhook&lt;/a&gt; æ¥å†³å®š Rollout çš„æˆåŠŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;åº¦é‡æä¾›ç¨‹åº&#34;&gt;åº¦é‡æä¾›ç¨‹åº&lt;/h2&gt;
&lt;p&gt;Argo Rollouts åŒ…æ‹¬&lt;a href=&#34;../features/analysis/&#34;&gt;å¯¹å‡ ä¸ªæµè¡Œçš„åº¦é‡æä¾›ç¨‹åºçš„æœ¬åœ°é›†æˆ&lt;/a&gt;ï¼Œä½ å¯ä»¥åœ¨åˆ†æèµ„æºä¸­ä½¿ç”¨å®ƒä»¬æ¥è‡ªåŠ¨æ¨å¹¿æˆ–å›æ»š Rolloutã€‚æœ‰å…³ç‰¹å®šè®¾ç½®é€‰é¡¹ï¼Œè¯·å‚é˜…æ¯ä¸ªæä¾›ç¨‹åºçš„æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;cli-å’Œ-uiæœªåœ¨å›¾è¡¨ä¸­æ˜¾ç¤º&#34;&gt;CLI å’Œ UIï¼ˆæœªåœ¨å›¾è¡¨ä¸­æ˜¾ç¤ºï¼‰&lt;/h2&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ &lt;a href=&#34;../features/kubectl-plugin/&#34;&gt;Argo Rollouts CLI&lt;/a&gt; æˆ– &lt;a href=&#34;../dashboard/&#34;&gt;é›†æˆ UI&lt;/a&gt; æŸ¥çœ‹å’Œç®¡ç† Rolloutï¼Œä¸¤è€…éƒ½æ˜¯å¯é€‰çš„ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>UI Dashboard</title>
      <link>https://lib.jimmysong.io/argo-rollouts/dashboard/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/dashboard/</guid>
      <description>&lt;p&gt;Argo Rollouts Kubectl æ’ä»¶å¯ä»¥æä¾›æœ¬åœ° UI ä»ªè¡¨æ¿æ¥å¯è§†åŒ–ä½ çš„ Rolloutsã€‚&lt;/p&gt;
&lt;p&gt;è¦å¯åŠ¨å®ƒï¼Œè¯·åœ¨åŒ…å«ä½ çš„ Rollouts çš„å‘½åç©ºé—´ä¸­è¿è¡Œ &lt;code&gt;kubectl argo rollouts dashboard&lt;/code&gt; ã€‚ç„¶åè®¿é—® &lt;code&gt;localhost:3100&lt;/code&gt; æŸ¥çœ‹ç”¨æˆ·ç•Œé¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ—è¡¨è§†å›¾&#34;&gt;åˆ—è¡¨è§†å›¾&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-rollouts-åˆ—è¡¨è§†å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;../images/rollouts-list.png&#34; alt=&#34;Rollouts åˆ—è¡¨è§†å›¾&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Rollouts åˆ—è¡¨è§†å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;å•ç‹¬çš„-rollout-è§†å›¾&#34;&gt;å•ç‹¬çš„ Rollout è§†å›¾&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-rollouts-è§†å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;../images/rollout-ui.png&#34; alt=&#34;Rollouts è§†å›¾&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Rollouts è§†å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å®éªŒ CRD</title>
      <link>https://lib.jimmysong.io/argo-rollouts/experiment/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/experiment/</guid>
      <description>&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯å®éªŒ-crd&#34;&gt;ä»€ä¹ˆæ˜¯å®éªŒ CRDï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å®éªŒ CRD å…è®¸ç”¨æˆ·å¯¹ä¸€ä¸ªæˆ–å¤šä¸ª ReplicaSet è¿›è¡ŒçŸ­æš‚è¿è¡Œã€‚é™¤äº†è¿è¡ŒçŸ­æš‚ ReplicaSet å¤–ï¼Œå®éªŒ CRD è¿˜å¯ä»¥åœ¨ ReplicaSet æ—è¾¹å¯åŠ¨ AnalysisRunsã€‚é€šå¸¸ï¼Œè¿™äº› AnalysisRun ç”¨äºç¡®è®¤æ–°çš„ ReplicaSet æ˜¯å¦æŒ‰é¢„æœŸè¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè®¾ç½®äº†æƒé‡ï¼ˆéœ€è¦æµé‡è·¯ç”±ï¼‰æˆ–è¯¥å®éªŒçš„ Service å±æ€§ï¼Œåˆ™è¿˜ä¼šç”Ÿæˆä¸€ä¸ªæœåŠ¡ï¼Œç”¨äºå°†æµé‡è·¯ç”±åˆ°å®éªŒ ReplicaSetã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®éªŒç”¨ä¾‹&#34;&gt;å®éªŒç”¨ä¾‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·æƒ³è¦è¿è¡Œåº”ç”¨ç¨‹åºçš„ä¸¤ä¸ªç‰ˆæœ¬ä»¥è¿›è¡Œ Kayenta é£æ ¼çš„åˆ†ææ¥å¯ç”¨ã€‚å®éªŒ CRD åŸºäºå®éªŒçš„ &lt;code&gt;spec.templates&lt;/code&gt; å­—æ®µåˆ›å»º 2 ä¸ª ReplicaSetï¼ˆåŸºçº¿å’Œé‡‘ä¸é›€ï¼‰ï¼Œå¹¶ç­‰å¾…ä¸¤è€…éƒ½å¥åº·ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œå®éªŒä¼šç¼©å° ReplicaSet çš„è§„æ¨¡ï¼Œç”¨æˆ·å¯ä»¥å¼€å§‹ Kayenta åˆ†æè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®éªŒæ¥å¯ç”¨ A/B/C æµ‹è¯•ï¼Œé€šè¿‡ä¸ºä¸åŒç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºå¯åŠ¨å¤šä¸ªå®éªŒæ¥è¿›è¡Œé•¿æ—¶é—´æµ‹è¯•ã€‚æ¯ä¸ªå®éªŒéƒ½æœ‰ä¸€ä¸ª PodSpec æ¨¡æ¿ï¼Œå®šä¹‰ç”¨æˆ·è¦è¿è¡Œçš„ç‰¹å®šç‰ˆæœ¬ã€‚å®éªŒå…è®¸ç”¨æˆ·åŒæ—¶å¯åŠ¨å¤šä¸ªå®éªŒï¼Œå¹¶ä¿æŒæ¯ä¸ªå®éªŒçš„ç‹¬ç«‹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ä¸åŒçš„æ ‡ç­¾å¯åŠ¨ç°æœ‰åº”ç”¨ç¨‹åºçš„æ–°ç‰ˆæœ¬ï¼Œä»¥é¿å…ä» Kubernetes æœåŠ¡ä¸­æ¥æ”¶æµé‡ã€‚ç”¨æˆ·å¯ä»¥åœ¨ç»§ç»­ Rollout ä¹‹å‰åœ¨æ–°ç‰ˆæœ¬ä¸Šè¿è¡Œæµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®éªŒè§„èŒƒ&#34;&gt;å®éªŒè§„èŒƒ&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯åˆ›å»ºä¸¤ä¸ªå…·æœ‰ 1 ä¸ªå‰¯æœ¬çš„ ReplicaSet å¹¶åœ¨ä¸¤è€…å¯ç”¨åè¿è¡Œå®ƒä»¬ 20 åˆ†é’Ÿçš„å®éªŒç¤ºä¾‹ã€‚æ­¤å¤–ï¼Œè¿˜è¿è¡Œäº†å¤šä¸ª AnalysisRun ä»¥é’ˆå¯¹å®éªŒçš„ pod è¿›è¡Œåˆ†æã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Experiment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;example-experiment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å®éªŒæŒç»­æ—¶é—´ï¼Œä»æ‰€æœ‰ ReplicaSet å˜ä¸ºå¥åº·çŠ¶æ€å¼€å§‹ï¼ˆå¯é€‰ï¼‰&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¦‚æœçœç•¥ï¼Œå°†æ— é™æœŸè¿è¡Œï¼Œç›´åˆ°ç»ˆæ­¢æˆ–æ‰€æœ‰æ ‡è®°ä¸ºâ€œrequiredForCompletionâ€çš„åˆ†æéƒ½å®Œæˆã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;20m&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ä¸€ä¸ª ReplicaSet åº”åœ¨å…¶ä¸­å–å¾—è¿›å±•çš„æˆªæ­¢æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¦‚æœè¶…è¿‡ï¼Œåˆ™å®éªŒå°†å¤±è´¥ã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;progressDeadlineSeconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è¦åœ¨å®éªŒä¸­è¿è¡Œçš„ Pod æ¨¡æ¿è§„èŒƒåˆ—è¡¨ï¼Œä½œä¸º ReplicaSets&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;purple&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è¦è¿è¡Œçš„å‰¯æœ¬æ•°ï¼ˆå¯é€‰ï¼‰ã€‚å¦‚æœçœç•¥ï¼Œå°†è¿è¡Œå•ä¸ªå‰¯æœ¬&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# åˆ›å»ºæ­¤å®éªŒçš„æœåŠ¡æ ‡å¿—ï¼ˆå¯é€‰ï¼‰&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä¸ä¼šåˆ›å»ºæœåŠ¡ã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æœåŠ¡åç§°ï¼ˆå¯é€‰ï¼‰ã€‚å¦‚æœçœç•¥ï¼Œåˆ™ service: {} ä¹Ÿå¯ä»¥æ¥å—ã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;service-name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;purple&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;purple&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollouts-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj/rollouts-demo:purple&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;imagePullPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Always&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;orange&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;minReadySeconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;orange&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;orange&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollouts-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj/rollouts-demo:orange&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;imagePullPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Always&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è¦åœ¨å®éªŒæœŸé—´æ‰§è¡Œçš„ AnalysisTemplate å¼•ç”¨åˆ—è¡¨&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;analyses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;purple&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templateName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http-benchmark&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;purple&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;orange&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templateName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http-benchmark&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;orange&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;compare-results&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templateName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;compare&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¦‚æœå¯¹äºåˆ†æå¼•ç”¨è®¾ç½®äº† requiredForCompletion ä¸º trueï¼Œåˆ™åœ¨æ­¤åˆ†æå®Œæˆä¹‹å‰ï¼Œå®éªŒä¸ä¼šå®Œæˆ&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requiredForCompletion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;purple&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å®éªŒç”Ÿå‘½å‘¨æœŸ&#34;&gt;å®éªŒç”Ÿå‘½å‘¨æœŸ&lt;/h2&gt;
&lt;p&gt;å®éªŒæ—¨åœ¨ä¸´æ—¶è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡æ¿ã€‚å®éªŒçš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸º &lt;code&gt;spec.templates&lt;/code&gt; ä¸‹æŒ‡å®šçš„æ¯ä¸ª Pod æ¨¡æ¿åˆ›å»ºå¹¶æ‰©å±•ä¸€ä¸ª ReplicaSetã€‚å¦‚æœåœ¨ä¸€ä¸ª Pod æ¨¡æ¿ä¸‹æŒ‡å®šäº† &lt;code&gt;service&lt;/code&gt;ï¼Œåˆ™è¿˜ä¼šä¸ºè¯¥ Pod åˆ›å»ºä¸€ä¸ªæœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;ç­‰å¾…æ‰€æœ‰ ReplicaSet è¾¾åˆ°å®Œå…¨å¯ç”¨æ€§ã€‚å¦‚æœ ReplicaSet åœ¨ &lt;code&gt;spec.progressDeadlineSeconds&lt;/code&gt; å†…æœªå˜ä¸ºå¯ç”¨ï¼Œåˆ™å®éªŒå°†å¤±è´¥ã€‚ä¸€æ—¦å¯ç”¨ï¼Œå®éªŒå°†ä»â€œæŒ‚èµ·â€çŠ¶æ€è½¬æ¢ä¸ºâ€œè¿è¡Œâ€çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦å®éªŒè¢«è§†ä¸ºâ€œè¿è¡Œä¸­â€ï¼Œå®ƒå°†ä¸º &lt;code&gt;spec.analyses&lt;/code&gt; ä¸‹å¼•ç”¨çš„æ¯ä¸ª AnalysisTemplate å¼€å§‹ä¸€ä¸ª AnalysisRunã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœåœ¨ &lt;code&gt;spec.duration&lt;/code&gt; ä¸‹æŒ‡å®šäº†æŒç»­æ—¶é—´ï¼Œåˆ™å®éªŒå°†ç­‰å¾…æŒç»­æ—¶é—´ç»“æŸï¼Œç„¶åå®Œæˆå®éªŒã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ AnalysisRun å¤±è´¥æˆ–å‡ºé”™ï¼Œåˆ™å®éªŒå°†è¿‡æ—©ç»“æŸï¼ŒçŠ¶æ€ç­‰äºä¸æˆåŠŸçš„ AnalysisRunï¼ˆå³â€œå¤±è´¥â€æˆ–â€œé”™è¯¯â€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå…¶ä¸­ä¸€ä¸ªå¼•ç”¨çš„ AnalysisTemplates è¢«æ ‡è®°ä¸º &lt;code&gt;requiredForCompletionï¼štrue&lt;/code&gt;ï¼Œåˆ™å®éªŒå°†ä¸ä¼šåœ¨è¿™äº› AnalysisRuns å®Œæˆä¹‹å‰å®Œæˆï¼Œå³ä½¿è¶…è¿‡å®éªŒæŒç»­æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœªæŒ‡å®š &lt;code&gt;spec.duration&lt;/code&gt; æˆ– &lt;code&gt;requiredForCompletionï¼štrue&lt;/code&gt;ï¼Œåˆ™å®éªŒå°†æ— é™æœŸè¿è¡Œï¼Œç›´åˆ°æ˜¾å¼ç»ˆæ­¢ï¼ˆé€šè¿‡è®¾ç½® &lt;code&gt;spec.terminateï¼štrue&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦å®éªŒå®Œæˆï¼ŒReplicaSets å°†ç¼©å°åˆ°é›¶ï¼Œå¹¶ç»ˆæ­¢ä»»ä½•æœªå®Œæˆçš„ AnalysisRunsã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸ”” æ³¨æ„ï¼šReplicaSet åç§°æ˜¯é€šè¿‡å°†å®éªŒåç§°ä¸æ¨¡æ¿åç§°ç»„åˆè€Œæˆçš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸-rollouts-é›†æˆ&#34;&gt;ä¸ Rollouts é›†æˆ&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨é‡‘ä¸é›€ç­–ç•¥çš„ Rollout å¯ä»¥ä½¿ç”¨ &lt;code&gt;experiment&lt;/code&gt; æ­¥éª¤åˆ›å»ºä¸€ä¸ªå®éªŒã€‚å®éªŒæ­¥éª¤ä½œä¸º Rollout çš„é˜»å¡æ­¥éª¤ï¼Œåªæœ‰å½“å®éªŒæˆåŠŸæ—¶ï¼ŒRollout æ‰ä¼šç»§ç»­ã€‚Rollout ä¼šä½¿ç”¨ Rollout å®éªŒæ­¥éª¤ä¸­çš„é…ç½®åˆ›å»ºå®éªŒã€‚å¦‚æœå®éªŒå¤±è´¥æˆ–å‡ºé”™ï¼Œåˆ™ Rollout å°†ä¸­æ­¢ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”” æ³¨æ„ï¼šå®éªŒåç§°æ˜¯é€šè¿‡å°† Rollout çš„åç§°ã€æ–° ReplicaSet çš„ PodHashã€Rollout çš„å½“å‰ç‰ˆæœ¬å’Œå½“å‰æ­¥éª¤ç´¢å¼•ç»„åˆè€Œæˆçš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;strategy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;experiment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;1h&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;baseline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;stable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;analyses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mann-whitney&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templateName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mann-whitney&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;baseline-hash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{templates.baseline.podTemplateHash}}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary-hash&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{templates.canary.podTemplateHash}}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1](&amp;lt;http://argoproj.io/v1alpha1&amp;gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;strategy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trafficRouting&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;alb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ingress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;experiment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;1h&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;experiment-baseline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;stable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;experiment-canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œåœ¨ Rollout çš„æ›´æ–°æœŸé—´ï¼ŒRollout å°†å¯åŠ¨ä¸€ä¸ªå®éªŒã€‚å®éªŒå°†åˆ›å»ºä¸¤ä¸ª ReplicaSetsï¼š&lt;code&gt;baseline&lt;/code&gt; å’Œ &lt;code&gt;canary&lt;/code&gt;ï¼Œæ¯ä¸ª ReplicaSet éƒ½æœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶å°†è¿è¡Œä¸€ä¸ªå°æ—¶ã€‚&lt;code&gt;baseline&lt;/code&gt; æ¨¡æ¿ä½¿ç”¨ç¨³å®š ReplicaSet çš„ PodSpecï¼Œè€Œ &lt;code&gt;canary&lt;/code&gt; æ¨¡æ¿ä½¿ç”¨é‡‘ä¸é›€ ReplicaSet çš„ PodSpecã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå®éªŒå°†ä½¿ç”¨åä¸º &lt;code&gt;mann-whitney&lt;/code&gt; çš„ AnalysisTemplate è¿›è¡Œåˆ†æã€‚AnalysisRun ä¼šæä¾›åŸºçº¿å’Œé‡‘ä¸é›€çš„ pod-hash è¯¦ç»†ä¿¡æ¯ï¼Œä»¥æ‰§è¡Œå¿…è¦çš„æŒ‡æ ‡æŸ¥è¯¢ï¼Œä½¿ç”¨ &lt;code&gt;{{templates.baseline.podTemplateHash}}&lt;/code&gt; å’Œ &lt;code&gt;{{templates.canary.podTemplateHash}}&lt;/code&gt; å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”” æ³¨æ„ï¼šå®éªŒçš„ &lt;code&gt;baseline&lt;/code&gt;/&lt;code&gt;canary&lt;/code&gt; ReplicaSets åˆ›å»ºçš„ pod-hash å€¼ä¸ Rollout åˆ›å»ºçš„ &lt;code&gt;stable&lt;/code&gt;/&lt;code&gt;canary&lt;/code&gt; ReplicaSets çš„ pod-hash å€¼ä¸åŒã€‚è¿™æ˜¯æœ‰æ„è¡Œä¸ºï¼Œä»¥ä¾¿å…è®¸å¯¹å®éªŒçš„ pod è¿›è¡Œåˆ†éš”å’Œå•ç‹¬æŸ¥è¯¢æŒ‡æ ‡ï¼Œè€Œä¸æ˜¯å’Œ Rollout çš„ pod æ··æ·†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¸¦æµé‡è·¯ç”±çš„åŠ æƒå®éªŒæ­¥éª¤&#34;&gt;å¸¦æµé‡è·¯ç”±çš„åŠ æƒå®éªŒæ­¥éª¤&lt;/h2&gt;
&lt;p&gt;ğŸ”” é‡è¦æé†’ï¼šä» v1.1 å¼€å§‹å¯ç”¨&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨é‡‘ä¸é›€ç­–ç•¥å’Œæµé‡è·¯ç”±çš„ Rollout å¯ä»¥å°†æµé‡ä»¥ç»†ç²’åº¦çš„æ–¹å¼åˆ†é…åˆ°å®éªŒå †æ ˆä¸­ã€‚å¯ç”¨æµé‡è·¯ç”±æ—¶ï¼ŒRollout å®éªŒæ­¥éª¤å…è®¸å°†æµé‡è½¬ç§»åˆ°å®éªŒ podã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”” æ³¨æ„ï¼šç›®å‰ï¼Œæ­¤åŠŸèƒ½ä»…é€‚ç”¨äº SMIã€ALB å’Œ Istio æµé‡è·¯ç”±å™¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;strategy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trafficRouting&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;alb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ingress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;experiment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;1h&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;experiment-baseline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;stable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;experiment-canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œåœ¨æ›´æ–°æœŸé—´ï¼Œç¬¬ä¸€æ­¥å°†å¯åŠ¨åŸºçº¿ä¸é‡‘ä¸é›€å®éªŒã€‚å½“ Pod å‡†å¤‡å°±ç»ªæ—¶ï¼ˆå®éªŒè¿›å…¥è¿è¡Œé˜¶æ®µï¼‰ï¼ŒRollout å°†å°† 5% çš„æµé‡åˆ†é…åˆ° &lt;code&gt;experiment-canary&lt;/code&gt;ï¼Œå¹¶å°† 5% çš„æµé‡åˆ†é…åˆ° &lt;code&gt;experiment-baseline&lt;/code&gt;ï¼Œä½¿å…¶ä½™ 90% çš„æµé‡ç•™ç»™æ—§å †æ ˆã€‚&lt;/p&gt;
&lt;p&gt;!!! note å½“ä½¿ç”¨å¸¦æœ‰æµé‡è·¯ç”±çš„åŠ æƒå®éªŒæ­¥éª¤æ—¶ï¼Œå°†ä¸ºæ¯ä¸ªå®éªŒæ¨¡æ¿è‡ªåŠ¨åˆ›å»ºæœåŠ¡ã€‚æµé‡è·¯ç”±å™¨ä½¿ç”¨æ­¤æœåŠ¡å°†æµé‡å‘é€åˆ°å®éªŒ podã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„ Service å…·æœ‰ ReplicaSet çš„åç§°ï¼Œå¹¶ä» specRef å®šä¹‰ä¸­ç»§æ‰¿ç«¯å£å’Œé€‰æ‹©å™¨ã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;{{templates.baseline.replicaset.name}}&lt;/code&gt; æˆ– &lt;code&gt;{{templates.canary.replicaset.name}}&lt;/code&gt; å˜é‡åˆ†åˆ«è®¿é—®å®ƒä»¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ä½¿ç”¨æƒé‡åˆ›å»ºå®éªŒæœåŠ¡&#34;&gt;ä¸ä½¿ç”¨æƒé‡åˆ›å»ºå®éªŒæœåŠ¡&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ ä¸æƒ³ä½¿ç”¨æµé‡è·¯ç”±è¿›è¡Œå®éªŒï¼Œä½†ä»æƒ³ä¸ºå®ƒä»¬åˆ›å»ºæœåŠ¡ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ª Service å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä½¿ç”¨å¯é€‰çš„åç§°ï¼Œè€Œæ— éœ€ä¸ºå®ƒä»¬è®¾ç½®æƒé‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;guestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;strategy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;experiment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;1h&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;templates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;experiment-baseline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;stable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;test-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;experiment-canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;specRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œåœ¨æ›´æ–°æœŸé—´ï¼Œç¬¬ä¸€æ­¥ä¼šå¼€å§‹ä¸€ä¸ªåŸºå‡† vs. é‡‘ä¸é›€å®éªŒã€‚è¿™æ¬¡ï¼Œå³ä½¿æ²¡æœ‰ä¸ºå®ƒè®¾ç½®æƒé‡æˆ–æµé‡è·¯ç”±ï¼Œä¹Ÿå°†ä¸º &lt;code&gt;experiment-baseline&lt;/code&gt; åˆ›å»ºä¸€ä¸ªæœåŠ¡ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>è¿ç§»åˆ° Rollouts</title>
      <link>https://lib.jimmysong.io/argo-rollouts/migrating/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/migrating/</guid>
      <description>&lt;p&gt;æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è¿ç§»åˆ° Rolloutï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†ç°æœ‰çš„ Deployment èµ„æºè½¬æ¢ä¸º Rollout èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;workloadRef&lt;/code&gt; å­—æ®µä» Rollout å¼•ç”¨ç°æœ‰çš„ Deploymentã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å°†-deployment-è½¬æ¢ä¸º-rollout&#34;&gt;&lt;strong&gt;å°† Deployment è½¬æ¢ä¸º Rollout&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å°† Deployment è½¬æ¢ä¸º Rollout æ—¶ï¼Œéœ€è¦æ›´æ”¹ä¸‰ä¸ªå­—æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°† &lt;code&gt;apiVersion&lt;/code&gt; ä» &lt;code&gt;apps/v1&lt;/code&gt; æ›´æ”¹ä¸º &lt;code&gt;argoproj.io/v1alpha1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å°† &lt;code&gt;kind&lt;/code&gt; ä» &lt;code&gt;Deployment&lt;/code&gt; æ›´æ”¹ä¸º &lt;code&gt;Rollout&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è“ç»¿æˆ–é‡‘ä¸é›€ç­–ç•¥æ›¿æ¢éƒ¨ç½²ç­–ç•¥&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨é‡‘ä¸é›€ç­–ç•¥çš„ Rollout èµ„æºç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1 &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ä» apps/v1 æ›´æ”¹è€Œæ¥&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout                    &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ä» Deployment æ›´æ”¹è€Œæ¥&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollouts-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollouts-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollouts-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollouts-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj/rollouts-demo:blue&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;strategy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ä» rollingUpdate æˆ– recreate æ›´æ”¹è€Œæ¥&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;setWeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;pause&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ğŸ”” æ³¨æ„ï¼šåœ¨è¿ç§»å·²ç»æä¾›å®æ—¶ç”Ÿäº§æµé‡çš„ Deployment æ—¶ï¼Œåº”å…ˆåœ¨ Deployment æ—è¾¹è¿è¡Œ Rolloutï¼Œç„¶åå†åˆ é™¤ Deployment æˆ–ç¼©å° Deploymentã€‚ &lt;strong&gt;ä¸éµå¾ªæ­¤æ–¹æ³•å¯èƒ½å¯¼è‡´åœæœº&lt;/strong&gt;ã€‚è¿™ä¹Ÿå…è®¸åœ¨åˆ é™¤åŸå§‹éƒ¨ç½²ä¹‹å‰æµ‹è¯• Rolloutã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»-rollout-å¼•ç”¨-deployment&#34;&gt;&lt;strong&gt;ä» Rollout å¼•ç”¨ Deployment&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;ä¸è¦åˆ é™¤ Deploymentï¼Œè€Œæ˜¯å°†å…¶ç¼©å°ä¸ºé›¶ï¼Œå¹¶ä» Rollout èµ„æºä¸­å¼•ç”¨å®ƒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ª Rollout èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;workloadRef&lt;/code&gt; å­—æ®µå¼•ç”¨ç°æœ‰çš„ Deploymentã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ›´æ”¹ç°æœ‰ Deployment çš„ &lt;code&gt;replicas&lt;/code&gt; å­—æ®µå°†ç°æœ‰ Deployment ç¼©å°ä¸ºé›¶ã€‚&lt;/li&gt;
&lt;li&gt;è¦æ‰§è¡Œæ›´æ–°ï¼Œåº”æ›´æ”¹ Deployment çš„ Pod æ¨¡æ¿å­—æ®µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å¼•ç”¨ Deployment çš„ Rollout èµ„æºç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1              &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# åˆ›å»ºä¸€ä¸ª rollout èµ„æº&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-ref-deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-ref-deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;workloadRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                                 &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ä½¿ç”¨ workloadRef å­—æ®µå¼•ç”¨ç°æœ‰çš„ Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-ref-deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;strategy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;canary&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;setWeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;pause&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{&lt;span class=&#34;nt&#34;&gt;duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;10s}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;---&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app.kubernetes.io/instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-ref-deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                                  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ç¼©å°ç°æœ‰éƒ¨ç½²&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-ref-deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-ref-deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollouts-demo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj/rollouts-demo:blue&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;imagePullPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Always&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä½ çš„ Deployment åœ¨ç”Ÿäº§ä¸­è¿è¡Œï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;åŒæ—¶è¿è¡Œ-rollout-å’Œ-deployment&#34;&gt;&lt;strong&gt;åŒæ—¶è¿è¡Œ Rollout å’Œ Deployment&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;åˆ›å»º Rollout åï¼Œå®ƒä¼šä¸ Deployment Pod å¹¶æ’å¯åŠ¨æ‰€éœ€æ•°é‡çš„ Podã€‚Rollout ä¸ä¼šå°è¯•ç®¡ç†ç°æœ‰çš„ Deployment Podã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å®‰å…¨åœ°å°† Rollout æ·»åŠ åˆ°ç”Ÿäº§ç¯å¢ƒä¸­è€Œä¸ä¼šä¸­æ–­ä»»ä½•æ“ä½œï¼Œä½†æ˜¯åœ¨è¿ç§»æœŸé—´ä¼šè¿è¡Œä¸¤å€çš„ Podã€‚&lt;/p&gt;
&lt;p&gt;Argo-rollouts æ§åˆ¶å™¨ä½¿ç”¨æ³¨é‡Š &lt;code&gt;rollout.argoproj.io/workload-generation&lt;/code&gt; å¯¹ Rollout å¯¹è±¡çš„ spec è¿›è¡Œä¿®è¡¥ï¼Œè¯¥æ³¨é‡Šç­‰äºå¼•ç”¨éƒ¨ç½²çš„ç”Ÿæˆã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ£€æŸ¥ Rollout çŠ¶æ€ä¸­çš„&lt;code&gt;workloadObservedGeneration&lt;/code&gt;æ¥æ£€æµ‹ Rollout æ˜¯å¦ä¸æ‰€éœ€çš„éƒ¨ç½²ç”ŸæˆåŒ¹é…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¿ç§»æœŸé—´çš„æµé‡ç®¡ç†&#34;&gt;&lt;strong&gt;è¿ç§»æœŸé—´çš„æµé‡ç®¡ç†&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Rollout æä¾›æµé‡ç®¡ç†åŠŸèƒ½ï¼Œå¯ç®¡ç†è·¯ç”±è§„åˆ™å¹¶å°†æµé‡æµå‘åº”ç”¨ç¨‹åºçš„ä¸åŒç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œè“ç»¿éƒ¨ç½²ç­–ç•¥æ“çºµ Kubernetes æœåŠ¡é€‰æ‹©å™¨å¹¶ä»…å°†ç”Ÿäº§æµé‡å®šå‘åˆ°â€œç»¿è‰²â€å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ­£åœ¨ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œåˆ™ Rollout å°†åˆ‡æ¢ç”Ÿäº§æµé‡åˆ°å…¶ç®¡ç†çš„ Podã€‚åˆ‡æ¢å‘ç”Ÿ ä»…åœ¨æ‰€éœ€æ•°é‡çš„ Pod æ­£åœ¨è¿è¡Œä¸”å¥åº·æ—¶æ‰ä¼šå‘ç”Ÿï¼Œå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ˜¯å®‰å…¨çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½  æƒ³è¦æ›´åŠ å°å¿ƒï¼Œè¯·è€ƒè™‘åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ Service æˆ– Ingress å¯¹è±¡æ¥éªŒè¯ Rollout è¡Œä¸ºã€‚ä¸€æ—¦å®Œæˆæµ‹è¯•ï¼Œåˆ é™¤ä¸´æ—¶ Service / Ingress å¹¶å°† Rollout åˆ‡æ¢åˆ°ç”Ÿäº§æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h1 id=&#34;è¿ç§»åˆ°éƒ¨ç½²&#34;&gt;&lt;strong&gt;è¿ç§»åˆ°éƒ¨ç½²&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·æƒ³è¦å›æ»šåˆ°ä» Rollout åˆ°éƒ¨ç½²ç±»å‹ï¼Œé‚£ä¹ˆä¸ Migrating to Rollouts ä¸­çš„æƒ…å†µç›¸ä¸€è‡´ï¼Œæœ‰ä¸¤ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°† Rollout èµ„æºè½¬æ¢ä¸º Deployment èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;workloadRef&lt;/code&gt; å­—æ®µä» Rollout å¼•ç”¨ç°æœ‰çš„ Deploymentã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å°†-rollout-è½¬æ¢ä¸º-deployment&#34;&gt;&lt;strong&gt;å°† Rollout è½¬æ¢ä¸º Deployment&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å°† Rollout è½¬æ¢ä¸º Deployment æ—¶ï¼Œéœ€è¦æ›´æ”¹ä¸‰ä¸ªå­—æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://xn--apiversionargoproj-o642ao74q.io/v1alpha1%e6%9b%b4%e6%94%b9%e4%b8%baapps/v1&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å°† apiVersion ä» argoproj.io/v1alpha1 æ›´æ”¹ä¸º apps/v1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å°† kind ä» Rollout æ›´æ”¹ä¸º Deployment&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;spec.strategy.canary&lt;/code&gt; æˆ– &lt;code&gt;spec.strategy.blueGreen&lt;/code&gt; ä¸­åˆ é™¤ Rollout ç­–ç•¥&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸ”” æ³¨æ„ï¼šåœ¨è¿ç§»å·²ç»æä¾›å®æ—¶ç”Ÿäº§æµé‡çš„ Rollout æ—¶ï¼Œåº”å…ˆåœ¨ Rollout æ—è¾¹è¿è¡Œ Deploymentï¼Œç„¶åå†åˆ é™¤ Rollout æˆ–ç¼©å° Rolloutã€‚ &lt;strong&gt;ä¸éµå¾ªæ­¤æ–¹æ³•å¯èƒ½å¯¼è‡´åœæœº&lt;/strong&gt;ã€‚è¿™ä¹Ÿå…è®¸åœ¨åˆ é™¤åŸå§‹ Rollout ä¹‹å‰æµ‹è¯• Deploymentã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»-rollout-å¼•ç”¨-deployment-1&#34;&gt;&lt;strong&gt;ä» Rollout å¼•ç”¨ Deployment&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å½“ Rollout å¼•ç”¨éƒ¨ç½²æ—¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡å°†å…¶ &lt;code&gt;replicas&lt;/code&gt; å­—æ®µæ›´æ”¹ä¸ºæ‰€éœ€çš„ Pod æ•°æ¥å¢åŠ ç°æœ‰çš„ Deploymentã€‚&lt;/li&gt;
&lt;li&gt;ç­‰å¾… Deployment Pod å˜ä¸º Readyã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡å°†å…¶ &lt;code&gt;replicas&lt;/code&gt; å­—æ®µæ›´æ”¹ä¸ºé›¶æ¥ç¼©å°ç°æœ‰ Rolloutã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¯·å‚è§åŒæ—¶è¿è¡Œ Rollout å’Œ Deployment å’Œè¿ç§»æœŸé—´çš„æµé‡ç®¡ç†ä»¥è·å–æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æœ€ä½³å®è·µ</title>
      <link>https://lib.jimmysong.io/argo-rollouts/best-practices/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/best-practices/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†åœ¨ä½¿ç”¨ Argo Rollouts æ—¶çš„ä¸€äº›æœ€ä½³å®è·µã€æŠ€å·§å’Œçªé—¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ingress-ç›®æ ‡ç¨³å®šä¸»æœºè·¯ç”±&#34;&gt;Ingress ç›®æ ‡/ç¨³å®šä¸»æœºè·¯ç”±&lt;/h2&gt;
&lt;p&gt;å‡ºäºå„ç§åŸå› ï¼Œé€šå¸¸å¸Œæœ›å¤–éƒ¨æœåŠ¡èƒ½å¤Ÿè®¿é—®é¢„æœŸçš„ podï¼ˆå³ canary/previewï¼‰æˆ–ç‰¹å®šçš„ç¨³å®š podï¼Œè€Œä¸ä¼šå°†æµé‡ä»»æ„åˆ†é…ç»™ä¸¤ä¸ªç‰ˆæœ¬ã€‚ä¸€äº›ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–°ç‰ˆæœ¬çš„æœåŠ¡å¯ä»¥åœ¨å†…éƒ¨/ç§æœ‰ç¯å¢ƒä¸­è®¿é—®ï¼ˆä¾‹å¦‚è¿›è¡Œæ‰‹åŠ¨éªŒè¯ï¼‰ï¼Œç„¶åå†å°†å…¶å¤–éƒ¨å…¬å¼€ã€‚&lt;/li&gt;
&lt;li&gt;å¤–éƒ¨ CI/CD ç®¡é“åœ¨å°†è“/ç»¿é¢„è§ˆå †æ ˆå‡çº§åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰è¿è¡Œæµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œæ¯”è¾ƒæ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬è¡Œä¸ºçš„æµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨ Ingress æ¥å°†æµé‡è·¯ç”±åˆ°æœåŠ¡ï¼Œåˆ™å¯ä»¥æ·»åŠ å…¶ä»–ä¸»æœºè§„åˆ™åˆ° Ingress è§„åˆ™ä¸­ï¼Œä»¥ä¾¿èƒ½å¤Ÿç‰¹åˆ«åˆ°è¾¾æœŸæœ›çš„ï¼ˆcanary/previewï¼‰pod æˆ–ç¨³å®šçš„ podã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;l&#34;&gt;apiVersionï¼šnetworking.k8s.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kindï¼šIngress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;metadataï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;nameï¼šguestbook&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;specï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rulesï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ï¼ƒä»…åˆ°è¾¾æ‰€éœ€çš„Podï¼ˆä¹Ÿç§°ä¸ºé‡‘ä¸é›€/é¢„è§ˆï¼‰çš„ä¸»æœºè§„åˆ™&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;l&#34;&gt;ä¸»æœºï¼šguestbook-desired.argoproj.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pathsï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;l&#34;&gt;åç«¯ï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;serviceNameï¼šguestbook-desired&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;servicePortï¼š443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pathï¼š/ *&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ï¼ƒä»…åˆ°è¾¾ç¨³å®šPodçš„ä¸»æœºè§„åˆ™&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;l&#34;&gt;ä¸»æœºï¼šguestbook-stable.argoproj.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pathsï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;l&#34;&gt;åç«¯ï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;serviceNameï¼šguestbook-stable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;servicePortï¼š443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pathï¼š/ *&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ï¼ƒé»˜è®¤è§„åˆ™ï¼Œçœç•¥ä¸»æœºï¼Œå°†æµé‡åˆ†ä¸ºæ‰€éœ€çš„ä¸ç¨³å®šçš„&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;httpï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pathsï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;l&#34;&gt;åç«¯ï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;serviceNameï¼šguestbook-root&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;servicePortï¼š443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pathï¼š/ *&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°æŠ€æœ¯å…·æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå³ä¸ä¼šäº§ç”Ÿé¢å¤–çš„è´Ÿè½½å‡è¡¡å™¨åˆ†é…æˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‡å°‘è¿ç®—ç¬¦å†…å­˜ä½¿ç”¨&#34;&gt;å‡å°‘è¿ç®—ç¬¦å†…å­˜ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;åœ¨å…·æœ‰æ•°åƒä¸ª rollouts çš„é›†ç¾¤ä¸Šï¼Œå¯ä»¥é€šè¿‡å°† RevisionHistoryLimit ä»é»˜è®¤å€¼ 10 æ›´æ”¹ä¸ºè¾ƒä½çš„æ•°å­—æ¥æ˜¾ç€å‡å°‘ argo-rollouts è¿ç®—ç¬¦çš„å†…å­˜ä½¿ç”¨ã€‚Argo Rollouts çš„ä¸€ä¸ªç”¨æˆ·é€šè¿‡å°† RevisionHistoryLimit ä» 10 æ›´æ”¹ä¸º 0ï¼Œä¸ºä¸€ä¸ªå…·æœ‰ 1290 ä¸ª rollouts çš„é›†ç¾¤å‡å°‘äº† 27ï¼… çš„å†…å­˜ä½¿ç”¨ç‡ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>FAQ</title>
      <link>https://lib.jimmysong.io/argo-rollouts/faq/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/faq/</guid>
      <description>&lt;h2 id=&#34;ä¸€èˆ¬é—®é¢˜&#34;&gt;ä¸€èˆ¬é—®é¢˜&lt;/h2&gt;
&lt;h3 id=&#34;argo-rollouts-æ˜¯ä¾èµ–-argo-cd-æˆ–å…¶ä»–-argo-é¡¹ç›®å—&#34;&gt;Argo Rollouts æ˜¯ä¾èµ– Argo CD æˆ–å…¶ä»– Argo é¡¹ç›®å—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Argo Rollouts æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ã€‚è™½ç„¶å®ƒä¸ Argo CD å’Œå…¶ä»– Argo é¡¹ç›®é…åˆä½¿ç”¨æ•ˆæœå¾ˆå¥½ï¼Œä½†å®ƒä¹Ÿå¯ä»¥å•ç‹¬ç”¨äºæ¸è¿›å¼äº¤ä»˜åœºæ™¯ã€‚æ›´å…·ä½“åœ°è¯´ï¼ŒArgo Rollouts ä¸éœ€è¦ä½ ä¹Ÿåœ¨åŒä¸€é›†ç¾¤ä¸Šå®‰è£… Argo CDã€‚&lt;/p&gt;
&lt;h3 id=&#34;argo-rollouts-å¦‚ä½•ä¸-argo-cd-é›†æˆ&#34;&gt;Argo Rollouts å¦‚ä½•ä¸ Argo CD é›†æˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ Argo CD çš„ &lt;a href=&#34;https://github.com/argoproj/argo-cd/blob/master/docs/operator-manual/health.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Lua å¥åº·æ£€æŸ¥&lt;/a&gt;ï¼ŒArgo CD å¯ä»¥äº†è§£ Argo Rollouts èµ„æºçš„å¥åº·çŠ¶å†µã€‚è¿™äº›å¥åº·æ£€æŸ¥äº†è§£ Argo Rollout å¯¹è±¡ä½•æ—¶åœ¨è¿›å±•ã€æš‚åœã€é€€åŒ–æˆ–å¥åº·ã€‚æ­¤å¤–ï¼ŒArgo CD å…·æœ‰åŸºäº Lua çš„èµ„æºæ“ä½œï¼Œå¯ä»¥æ”¹å˜ Argo Rollouts èµ„æºï¼ˆä¾‹å¦‚å–æ¶ˆæš‚åœ Rolloutï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæ“ä½œå‘˜å¯ä»¥æ„å»ºè‡ªåŠ¨åŒ–ç¨‹åºä»¥ååº” Argo Rollouts èµ„æºçš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ Argo CD åˆ›å»ºçš„ Rollout è¢«æš‚åœï¼ŒArgo CD ä¼šæ£€æµ‹åˆ°å¹¶å°†è¯¥åº”ç”¨ç¨‹åºæ ‡è®°ä¸ºæš‚åœã€‚ä¸€æ—¦ç¡®å®šæ–°ç‰ˆæœ¬æ˜¯å¥½çš„ï¼Œæ“ä½œå‘˜å°±å¯ä»¥ä½¿ç”¨ Argo CD çš„ resume èµ„æºæ“ä½œæ¥å–æ¶ˆæš‚åœ Rolloutï¼Œä»¥ä¾¿å®ƒå¯ä»¥ç»§ç»­å‰è¿›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æˆ‘ä»¬å¯ä»¥é€šè¿‡-argo-cd-è¿è¡Œ-argo-rollouts-kubectl-æ’ä»¶å‘½ä»¤å—&#34;&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ Argo CD è¿è¡Œ Argo Rollouts kubectl æ’ä»¶å‘½ä»¤å—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Argo CD æ”¯æŒè¿è¡Œ Lua è„šæœ¬æ¥ä¿®æ”¹èµ„æºç±»å‹ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡å°† &lt;code&gt;.spec.suspend&lt;/code&gt; è®¾ç½®ä¸º true æš‚åœ CronJobï¼‰ã€‚è¿™äº› Lua è„šæœ¬å¯ä»¥åœ¨ argocd-cm ConfigMap ä¸­æˆ–ä¸Šæ¸¸çš„ Argo CD &lt;a href=&#34;https://github.com/argoproj/argo-cd/tree/master/resource_customizations&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;resource_customizations&lt;/a&gt; ç›®å½•ä¸­è¿›è¡Œé…ç½®ã€‚è¿™äº›è‡ªå®šä¹‰æ“ä½œæœ‰ä¸¤ä¸ª Lua è„šæœ¬ï¼šä¸€ä¸ªç”¨äºä¿®æ”¹è¯¥èµ„æºï¼Œå¦ä¸€ä¸ªç”¨äºæ£€æµ‹æ˜¯å¦å¯ä»¥æ‰§è¡Œè¯¥æ“ä½œï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·ä¸åº”è¯¥èƒ½å¤Ÿæ¢å¤æœªæš‚åœçš„ Rolloutï¼‰ã€‚Argo CD å…è®¸ç”¨æˆ·é€šè¿‡ UI æˆ– CLI æ‰§è¡Œè¿™äº›æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ CLI ä¸­ï¼Œç”¨æˆ·ï¼ˆæˆ– CI ç³»ç»Ÿï¼‰å¯ä»¥è¿è¡Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;argocd app actions run &amp;lt;APP_NAME&amp;gt; &amp;lt;ACTION&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¯¥å‘½ä»¤æ‰§è¡Œåˆ—å‡ºåœ¨åº”ç”¨ç¨‹åºä¸Šçš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ UI ä¸­ï¼Œç”¨æˆ·å¯ä»¥å•å‡»èµ„æºçš„æ±‰å ¡åŒ…æŒ‰é’®ï¼Œæ“ä½œå°†åœ¨å‡ ç§’é’Ÿå†…å‡ºç°ã€‚ç”¨æˆ·å¯ä»¥å•å‡»å¹¶ç¡®è®¤è¯¥æ“ä½œä»¥æ‰§è¡Œå®ƒã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰ï¼ŒArgo CD ä¸­çš„ Rollout æ“ä½œæœ‰ä¸¤ä¸ªå¯ç”¨çš„è‡ªå®šä¹‰æ“ä½œï¼šresume å’Œ restartã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;resumeï¼šå–æ¶ˆæš‚åœå…·æœ‰ PauseCondition çš„ Rolloutã€‚&lt;/li&gt;
&lt;li&gt;restartï¼šè®¾ç½® RestartAt å¹¶å¯¼è‡´æ‰€æœ‰ pod é‡æ–°å¯åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;argo-rollout-éœ€è¦åƒ-istio-è¿™æ ·çš„-service-mesh-å—&#34;&gt;Argo Rollout éœ€è¦åƒ Istio è¿™æ ·çš„ Service Mesh å—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Argo Rollouts ä¸éœ€è¦ä½¿ç”¨æœåŠ¡ç½‘æ ¼æˆ–å…¥å£æ§åˆ¶å™¨ã€‚åœ¨ç¼ºä¹æµé‡è·¯ç”±æä¾›ç¨‹åºçš„æƒ…å†µä¸‹ï¼ŒArgo Rollouts ç®¡ç†é‡‘ä¸é›€/ç¨³å®š ReplicaSets çš„å¤åˆ¶è®¡æ•°ï¼Œä»¥å®ç°æ‰€éœ€çš„é‡‘ä¸é›€æƒé‡ã€‚æ­£å¸¸çš„ Kubernetes Service è·¯ç”±ï¼ˆé€šè¿‡ kube-proxyï¼‰ç”¨äºåœ¨ ReplicaSets ä¹‹é—´åˆ†é…æµé‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;argo-rollout-éœ€è¦æˆ‘ä»¬åœ¨ç»„ç»‡ä¸­éµå¾ª-gitops-å—&#34;&gt;Argo Rollout éœ€è¦æˆ‘ä»¬åœ¨ç»„ç»‡ä¸­éµå¾ª GitOps å—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Argo Rollouts æ˜¯ä¸€ä¸ª Kubernetes æ§åˆ¶å™¨ï¼Œæ— è®ºå¦‚ä½•æ›´æ”¹æ¸…å•ï¼Œå®ƒéƒ½ä¼šå¯¹å…¶åšå‡ºååº”ã€‚æ¸…å•å¯ä»¥é€šè¿‡ Git æäº¤ã€API è°ƒç”¨ã€å¦ä¸€ä¸ªæ§åˆ¶å™¨ç”šè‡³æ˜¯æ‰‹åŠ¨çš„ &lt;code&gt;kubectl&lt;/code&gt; å‘½ä»¤è¿›è¡Œæ›´æ”¹ã€‚ä½ å¯ä»¥ä½¿ç”¨ Argo Rollouts ä¸ä»»ä½•ä¸éµå¾ª GitOps æ–¹æ³•çš„ä¼ ç»Ÿ CI/CD è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;æˆ‘ä»¬å¯ä»¥ä»¥-ha-æ¨¡å¼è¿è¡Œ-argo-rollouts-æ§åˆ¶å™¨å—&#34;&gt;æˆ‘ä»¬å¯ä»¥ä»¥ HA æ¨¡å¼è¿è¡Œ Argo Rollouts æ§åˆ¶å™¨å—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å¯ä»¥ã€‚k8s é›†ç¾¤å¯ä»¥è¿è¡Œå¤šä¸ª Argo-rollouts æ§åˆ¶å™¨å‰¯æœ¬ä»¥å®ç° HAã€‚è¦å¯ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨ &lt;code&gt;--leader-elect&lt;/code&gt; æ ‡å¿—è¿è¡Œæ§åˆ¶å™¨ï¼Œå¹¶å¢åŠ æ§åˆ¶å™¨çš„éƒ¨ç½²æ¸…å•ä¸­çš„å‰¯æœ¬æ•°ã€‚è¯¥å®ç°åŸºäº &lt;a href=&#34;https://pkg.go.dev/k8s.io/client-go/tools/leaderelection#section-documentation&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;k8s client-go çš„ leaderelection package&lt;/a&gt;ã€‚è¯¥å®ç°å¯¹å‰¯æœ¬ä¹‹é—´çš„&lt;em&gt;ä»»æ„æ—¶é’Ÿåå·®&lt;/em&gt;å…·æœ‰å®¹é”™èƒ½åŠ›ã€‚åå·®ç‡çš„å®¹å¿åº¦å¯ä»¥é€šè¿‡é€‚å½“è®¾ç½® &lt;code&gt;--leader-election-lease-duration&lt;/code&gt; å’Œ &lt;code&gt;--leader-election-renew-deadline&lt;/code&gt; æ¥é…ç½®ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href=&#34;https://pkg.go.dev/k8s.io/client-go/tools/leaderelection#pkg-overview&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;package documentation&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;rollouts&#34;&gt;Rollouts&lt;/h2&gt;
&lt;h3 id=&#34;argo-rollouts-æ”¯æŒå“ªäº›éƒ¨ç½²ç­–ç•¥&#34;&gt;Argo Rollouts æ”¯æŒå“ªäº›éƒ¨ç½²ç­–ç•¥ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Argo Rollouts æ”¯æŒ BlueGreenã€Canary å’Œ Rolling Updateã€‚æ­¤å¤–ï¼Œå¯ä»¥åœ¨è“ç»¿/é‡‘ä¸é›€æ›´æ–°ä¹‹ä¸Šå¯ç”¨æ¸è¿›å¼äº¤ä»˜åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æä¾›é«˜çº§éƒ¨ç½²ï¼Œä¾‹å¦‚è‡ªåŠ¨åˆ†æå’Œå›æ»šã€‚&lt;/p&gt;
&lt;h3 id=&#34;rollout-å¯¹è±¡åœ¨åˆ›å»ºæ—¶æ˜¯å¦éµå¾ªæä¾›çš„ç­–ç•¥&#34;&gt;Rollout å¯¹è±¡åœ¨åˆ›å»ºæ—¶æ˜¯å¦éµå¾ªæä¾›çš„ç­–ç•¥ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸ Deployments ä¸€æ ·ï¼ŒRollouts åœ¨åˆå§‹éƒ¨ç½²æ—¶ä¸éµå¾ªç­–ç•¥å‚æ•°ã€‚æ§åˆ¶å™¨å°è¯•é€šè¿‡ä»æä¾›çš„ &lt;code&gt;.spec.template&lt;/code&gt; åˆ›å»ºå®Œå…¨æ‰©å±•çš„ ReplicaSet æ¥å°½å¿«å°† Rollout é€æ­¥å¼•å…¥ç¨³å®šçŠ¶æ€ã€‚ä¸€æ—¦ Rollout æœ‰ä¸€ä¸ªç¨³å®šçš„ ReplicaSet å¯ä»¥è¿‡æ¸¡ï¼Œæ§åˆ¶å™¨å°±å¼€å§‹ä½¿ç”¨æä¾›çš„ç­–ç•¥å°†å‰ä¸€ä¸ª ReplicaSet è¿‡æ¸¡åˆ°æ‰€éœ€çš„ ReplicaSetã€‚&lt;/p&gt;
&lt;h3 id=&#34;è“ç»¿å›æ»šå¦‚ä½•å·¥ä½œ&#34;&gt;è“ç»¿å›æ»šå¦‚ä½•å·¥ä½œï¼Ÿ&lt;/h3&gt;
&lt;p&gt;BlueGreen Rollout ä¿ç•™æ—§çš„ ReplicaSet è¿è¡Œ 30 ç§’æˆ– scaleDownDelaySeconds çš„å€¼ã€‚æ§åˆ¶å™¨é€šè¿‡æ·»åŠ åä¸º &lt;code&gt;argo-rollouts.argoproj.io/scale-down-deadline&lt;/code&gt; çš„æ³¨é‡Šæ¥è·Ÿè¸ªç¼©å°è§„æ¨¡ä¹‹å‰çš„å‰©ä½™æ—¶é—´ã€‚å¦‚æœåœ¨æ—§ ReplicaSet ç¼©å°ä¹‹å‰åº”ç”¨æ—§çš„ Rollout æ¸…å•ï¼Œåˆ™æ§åˆ¶å™¨æ‰§è¡Œæ‰€è°“çš„å¿«é€Ÿå›æ»šã€‚æ§åˆ¶å™¨ç«‹å³å°†æ´»åŠ¨æœåŠ¡çš„é€‰æ‹©å™¨åˆ‡æ¢å›æ—§ ReplicaSet çš„ rollout-pod-template-hashï¼Œå¹¶ä»è¯¥ ReplicaSet ä¸­åˆ é™¤ç¼©å°çš„æ³¨é‡Šã€‚æ§åˆ¶å™¨åœ¨å°è¯•å¼•å…¥æ–°ç‰ˆæœ¬æ—¶ä¸æ‰§è¡Œä»»ä½•å¸¸è§„æ“ä½œï¼Œå› ä¸ºå®ƒè¯•å›¾å°½å¿«æ¢å¤ã€‚å¦‚æœç¼©å°èŒƒå›´æ³¨é‡Šè¿‡å»ï¼Œå¹¶ä¸”æ—§çš„ ReplicaSet å·²ç»ç¼©å°ï¼Œåˆ™ä¼šå‘ç”Ÿéå¿«é€Ÿè·Ÿè¸ªå›æ»šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒRollout å°† ReplicaSet è§†ä¸ºä»»ä½•æ–°çš„ ReplicaSetï¼Œå¹¶éµå¾ªéƒ¨ç½²æ–°çš„ ReplicaSet çš„å¸¸è§„ç¨‹åºã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯-argo-rolloutsargoprojiomanaged-by-rollouts-æ³¨é‡Š&#34;&gt;ä»€ä¹ˆæ˜¯ &lt;code&gt;argo-rollouts.argoproj.io/managed-by-rollouts&lt;/code&gt; æ³¨é‡Šï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Argo Rollouts åœ¨æ§åˆ¶å™¨ä¿®æ”¹çš„æœåŠ¡å’Œ Ingress ä¸­æ·»åŠ äº† &lt;code&gt;argo-rollouts.argoproj.io/managed-by-rollouts&lt;/code&gt; æ³¨é‡Šã€‚å®ƒä»¬ç”¨äºåœ¨åˆ é™¤ç®¡ç†è¿™äº›èµ„æºçš„ Rollout æ—¶ï¼Œæ§åˆ¶å™¨å°è¯•å°†å®ƒä»¬è¿˜åŸå›å®ƒä»¬çš„å…ˆå‰çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;rollbacks&#34;&gt;Rollbacks&lt;/h2&gt;
&lt;h3 id=&#34;argo-rollouts-åœ¨å›æ»šæ—¶ä¼šåœ¨-git-ä¸­å†™å›å—&#34;&gt;Argo Rollouts åœ¨å›æ»šæ—¶ä¼šåœ¨ Git ä¸­å†™å›å—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸ä¼šã€‚Argo Rollouts ä¸ä¼šè¯»å–/å†™å…¥ Git ä¸­çš„ä»»ä½•å†…å®¹ã€‚å®é™…ä¸Šï¼ŒArgo Rollouts å¯¹ Git å­˜å‚¨åº“ä¸€æ— æ‰€çŸ¥ï¼ˆåªæœ‰ Argo CD æœ‰æ­¤ä¿¡æ¯ï¼Œå¦‚æœå®ƒç®¡ç† Rolloutï¼‰ã€‚å½“å›æ»šå‘ç”Ÿæ—¶ï¼ŒArgo Rollouts å°†åº”ç”¨ç¨‹åºæ ‡è®°ä¸ºâ€œé™çº§â€ï¼Œå¹¶å°†é›†ç¾¤ä¸Šçš„ç‰ˆæœ¬æ›´æ”¹å›å·²çŸ¥ç¨³å®šç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚æœæˆ‘åŒæ—¶ä½¿ç”¨-argo-rollouts-å’Œ-argo-cdå›æ»šçš„æƒ…å†µä¸‹æ˜¯å¦ä¼šå‡ºç°æ— é™å¾ªç¯&#34;&gt;å¦‚æœæˆ‘åŒæ—¶ä½¿ç”¨ Argo Rollouts å’Œ Argo CDï¼Œå›æ»šçš„æƒ…å†µä¸‹æ˜¯å¦ä¼šå‡ºç°æ— é™å¾ªç¯ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸ä¼šå‡ºç°æ— é™å¾ªç¯ã€‚å¦‚å‰é¢çš„é—®é¢˜ä¸­å·²ç»è§£é‡Šçš„é‚£æ ·ï¼ŒArgo Rollouts åœ¨ä»»ä½•æ–¹å¼ä¸Šéƒ½ä¸ä¼šå¹²æ‰° Gitã€‚å¦‚æœä½ åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ª Argo é¡¹ç›®ï¼Œå›æ»šçš„äº‹ä»¶åºåˆ—å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç‰ˆæœ¬ N åœ¨ Rolloutï¼ˆç”± Argo CD ç®¡ç†ï¼‰ä¸Šåœ¨é›†ç¾¤ä¸Šè¿è¡Œã€‚Git å­˜å‚¨åº“å·²æ›´æ–°ä¸º Rollout/Deployment æ¸…å•ä¸­çš„ç‰ˆæœ¬ N+1&lt;/li&gt;
&lt;li&gt;Argo CD åœ¨ Git ä¸­çœ‹åˆ°æ›´æ”¹å¹¶ä½¿ç”¨æ–°çš„ Rollout å¯¹è±¡æ›´æ–°é›†ç¾¤ä¸­çš„å®æ—¶çŠ¶æ€&lt;/li&gt;
&lt;li&gt;Argo Rollouts æ¥ç®¡ï¼Œå› ä¸ºå®ƒè§‚å¯Ÿæ‰€æœ‰ Rollout å¯¹è±¡çš„æ›´æ”¹ã€‚Argo Rollouts å®Œå…¨ä¸çŸ¥é“ Git ä¸­æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚å®ƒåªå…³å¿ƒåœ¨é›†ç¾¤ä¸­å®æ—¶è¿è¡Œçš„ Rollout å¯¹è±¡æ­£åœ¨å‘ç”Ÿä»€ä¹ˆã€‚&lt;/li&gt;
&lt;li&gt;Argo Rollouts å°è¯•ä½¿ç”¨æ‰€é€‰ç­–ç•¥ï¼ˆä¾‹å¦‚ï¼Œè“/ç»¿ï¼‰åº”ç”¨ç‰ˆæœ¬ N+1ã€‚&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬ N+1 ç”±äºæŸç§åŸå› æ— æ³•éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;Argo Rollouts å†æ¬¡ç¼©å°ï¼ˆæˆ–åˆ‡æ¢å›æµé‡ï¼‰åˆ°é›†ç¾¤ä¸­çš„ç‰ˆæœ¬ Nã€‚Argo Rollouts ä¸ä¼šåœ¨ Git ä¸­è¿›è¡Œä»»ä½•æ›´æ”¹&lt;/li&gt;
&lt;li&gt;é›†ç¾¤æ­£åœ¨è¿è¡Œç‰ˆæœ¬ Nï¼Œå®Œå…¨å¥åº·&lt;/li&gt;
&lt;li&gt;Rollout åœ¨ ArgoCD å’Œ Argo Rollouts ä¸­éƒ½æ ‡è®°ä¸ºâ€œé™çº§â€ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ Git ä¸­çš„ Rollout å¯¹è±¡ä¸é›†ç¾¤ä¸­çš„ç›¸åŒï¼Œåˆ™ Argo CD åŒæ­¥ä¸ä¼šé‡‡å–è¿›ä¸€æ­¥æªæ–½ã€‚å®ƒä»¬éƒ½æåˆ°ç‰ˆæœ¬ N+1&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;é‚£ä¹ˆæˆ‘å¦‚ä½•ä½¿-argo-rollouts-åœ¨å›æ»šæ—¶å†™å›-git&#34;&gt;é‚£ä¹ˆæˆ‘å¦‚ä½•ä½¿ Argo Rollouts åœ¨å›æ»šæ—¶å†™å› Gitï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ åªæƒ³ä½¿ç”¨ Argo CD å›é€€åˆ°ä»¥å‰çš„ç‰ˆæœ¬ï¼Œåˆ™ä¸éœ€è¦è¿™æ ·åšã€‚å½“éƒ¨ç½²å¤±è´¥æ—¶ï¼ŒArgo Rollouts ä¼šè‡ªåŠ¨å°†é›†ç¾¤è®¾ç½®å›ç¨³å®š/ä»¥å‰çš„ç‰ˆæœ¬ï¼Œå¦‚å‰é¢çš„é—®é¢˜ä¸­æ‰€è¿°ã€‚ä½ ä¸éœ€è¦å†™å…¥ Git ä»¥å®ç°æ­¤ç›®çš„ã€‚é›†ç¾¤ä»ç„¶å¥åº·ï¼Œä½ å·²é¿å…äº†åœæœºæ—¶é—´ã€‚ç„¶åï¼Œä½ åº”è¯¥ä¿®å¤é—®é¢˜å¹¶å‘å‰æ»šåŠ¨ï¼ˆå³éƒ¨ç½²ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼‰ï¼Œå¦‚æœä½ æƒ³ä»¥ä¸¥æ ¼çš„æ–¹å¼éµå¾ª GitOpsã€‚å¦‚æœä½ æƒ³åœ¨éƒ¨ç½²å¤±è´¥åä½¿ Argo Rollouts åœ¨ Git ä¸­å†™å›ï¼Œåˆ™éœ€è¦ä½¿ç”¨å¤–éƒ¨ç³»ç»Ÿæˆ–ç¼–å†™è‡ªå®šä¹‰ç²˜åˆä»£ç æ¥åè°ƒæ­¤æ“ä½œã€‚ä½†é€šå¸¸ä¸éœ€è¦è¿™æ ·åšã€‚&lt;/p&gt;
&lt;h3 id=&#34;rollouts-with-argo-rollouts-å’Œ-rollbacks-with-argo-cd-ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»&#34;&gt;Rollouts with Argo Rollouts å’Œ Rollbacks with Argo CD ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å®ƒä»¬å®Œå…¨æ²¡æœ‰å…³ç³»ã€‚Argo Rollouts çš„ &amp;ldquo;rollbacks&amp;rdquo; å°†é›†ç¾¤åˆ‡æ¢å›ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚å‰ä¸€ä¸ªé—®é¢˜æ‰€è¿°ã€‚å®ƒä»¬ä¸ä¼šä»¥ä»»ä½•æ–¹å¼è§¦åŠæˆ–å½±å“ Gitã€‚Argo CD çš„ &lt;a href=&#34;https://argo-cd.readthedocs.io/en/stable/user-guide/commands/argocd_app_rollback/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;rollbacks&lt;/a&gt; åªæ˜¯å°†é›†ç¾¤æŒ‡å›ä»¥å‰çš„ Git å“ˆå¸Œã€‚é€šå¸¸ï¼Œå¦‚æœä½ æœ‰ Argo Rolloutsï¼Œå°±ä¸éœ€è¦ä½¿ç”¨ Argo CD å›æ»šå‘½ä»¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•åœ¨å•ä¸ªæ­¥éª¤ä¸­éƒ¨ç½²å¤šä¸ªæœåŠ¡å¹¶æ ¹æ®å®ƒä»¬çš„ä¾èµ–å…³ç³»å›æ»š&#34;&gt;å¦‚ä½•åœ¨å•ä¸ªæ­¥éª¤ä¸­éƒ¨ç½²å¤šä¸ªæœåŠ¡å¹¶æ ¹æ®å®ƒä»¬çš„ä¾èµ–å…³ç³»å›æ»šï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Rollout è§„èŒƒä¸“æ³¨äºå•ä¸ªåº”ç”¨ç¨‹åº/éƒ¨ç½²ã€‚Argo Rollouts ä¸çŸ¥é“åº”ç”¨ç¨‹åºä¾èµ–å…³ç³»ã€‚å¦‚æœä½ æƒ³ä»¥æ™ºèƒ½æ–¹å¼åŒæ—¶éƒ¨ç½²å¤šä¸ªåº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ï¼Œå¦‚æœåç«¯éƒ¨ç½²å¤±è´¥ï¼Œåˆ™è‡ªåŠ¨å›æ»šå‰ç«¯ï¼‰ï¼Œåˆ™éœ€è¦åœ¨ Argo Rollouts ä¹‹ä¸Šç¼–å†™è‡ªå·±çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä¸ºè¦éƒ¨ç½²çš„æ¯ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ª Rollout èµ„æºã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä½ è¿˜åº”è¯¥ä½¿ä½ çš„æœåŠ¡å‘å‰å‘åå…¼å®¹ï¼ˆå³å‰ç«¯åº”è¯¥èƒ½å¤Ÿä¸ backend-preview å’Œ backend-active ä¸€èµ·å·¥ä½œï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•è¿è¡Œè‡ªå·±çš„è‡ªå®šä¹‰æµ‹è¯•ä¾‹å¦‚çƒŸé›¾æµ‹è¯•ä»¥å†³å®šæ˜¯å¦åº”è¿›è¡Œå›æ»š&#34;&gt;å¦‚ä½•è¿è¡Œè‡ªå·±çš„è‡ªå®šä¹‰æµ‹è¯•ï¼ˆä¾‹å¦‚çƒŸé›¾æµ‹è¯•ï¼‰ä»¥å†³å®šæ˜¯å¦åº”è¿›è¡Œå›æ»šï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨è‡ªå®šä¹‰ &lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/analysis/job/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Job&lt;/a&gt; æˆ– &lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/analysis/web/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Web&lt;/a&gt; Analysisã€‚ä½ å¯ä»¥å°†æ‰€æœ‰çƒŸé›¾æµ‹è¯•æ‰“åŒ…åˆ°å•ä¸ªå®¹å™¨ä¸­ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸º Job åˆ†æè¿è¡Œã€‚Argo Rollouts å°†ä½¿ç”¨åˆ†æç»“æœè‡ªåŠ¨å›æ»šï¼Œå¦‚æœæµ‹è¯•å¤±è´¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®éªŒ&#34;&gt;å®éªŒ&lt;/h2&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆæˆ‘çš„å®éªŒæ²¡æœ‰ç»“æŸ&#34;&gt;ä¸ºä»€ä¹ˆæˆ‘çš„å®éªŒæ²¡æœ‰ç»“æŸï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å®éªŒçš„æŒç»­æ—¶é—´ç”± &lt;code&gt;.spec.duration&lt;/code&gt; å­—æ®µå’Œä¸ºå®éªŒåˆ›å»ºçš„åˆ†ææ§åˆ¶ã€‚&lt;code&gt;.spec.duration&lt;/code&gt; æŒ‡ç¤ºå®éªŒåˆ›å»ºçš„ ReplicaSet åº”è¿è¡Œå¤šé•¿æ—¶é—´ã€‚ä¸€æ—¦æ—¶é—´è¿‡å»ï¼Œå®éªŒå°†ç¼©å°å®ƒåˆ›å»ºçš„ ReplicaSetï¼Œå¹¶å°† AnalysisRuns æ ‡è®°ä¸ºæˆåŠŸï¼Œé™¤éå®éªŒä¸­ä½¿ç”¨äº† &lt;code&gt;requiredForCompletion&lt;/code&gt; å­—æ®µã€‚å¦‚æœå¯ç”¨äº†è¯¥å­—æ®µï¼ŒReplicaSet ä»ç„¶ä¼šè¢«ç¼©å°ï¼Œä½†æ˜¯ç›´åˆ° Analysis Run å®Œæˆï¼Œå®éªŒæ‰ä¼šç»“æŸã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œ&lt;code&gt;.spec.duration&lt;/code&gt; æ˜¯ä¸€ä¸ªå¯é€‰å­—æ®µã€‚å¦‚æœå®ƒæœªè®¾ç½®ï¼Œå¹¶ä¸”å®éªŒæœªåˆ›å»ºä»»ä½• AnalysisRunsï¼Œåˆ™ ReplicaSets å°†æ— é™æœŸè¿è¡Œã€‚å®éªŒåˆ›å»ºæ²¡æœ‰ &lt;code&gt;requiredForCompletion&lt;/code&gt; å­—æ®µçš„ AnalysisRunsï¼Œå½“æ‰€åˆ›å»ºçš„ AnalysisRun å¤±è´¥æˆ–å‡ºé”™æ—¶ï¼Œå®éªŒå¤±è´¥ã€‚å¦‚æœè®¾ç½®äº† &lt;code&gt;requiredForCompletion&lt;/code&gt; å­—æ®µï¼Œåˆ™å®éªŒä»…åœ¨ AnalysisRun å®ŒæˆæˆåŠŸæ—¶æ ‡è®°è‡ªå·±ä¸ºæˆåŠŸå¹¶ç¼©å°åˆ›å»ºçš„ ReplicaSetsã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå¦‚æœ &lt;code&gt;.spec.terminate&lt;/code&gt; å­—æ®µè®¾ç½®ä¸º trueï¼Œåˆ™å®éªŒä¼šç»“æŸï¼Œæ— è®ºå®éªŒçš„çŠ¶æ€å¦‚ä½•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ†æ&#34;&gt;åˆ†æ&lt;/h2&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆæˆ‘çš„-analysisrun-æ²¡æœ‰ç»“æŸ&#34;&gt;ä¸ºä»€ä¹ˆæˆ‘çš„ AnalysisRun æ²¡æœ‰ç»“æŸï¼Ÿ&lt;/h3&gt;
&lt;p&gt;AnalysisRun çš„æŒç»­æ—¶é—´ç”±æŒ‡å®šçš„åº¦é‡æ ‡å‡†æ§åˆ¶ã€‚æ¯ä¸ªåº¦é‡æ ‡å‡†éƒ½å¯ä»¥æŒ‡å®šæ—¶é—´é—´éš”ã€è®¡æ•°å’Œå„ç§é™åˆ¶ï¼ˆConsecutiveErrorLimitã€InconclusiveLimitã€FailureLimitï¼‰ã€‚å¦‚æœçœç•¥äº†æ—¶é—´é—´éš”ï¼Œåˆ™ AnalysisRun è¿›è¡Œå•æ¬¡æµ‹é‡ã€‚è®¡æ•°æŒ‡ç¤ºåº”è¿›è¡Œå¤šå°‘æ¬¡æµ‹é‡ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™ AnalysisRun å°†æ— é™æœŸè¿è¡Œã€‚ConsecutiveErrorLimitã€InconclusiveLimit å’Œ FailureLimit å®šä¹‰äº†å…è®¸çš„é˜ˆå€¼ï¼Œä»¥ä¾¿åœ¨å°† Rollout æ”¾å…¥å®ŒæˆçŠ¶æ€ä¹‹å‰ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå¦‚æœ &lt;code&gt;.spec.terminate&lt;/code&gt; å­—æ®µè®¾ç½®ä¸º trueï¼Œåˆ™ AnalysisRun ä¼šç»“æŸï¼Œæ— è®ºåˆ†æè¿è¡Œçš„çŠ¶æ€å¦‚ä½•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¤±è´¥å’Œé”™è¯¯ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«&#34;&gt;å¤±è´¥å’Œé”™è¯¯ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å½“å¤±è´¥æ¡ä»¶è®¡ç®—ä¸º true æˆ–æ²¡æœ‰å¤±è´¥æ¡ä»¶çš„ AnalysisRun è®¡ç®—æˆåŠŸæ¡ä»¶ä¸º false æ—¶ï¼Œå¤±è´¥æ˜¯ã€‚å½“æ§åˆ¶å™¨åœ¨æ‰§è¡Œæµ‹é‡æ—¶å‡ºç°ä»»ä½•é—®é¢˜ï¼ˆå³æ— æ•ˆçš„ Prometheus URLï¼‰æ—¶ï¼Œé”™è¯¯å°±ä¼šå‘ç”Ÿã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title></title>
      <link>https://lib.jimmysong.io/argo-rollouts/security/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/security/</guid>
      <description>&lt;h2 id=&#34;æŠ¥å‘Šæ¼æ´&#34;&gt;æŠ¥å‘Šæ¼æ´&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ åœ¨ Argo Rollouts ä¸­å‘ç°ä¸å®‰å…¨ç›¸å…³çš„é”™è¯¯ï¼Œæˆ‘ä»¬æ³è¯·ä½ è´Ÿè´£ä»»åœ°è¿›è¡ŒæŠ«éœ²ï¼Œå¹¶ç»™æˆ‘ä»¬é€‚å½“çš„æ—¶é—´æ¥ååº”ã€åˆ†æå’Œå¼€å‘ä¿®å¤ç¨‹åºï¼Œä»¥å‡è½»å‘ç°çš„å®‰å…¨æ¼æ´ã€‚&lt;/p&gt;
&lt;p&gt;è¯·é€šè¿‡ç”µå­é‚®ä»¶å°†æ¼æ´æŠ¥å‘Šè‡³ä»¥ä¸‹åœ°å€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;mailto:cncf-argo-security@lists.cncf.io&#34;&gt;cncf-argo-security@lists.cncf.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€æœ‰æ¼æ´å’Œç›¸å…³ä¿¡æ¯éƒ½å°†å¾—åˆ°å®Œå…¨ä¿å¯†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…¬å¼€æŠ«éœ²&#34;&gt;å…¬å¼€æŠ«éœ²&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨ &lt;a href=&#34;https://github.com/argoproj/argo-rollouts/security/advisories&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub å®‰å…¨å»ºè®®&lt;/a&gt;åŠŸèƒ½å‘å¸ƒå®‰å…¨å»ºè®®ï¼Œä»¥ä½¿æˆ‘ä»¬çš„ç¤¾åŒºå……åˆ†äº†è§£æƒ…å†µï¼Œå¹¶å°†æ„Ÿè°¢ä½ çš„å‘ç°ï¼ˆå½“ç„¶ï¼Œé™¤éä½ æ„¿æ„ä¿æŒåŒ¿åï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;internet-bug-bounty-åˆä½œ&#34;&gt;Internet Bug Bounty åˆä½œ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼ŒArgo é¡¹ç›®æ­£åœ¨ä¸ &lt;a href=&#34;https://hackerone.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Hacker One&lt;/a&gt; åŠå…¶&lt;a href=&#34;https://hackerone.com/ibb&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº’è”ç½‘é”™è¯¯èµé‡‘è®¡åˆ’&lt;/a&gt;çš„ä¼˜ç§€äººå‘˜åˆä½œï¼Œä»¥å¥–åŠ±åœ¨å››ä¸ªä¸»è¦ Argo é¡¹ç›®ï¼ˆCDã€æ´»åŠ¨ã€æ¨å‡ºå’Œå·¥ä½œæµç¨‹ï¼‰ä¸­å‘ç°å®‰å…¨æ¼æ´çš„ä¼˜ç§€äººå‘˜ç„¶åä¸æˆ‘ä»¬ä¸€èµ·ä»¥è´Ÿè´£ä»»çš„æ–¹å¼ä¿®å¤å’ŒæŠ«éœ²å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æŒ‰ç…§æœ¬å®‰å…¨æ”¿ç­–ä¸­çš„è§„å®šå‘æˆ‘ä»¬æŠ¥å‘Šæ¼æ´ï¼Œæˆ‘ä»¬å°†ä¸ä½ å…±åŒç¡®å®šä½ çš„å‘ç°æ˜¯å¦ç¬¦åˆé¢†å–èµé‡‘çš„æ¡ä»¶ï¼Œä»¥åŠå¦‚ä½•é¢†å–èµé‡‘ã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
