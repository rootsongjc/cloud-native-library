<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>é€šçŸ¥ | äº‘åŸç”Ÿèµ„æ–™åº“</title>
    <link>https://lib.jimmysong.io/argo-rollouts/notifications/</link>
      <atom:link href="https://lib.jimmysong.io/argo-rollouts/notifications/index.xml" rel="self" type="application/rss+xml" />
    <description>é€šçŸ¥</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><lastBuildDate>Wed, 21 Jun 2023 16:00:00 +0800</lastBuildDate>
    <image>
      <url>https://lib.jimmysong.io/media/sharing.png</url>
      <title>é€šçŸ¥</title>
      <link>https://lib.jimmysong.io/argo-rollouts/notifications/</link>
    </image>
    
    <item>
      <title>é€šçŸ¥</title>
      <link>https://lib.jimmysong.io/argo-rollouts/notifications/overview/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/notifications/overview/</guid>
      <description>&lt;p&gt;ğŸ”” é‡è¦æç¤ºï¼šè‡ªç‰ˆæœ¬ 1.1 èµ·å¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Argo Rollouts æä¾›é€šçŸ¥åŠŸèƒ½ï¼Œç”±&lt;a href=&#34;https://github.com/argoproj/notifications-engine&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Notifications Engine&lt;/a&gt;æ”¯æŒã€‚æ§åˆ¶å™¨ç®¡ç†å‘˜å¯ä»¥åˆ©ç”¨çµæ´»çš„è§¦å‘å™¨å’Œæ¨¡æ¿ç³»ç»Ÿæ¥é…ç½®ç»ˆç«¯ç”¨æˆ·è¯·æ±‚çš„é€šçŸ¥ã€‚ç»ˆç«¯ç”¨æˆ·å¯ä»¥é€šè¿‡åœ¨ Rollout å¯¹è±¡ä¸­æ·»åŠ æ³¨é‡Šæ¥è®¢é˜…é…ç½®çš„è§¦å‘å™¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é…ç½®&#34;&gt;é…ç½®&lt;/h2&gt;
&lt;p&gt;è§¦å‘å™¨å®šä¹‰äº†é€šçŸ¥åº”è¯¥åœ¨ä½•æ—¶å‘é€ä»¥åŠé€šçŸ¥å†…å®¹æ¨¡æ¿ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒArgo Rollouts é™„å¸¦äº†ä¸€ç³»åˆ—å†…ç½®è§¦å‘å™¨ï¼Œæ¶µç›–äº† Argo Rollout ç”Ÿå‘½å‘¨æœŸçš„æœ€é‡è¦äº‹ä»¶ã€‚è§¦å‘å™¨å’Œæ¨¡æ¿éƒ½åœ¨&lt;code&gt;argo-rollouts-notification-configmap&lt;/code&gt; ConfigMap ä¸­é…ç½®ã€‚ä¸ºäº†å¿«é€Ÿå…¥é—¨ï¼Œä½ å¯ä»¥ä½¿ç”¨åœ¨&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/manifests/notifications-install.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;notifications-install.yaml&lt;/a&gt;ä¸­å®šä¹‰çš„é¢„é…ç½®é€šçŸ¥æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ­£åœ¨åˆ©ç”¨ Kustomizeï¼Œåˆ™å»ºè®®å°†&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/blob/master/manifests/notifications-install.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;notifications-install.yaml&lt;/a&gt;ä½œä¸ºè¿œç¨‹èµ„æºåŒ…å«åœ¨ä½ çš„&lt;code&gt;kustomization.yaml&lt;/code&gt;æ–‡ä»¶ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kustomize.config.k8s.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Kustomization&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;https://github.com/argoproj/argo-rollouts/releases/latest/download/install.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;https://github.com/argoproj/argo-rollouts/releases/latest/download/notifications-install.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨åŒ…å«&lt;code&gt;argo-rollouts-notification-configmap&lt;/code&gt; ConfigMap ä¹‹åï¼Œç®¡ç†å‘˜éœ€è¦é…ç½®ä¸æ‰€éœ€é€šçŸ¥æœåŠ¡ï¼ˆä¾‹å¦‚ Slack æˆ– MS Teamsï¼‰çš„é›†æˆã€‚ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº† Slack é›†æˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ConfigMap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argo-rollouts-notification-configmap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æ¨¡æ¿çš„è¯¦ç»†ä¿¡æ¯è¢«çœç•¥&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è§¦å‘å™¨çš„è¯¦ç»†ä¿¡æ¯è¢«çœç•¥&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service.slack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;     token: $slack-token&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;---&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Secret&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argo-rollouts-notification-secret&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;stringData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;slack-token&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;lt;my-slack-token&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰å…³æ”¯æŒçš„æœåŠ¡å’Œé…ç½®è®¾ç½®çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/overview/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœåŠ¡æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é»˜è®¤è§¦å‘å™¨æ¨¡æ¿&#34;&gt;é»˜è®¤è§¦å‘å™¨æ¨¡æ¿&lt;/h2&gt;
&lt;p&gt;ç›®å‰ï¼Œä»¥ä¸‹è§¦å‘å™¨å…·æœ‰&lt;a href=&#34;https://github.com/argoproj/argo-rollouts/tree/master/manifests/notifications&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å†…ç½®æ¨¡æ¿&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;on-rollout-completed&lt;/code&gt;å½“ä¸€ä¸ª rolling rollout ç»“æŸå¹¶ä¸”æ‰€æœ‰æ­¥éª¤éƒ½å·²å®Œæˆæ—¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;on-rollout-step-completed&lt;/code&gt;å½“æ»šåŠ¨éƒ¨ç½²å®šä¹‰ä¸­çš„å•ä¸ªæ­¥éª¤å·²å®Œæˆæ—¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;on-rollout-updated&lt;/code&gt;å½“ Rollout å®šä¹‰æ›´æ”¹æ—¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;on-scaling-replica-set&lt;/code&gt;å½“ Rollout ä¸­çš„å‰¯æœ¬æ•°æ›´æ”¹æ—¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è®¢é˜…&#34;&gt;è®¢é˜…&lt;/h2&gt;
&lt;p&gt;ç»ˆç«¯ç”¨æˆ·å¯ä»¥ä½¿ç”¨&lt;code&gt;notifications.argoproj.io/subscribe.&amp;lt;trigger&amp;gt;.&amp;lt;service&amp;gt;: &amp;lt;recipient&amp;gt;&lt;/code&gt;æ³¨é‡Šå¼€å§‹ä½¿ç”¨é€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ³¨é‡Šè®¢é˜…äº†ä¸¤ä¸ª Slack é¢‘é“ï¼Œä»¥é€šçŸ¥æœ‰å…³é‡‘ä¸é›€æ»šåŠ¨æ­¥éª¤å®Œæˆçš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;---&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argoproj.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Rollout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rollout-canary&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;notifications.argoproj.io/subscribe.on-rollout-step-completed.slack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-channel1;my-channel2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨é‡Šé”®ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;on-rollout-step-completed&lt;/code&gt; - è§¦å‘å™¨åç§°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;slack&lt;/code&gt; - é€šçŸ¥æœåŠ¡åç§°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;my-channel1;my-channel2&lt;/code&gt; - ä¸€ä¸ªç”±åˆ†å·åˆ†éš”çš„æ”¶ä»¶äººåˆ—è¡¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®šåˆ¶&#34;&gt;å®šåˆ¶&lt;/h2&gt;
&lt;p&gt;Rollout ç®¡ç†å‘˜å¯ä»¥é€šè¿‡é…ç½®é€šçŸ¥æ¨¡æ¿å’Œè‡ªå®šä¹‰è§¦å‘å™¨æ¥è‡ªå®šä¹‰é€šçŸ¥&lt;code&gt;argo-rollouts-notification-configmap&lt;/code&gt; ConfigMapã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ¨¡æ¿&#34;&gt;æ¨¡æ¿&lt;/h3&gt;
&lt;p&gt;é€šçŸ¥æ¨¡æ¿æ˜¯ç”Ÿæˆé€šçŸ¥å†…å®¹çš„æ— çŠ¶æ€å‡½æ•°ã€‚è¯¥æ¨¡æ¿åˆ©ç”¨&lt;a href=&#34;https://golang.org/pkg/html/template/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;html/template&lt;/a&gt; golang åŒ…ã€‚å®ƒæ—¨åœ¨å¯é‡ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«å¤šä¸ªè§¦å‘å™¨å¼•ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†æ ·æœ¬æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ConfigMap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argo-rollouts-notification-configmap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template.my-purple-template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;     message: |
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;       Rollout {{.rollout.metadata.name}} has purple image
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;     slack:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;         attachments: |
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;             [{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;               &amp;#34;title&amp;#34;: &amp;#34;{{ .rollout.metadata.name}}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;               &amp;#34;color&amp;#34;: &amp;#34;#800080&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;             }]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¯ä¸ªæ¨¡æ¿éƒ½å¯ä»¥è®¿é—®ä»¥ä¸‹å­—æ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rollout&lt;/code&gt;ä¿å­˜ rolling rollout å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;recipient&lt;/code&gt;ä¿å­˜æ”¶ä»¶äººåç§°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¨¡æ¿å®šä¹‰çš„&lt;code&gt;message&lt;/code&gt;å­—æ®µå…è®¸ä¸ºä»»ä½•é€šçŸ¥æœåŠ¡åˆ›å»ºåŸºæœ¬é€šçŸ¥ã€‚ä½ å¯ä»¥åˆ©ç”¨ç‰¹å®šäºé€šçŸ¥æœåŠ¡çš„å­—æ®µæ¥åˆ›å»ºå¤æ‚çš„é€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ç‰¹å®šäºæœåŠ¡çš„ä½ å¯ä»¥ä¸º Slack æ·»åŠ å—å’Œé™„ä»¶ï¼Œä¸ºç”µå­é‚®ä»¶æ·»åŠ ä¸»é¢˜æˆ– URL è·¯å¾„ï¼Œä¸º Webhook æ·»åŠ æ­£æ–‡ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ç›¸åº”çš„æœåŠ¡æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è‡ªå®šä¹‰è§¦å‘å™¨&#34;&gt;è‡ªå®šä¹‰è§¦å‘å™¨&lt;/h3&gt;
&lt;p&gt;é™¤äº†è‡ªå®šä¹‰é€šçŸ¥æ¨¡æ¿å¤–ï¼Œç®¡ç†å‘˜è¿˜å¯ä»¥é…ç½®è‡ªå®šä¹‰è§¦å‘å™¨ã€‚è‡ªå®šä¹‰è§¦å‘å™¨å®šä¹‰äº†å‘é€é€šçŸ¥çš„æ¡ä»¶ã€‚å®šä¹‰åŒ…æ‹¬åç§°ã€æ¡ä»¶å’Œé€šçŸ¥æ¨¡æ¿å¼•ç”¨ã€‚æ¡ä»¶æ˜¯è¿”å› true å¦‚æœåº”å‘é€é€šçŸ¥çš„è°“è¯è¡¨è¾¾å¼ã€‚è§¦å‘å™¨æ¡ä»¶è¯„ä¼°ç”±&lt;a href=&#34;https://github.com/antonmedv/expr&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;antonmedv/expr&lt;/a&gt;æ”¯æŒã€‚æ¡ä»¶è¯­è¨€è¯­æ³•åœ¨&lt;a href=&#34;https://github.com/antonmedv/expr/blob/master/docs/Language-Definition.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Language-Definition.md&lt;/a&gt;ä¸­æè¿°ã€‚&lt;/p&gt;
&lt;p&gt;è§¦å‘å™¨åœ¨&lt;code&gt;argo-rollouts-notification-configmap&lt;/code&gt; ConfigMap ä¸­é…ç½®ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è§¦å‘å™¨åœ¨ rolling rollout pod è§„èŒƒä½¿ç”¨&lt;code&gt;argoproj/rollouts-demo:purple&lt;/code&gt;é•œåƒæ—¶å‘é€é€šçŸ¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ConfigMap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;argo-rollouts-notification-configmap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trigger.on-purple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;     - send: [my-purple-template]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;       when: rollout.spec.template.spec.containers[0].image == &amp;#39;argoproj/rollouts-demo:purple&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¯ä¸ªæ¡ä»¶å¯èƒ½ä½¿ç”¨å¤šä¸ªæ¨¡æ¿ã€‚é€šå¸¸ï¼Œæ¯ä¸ªæ¨¡æ¿è´Ÿè´£ç”Ÿæˆç‰¹å®šäºæœåŠ¡çš„é€šçŸ¥éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é€šçŸ¥åº¦é‡&#34;&gt;é€šçŸ¥åº¦é‡&lt;/h3&gt;
&lt;p&gt;åœ¨ argo-rollouts ä¸­å¯ç”¨é€šçŸ¥æ—¶ï¼Œå°†å‘å‡ºä»¥ä¸‹ prometheus åº¦é‡æ ‡å‡†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;notification_send_success æ˜¯è®¡ç®—æˆåŠŸå‘é€é€šçŸ¥çš„è®¡æ•°å™¨ã€‚&lt;/li&gt;
&lt;li&gt;notification_send_error æ˜¯è®¡ç®—å‘é€é€šçŸ¥å¤±è´¥çš„è®¡æ•°å™¨ã€‚&lt;/li&gt;
&lt;li&gt;notification_send æ˜¯æµ‹é‡å‘é€é€šçŸ¥æ€§èƒ½çš„ç›´æ–¹å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>é€šçŸ¥æœåŠ¡åˆ—è¡¨</title>
      <link>https://lib.jimmysong.io/argo-rollouts/notifications/services/</link>
      <pubDate>Wed, 21 Jun 2023 16:00:00 +0800</pubDate>
      <guid>https://lib.jimmysong.io/argo-rollouts/notifications/services/</guid>
      <description>&lt;p&gt;Argo Rollouts æ”¯æŒä»¥ä¸‹é€šçŸ¥æœåŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/alertmanager/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Alertmanager&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/email/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Email&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/github/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/googlechat/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google Chat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/grafana/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/mattermost/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Mattermost&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/newrelic/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;NewRelic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/opsgenie/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Opsgenie&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/overview/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/pagerduty/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pagerduty&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/pushover/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pushover&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/rocketchat/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Rocket.Chat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/slack/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Slack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/teams/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Teams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/telegram/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Telegram&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/webex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Webex Teams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://argo-rollouts.readthedocs.io/en/stable/generated/notification-services/webhook/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Webhook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>
